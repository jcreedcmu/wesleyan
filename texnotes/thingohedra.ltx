\documentclass{article}
\usepackage{amssymb}
\input{theorem}

\input{prooftree}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}
\def\pair#1#2{\langle #1 , #2 \rangle}

\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{calc}
\definecolor{morange}{rgb}{1,0.56,0}
\definecolor{lorange}{rgb}{1,0.95,0.8}
\definecolor{mgreen}{rgb}{0,0.56,0}
\definecolor{lgreen}{rgb}{0.95,1,0.8}
\definecolor{mblue2}{rgb}{0,0.2,1.0}
\definecolor{lblue}{rgb}{0.8,0.95,1}
\definecolor{mred}{rgb}{0.9,0.1,0.1}
\definecolor{mgreen}{rgb}{0.1,0.5,0.1}
\definecolor{mblue}{rgb}{0.3,0.3,0.9}
\def\bitf#1{#1 [smooth, tension=0.8] coordinates {(-1.6,2) (-1,1) (0,0)}}
\def\bitg#1{#1 [smooth, tension=0.8] coordinates {(1,2) (0.55,1) (0,0)}}
\def\bitgrev#1{#1 [smooth, tension=0.8] coordinates {(0,0) (0.55,1) (1,2)}}
\def\bitfg#1{#1 [smooth, tension=0.8] coordinates {(0,0) (0,-2) }}
\def\ep{\varepsilon}
\def\bcase{\mathop\mathbf{case}}
\def\bof{\mathop\mathbf{of}}
\def\binj{\mathbf{inj}}
\def\blet{\mathrel\mathbf{let}}
\def\bin{\mathrel\mathbf{in}}
\def\bmatch{\mathrel\mathbf{match}}
\def\bwith{\mathrel\mathbf{with}}
\def\pbck{\ar[dr, phantom, pos=0, "\lrcorner"]}
\def\ups{{\uparrow}}
\def\dns{{\downarrow}}
\def\grad{\nabla}
\def\uups{{\Uparrow}}
\def\ddns{{\Downarrow}}
\def\adjust{\big|}
\def\O{\mathcal{O}}
\def\rid{\mathsf{id}}
\def\ridp{\mathsf{idp}}
\def\rcoe{\mathsf{coe}}
\def\rtype{\mathsf{type}}
%\def\int{\square}
\def\bd{\partial}
\def\prov{\vdash}
\def\prequiv{\dashv\vdash}
\def\imp{\Rightarrow}
\def\cqed{\hskip2mm{\vrule width .5em height .5em depth 0em}} % at the end of a |P.
\def\o{\circ}
\def\lx{\bigcirc}
\def\B{\mathbb{B}}
\def\C{\mathbf{C}}
\def\R{\mathbb{R}}
\def\bx{\mathbf{x}}
\def\by{\mathbf{y}}
\def\bv{\mathbf{v}}
\def\bt{\mathbf{t}}
\def\bu{{\bullet}}
\def\bp{\mathbf{p}}
\def\bz{\mathbf{0}}
\def\bzee{\mathbf{z}}
\def\S{\mathfrak{S}}
\def\M{\mathbb{M}}
\def\X{\mathbf{X}}
\def\Y{\mathcal{Y}}
\def\x{\times}
\def\st{\mathrel|}
\def\rset{\mathbf{Set}}
\def\rcat{\mathbf{Cat}}
\def\op{\mathsf{op}}
\def\P{\mathbb{P}}
\def\I{\mathbb{I}}
\def\U{\mathbb{U}}
\def\N{\mathbb{N}}
\def\Z{\mathbb{Z}}
\def\tw{\mathbf{2}}
\def\dash{\hbox{---}}
\def\dom{\mathop{\mathrm{dom}}}
\def\cod{\mathop{\mathrm{cod}}}
\def\celse{\mathrel{|}}
\def\cn{{:}}
\def\rok{\mathrel\mathsf{ok}}
\def\llam#1{\langle {#1} \rangle}
\def\hf{{\odot}}
\def\lerp#1#2#3{#1[\![#2,#3]\!]}
\def\nope{\emptyset}
\def\ep{\varepsilon}
\def\rng{\mathop\mathrm{rng}}
\def\npart{\not\!\partial}
\def\null{\emptyset}
\def\s{{*}}
\def\ii{\mathbb{I}}

\title{Notes on various Oriented Polytopes}
\begin{document}
\tikzset{>=stealth}
\tikzset{
   commutative diagrams/.cd,
   arrow style=tikz,
   diagrams={>=stealth}}

\section{Polytopes}

An oriented polytope is chain complex of free abelian groups $X_0, X_1, \ldots$ together with
a boundary operator $\partial : X_{i+1} \to X_i$. It also comes equipped with a specification
of the domain and codomain at every dimension, $C_i, D_i \in X_i$. We must have that all the coefficients
of $C_i$ and $D_i$ are all in $\{0,1\}$ and $\partial C_{i+1} = \partial D_{i+1} = C_i - D_i$.

\subsection{The suspension of a polytope}
Suppose I have a polytope $X_i, C_i, D_i$. I'm going to build $X'_i, C'_i, D'_i$ out of it.
I set
\[X'_0 = X_0 \cup \{\bu\}\]
\[X'_{i+1} = X_{i+1} \cup \{\bu x \st x \in X_i\}\]
and I extend $\partial$ by saying
\[ \partial(\bu x) = x -  \bu(\partial x)  \]
when $x \in X_i$, where conventionally $\bu(\partial x) = \bu$ when $x \in X_0$.

What a nice relationship! It's like creation/annihilation operators anticommutator, more or less saying
\[ \{\partial, \bu\} = 1\]

\subsection{Ordered Product}

Suppose I have polytopes $P, Q$. I want to form $P \land Q$. I set
\[ X_k^{P\land Q} = \sum_{i+j = k} X_i^P \x X_j^Q\]
and say
\[\partial (x \land y) = (\partial x \land y) + (-1)^{\dim x }(x \land \partial y) \]
Right, this is just the standard tensor product of chain complexes.

what happens if I say $\ups P$ is the chain complex such that
$(\ups P)_0 = \star$ and $(\ups P)_{n+1} = P_n$ and $x \in (\ups P)_1 \imp \partial x = \star$.
This is kind of weird since I think it doesn't exactly obey $\partial \partial = 0$ the way I think it ought to.
Say $(\dns P)_n = P_{n+1}$.
Nonetheless, say 1 is the one-vertex complex, and consider
\[ \Sigma P = \dns( \ups 1 \otimes \ups P) \]
where the one element of $1$ is $\bu$.
This should look like the one-point suspension of $P$. Let's compute:
\[ (\Sigma P)_0 = (\dns( \ups 1 \otimes \ups P))_0\]
\[ = ( \ups 1 \otimes \ups P)_1\]
\[ = ( \ups 1)_0 \x (\ups P)_1 + ( \ups 1)_1 \x (\ups P)_0\]
\[ = \bu \x \star  + \star \x P  \]

\[ (\Sigma P)_1 = (\dns( \ups 1 \otimes \ups P))_1\]
\[ = ( \ups 1 \otimes \ups P)_2\]
\[ = ( \ups 1)_2 \otimes (\ups P)_0 + ( \ups 1)_1 \otimes (\ups P)_1 + ( \ups 1)_0 \otimes (\ups P)_2\]
\[ =  \bu \x P_0 + \star \x P_1\]
Now notice that $\bu \in \ups 1$ has dimension $1$ while $\star$ has dimension $0$.
So $\partial (\star, x) = x$ as we'd expect (partly because $\partial \star = 0$) and
subsequently $\partial (\bu x) = x - \bu \partial x$.


\subsection{Domain and Codomain in the Monoidal Product}
Suppose we have $X_i$ and $Y_i$, equipped with $D^X_i, C^X_i$ and $D^Y_i, C^Y_i$
such that $\partial(C^X_{i+1}) = C^X_i - D^X_i$ and $C^X_m = D^X_m = x$ and $C^Y_n = D^Y_n = y$.

So we take $(x,y)$ as the maximal element of $X \otimes Y$. Let's assume for the moment that $m$ is even.
The boundary of $(x,y)$ is

\[\partial (x , y) = (\partial x , y) + (x , \partial y) \]
\[ = (C^X_{m-1} - D^X_{m-1} , y) + (x , C^Y_{n-1} - D^Y_{n-1}) \]
\[ = (C^X_{m-1}, y) - (D^X_{m-1} , y) + (x , C^Y_{n-1}) - (x, D^Y_{n-1}) \]
so we set
\[ C_{n-1} = (x , C^Y_{n-1}) + (C^X_{m-1}, y) \]
\[ D_{n-1} = (x , D^Y_{n-1}) + (D^X_{m-1}, y) \]
Now we iterate. What is the boundary of $C_{n-1}$? It's
\[ \partial (x , C^Y_{n-1}) + \partial (C^X_{m-1}, y) \]
\[=  (\partial x , C^Y_{n-1}) + ( x , \partial C^Y_{n-1}) +  (\partial C^X_{m-1}, y) - ( C^X_{m-1}, \partial y) \]
\[  =(C^X_{m-1} - D^X_{m-1} , C^Y_{n-1}) + ( x , C^Y_{n-2} - D^Y_{n-2}) +  (C^X_{m-2} - D^X_{m-2}, y) - ( C^X_{m-1}, C^Y_{n-1} - D^Y_{n-1}) \]
\[ = (C^X_{m-1}, C^Y_{n-1}) - (D^X_{m-1} , C^Y_{n-1}) + ( x , C^Y_{n-2}) - ( x , D^Y_{n-2}) +\]
\[  (C^X_{m-2},y) - (D^X_{m-2}, y) + ( C^X_{m-1}, D^Y_{n-1}) - (C^X_{m-1}, C^Y_{n-1}) \]
can abbreviate this as
\[[C1,C1] - [D1,C1] + [0,C2] - [0,D2] + [C2,0] - [D2,0] + [C1,D1] - [C1,C1]\]
and we wind up with
\[C_{n-1} = [0,C1] + [C1,0]  \]
\[D_{n-1} = [0,D1] + [D1,0]  \]
\[C_{n-2} = [0,C2] + [C1,D1] + [C2,0]  \]
\[D_{n-2} = [0,D2] + [D1,C1] +[D2,0]  \]
In general I think I have
\[ \partial[i,j] = [\partial i, j] + (-1)^i[i,\partial j]\]
\[ = [C(i+1) - D(i+1), j] + (-1)^i[i, C(j+1) - D(j+1)]\]
\[ = [C(i+1),j] - [D(i+1),j] + (-1)^i([i, C(j+1)] - [i,D(j+1)])\]
Ok, so let's try to proceed. $\partial_{n-3}[0,0]  \cdots$
\[ = \partial([0,C2] + [C1,D1] + [C2,0])\]
\[ = \partial[0,C2] + \partial [C1,D1] +\partial [C2,0]\]
\[ =( [C1,C2] - [D1,C2] + [0, C3] - [0,D3]\]
\[ + [C2,D1] - [D2,D1] - [C1, C2] + [C1,D2]\]
\[ + [C3,0] - [D3,0] + [C2, C1] - [C2,D1])\]
\[ =( + [0, C3]  + [C1,D2] + [C2, C1] + [C3,0]  \]
\[  - [0,D3]- [D1,C2] - [D2,D1]  - [D3,0] )\]
So:
\[C_{n-3} = [C0,C3] + [C1,D2] + [C2,C1] + [C3,D0]  \]
\[D_{n-3} = [C0,D3] + [D1,C2] + [D2,D1] + [D3,C0]  \]
So it feels like the first coordinate tracks the $\dom$/$\cod$-ness of what we're computing, and the second
coordinate alternates.

So counting from the bottom I think this looks like:
\[ C_0 = C_0^X \land C_0^Y \]
\[ D_0 = D_0^X \land D_0^Y \]
\[ C_1 = C_0^X \land C_1^Y + C_1^X \land D_0^Y \]
\[ D_1 = D_0^X \land D_1^Y + D_1^X \land C_0^Y \]
\[ C_2 = C_0^X \land C_2^Y + C_1^X \land D_1^Y + C_2^X \land C_0^Y\]
\[ D_2 = D_0^X \land D_2^Y + D_1^X \land C_1^Y + D_2^X \land D_0^Y \]
So suppose we have $X_n^s$, which means domain if $s = -1$ and codomain if $s = 1$.
Also $Y_n^s$. And we want to compute $(X \otimes Y)_n^s$. I claim it's
\[ (X \otimes Y)_n^s = \sum_{i + j = n} X_i^s \land Y_j^{(-1)^is}\]
Ok, let's try to take the boundary of this. It's
\[ \partial (X \otimes Y)_n^s = \sum_{i + j = n} \partial (X_i^s \land Y_j^{(-1)^is})\]
\[  = \sum_{i + j = n}  (\partial X_i^s \land Y_j^{(-1)^is}) + (-1)^i( X_i^s \land \partial Y_j^{(-1)^is})\]
\[  = \sum_{i + j = n}  ( X_{i-1}^{1} - X_{i-1}^{-1}) \land Y_j^{(-1)^is} + (-1)^i( X_i^s \land \partial Y_j^{(-1)^is})\]
\[  = \sum_{i + j = n}  ( X_{i-1}^{1} - X_{i-1}^{-1}) \land Y_j^{(-1)^is} + (-1)^i( X_i^s \land ( Y_j^{1} - Y_j^{-1}))\]

\[  = \sum_{i + j = n}   X_{i-1}^{1} \land Y_j^{(-1)^is} - X_{i-1}^{-1} \land Y_j^{(-1)^is} +
 (-1)^i( X_i^s \land  Y_{j-1}^{1} - X_i^s \land Y_{j-1}^{-1})\]
Let's try to break symmetry by just choosing $s = 1$. We have
\[  = \sum_{i + j = n}   C_{i-1} Y_j^{(-1)^i} - D_{i-1}  Y_j^{(-1)^i} +
 (-1)^i( C_i  C_{j-1} - C_i  D_{j-1})\]

\[  = \sum_{i + j = n}   C_{i-1} Y_j^{(-1)^i} - D_{i-1}  Y_j^{(-1)^i} +
\sum_{i + j = n} (-1)^i( C_i  C_{j-1} - C_i  D_{j-1})\]


\[  = \sum_{2k + j = n}   C_{2k-1} C_j - D_{i-1}  C_j +
\sum_{2k + j = n}   C_{2k-1}  C_{j} - C_{2k-1}  D_{j}\]
\[  + \sum_{2k + 1 + j = n}   C_{2k} D_j - D_{2k}  D_j +
\sum_{2k + 1 + j = n} - C_{2k+1}  C_{j-1} + C_{2k+1}  D_{j-1}\]

\[  = \sum_{2k + j = n}   C_{2k-1} C_j - D_{i-1}  C_j   + \sum_{2k + 1 + j = n}   C_{2k} D_j - D_{2k}  D_j \]

\[  = \left(\sum_{i + j = n-1} X_i^{1} \land Y_j^{(-1)^i}\right) - \left(\sum_{i + j = n-1} X_i^{-1} \land Y_j^{(-1)^{i+1}}\right)\]
As required, more or less, though I may have made some indexing mistakes. But the main thing is to split up the summation
into even and odd $i$, I think.
\subsection{The $n$-Simplex}

The description of the oriented simplex I can look up in Street's ``The Algebra of Oriented Simplexes''.
(\texttt{http://web.science.mq.edu.au/$\sim$street/aos.pdf})


\subsubsection{Cells}

An $m$-cell of the $n$-simplex is a subset of $[n]$ of size $m+1$.
We may abbreivate a subset $\{ a_0 < a_1 < \cdots a_m \}$ as simply $a_0a_1\cdots a_m$.

There is exactly one $n$-cell in the $n$-simplex, namely $[n]$.

\subsubsection{Boundary Operator}
The signed boundary operation is defined by
\[ \partial \{ a_0 < a_1 < \cdots < a_m \} =  \hat a_0  - \hat a_1 + \hat a_2 - \cdots + (-1)^{m} \hat a_m\]
where $\hat a_i$ means $a_0 a_1 \cdots a_{i-1} a_{i+1} \cdots a_m$.

\subsubsection{Characterizing the Global Boundary}


We define

\[ \Delta^m_{a,b} = \sum \{\{x_1, x_1 +1 \ldots, x_m,x_m+1\} \subseteq [a,b]\st   \forall i . x_i + 2  \le x_{i+1}  \}\]

and then
\def\shl{\mathbf{0}}
\def\shr{\mathbf{n}}

\[
D_{2m} = 0  \Delta^m_{1,n}
\qquad
 C_{2m} =    \Delta^m_{0,n-1} n
\]
\[
D_{2m+1} =  0  \Delta^m_{1,n-1} n
\qquad
 C_{2m+1} =    \Delta^{m+1}_{0,n}
\]

For example,
\[
\begin{tabular}{ll}
$D_0 = 0$&$ C_0 = n$ \\
$D_1 = 0n$&$ C_1 =01+ 12+ \cdots+ (n-1)n  $ \\
$D_2 = 012+ 023+ \cdots+ 0(n-1)n $&$ C_2 = 01n+\cdots+(n-2)(n-1)n $ \\
\end{tabular}
\]
\[D_3 = 012n + 023n + \cdots 0(n-2)(n-1)n \]
\[C_3 = (0123 + 0134 + \cdots+ 01(n-1)n) + (1234+ 1245 + \cdots+ 12(n-1)n)  \]
\[ + \cdots + ((n-4)(n-3)(n-2)(n-1) + (n-4)(n-3)(n-1)n)\]
\[ + (n-3)(n-2)(n-1)n \]

Note that $ C_n = D_n = [n]$.

\begin{lemma}
For all $i \ge 0$,
$\partial C_{i+1} = \partial D_{i+1} = C_i - D_i$
\end{lemma}

\begin{proof}

\cqed
\end{proof}


\subsection{The $n$-Cube}

\subsubsection{Cells}

If $x$ is a string in $\{0,1,\s\}^n$, write $|x|$ for how many occurrences of $\s$ are in $x$.
An $m$-cell of the $n$-cube is an element of $\{x \in \{0,1,\s\}^n \st |x| = m\}$.
We write repetition of characters as an exponent, e.g. $0^3 = 000$.

There is exactly one $n$-cell in the $n$-cube, namely $\s^n$.

\subsubsection{Boundary Operator}

For $b \in \{0,1\}$, let $[b/i]x$ be the result of replacing the $i^{th}$ instance
of $\s$ in $x$ with $b$.

The signed boundary operation is defined by
\[ \partial x =  \sum_{i = 1}^{|x|} (-1)^{i} ([0/i]x - [1/i]x)\]

For example, $\partial \s = - 0 + 1$ and $\partial \s\s =  - (0\s + \s1) + (\s 0 + 1\s)$.

\subsubsection{Characterizing the Global Boundary}

We define

\[
\begin{tabular}{ll}
$D_0 = 0^n$&$ C_0 = 1^n$ \\
$D_1 = \{ 0^i \s 1^j \st i + j = n - 1\} $&$ C_1 = \{ 1^i \s 0^j \st i + j = n - 1\}$ \\
$D_2 = \{ 0^i \s 1^j \s 0^k \st i + j + k = n - 2\} $&$ C_2 = \{ 1^i \s 0^j \s 1^k \st i + j + k = n - 2\}$\\
$D_m = \{ 0^{i_1} \s 1^{i_2} \s 0^{i_3}\cdots \st \sum_j i_j = n - m\} $&$ C_m = \{ 1^{i_1} \s 0^{i_2} \s 1^{i_3}\cdots \st \sum_j i_j = n - m\}$
\end{tabular}
\]

Note that $ C_n = D_n = \s^n$.

\begin{lemma}
For all $i \ge 0$,
$\partial C_{i+1} = \partial D_{i+1} = C_i - D_i$
\end{lemma}

\begin{proof}

\cqed
\end{proof}


\subsection{The $n$-Associahedron}

\subsubsection{Cells}

Consider finite trees with only binary or greater nodes.
\[ \hbox{Tree }\tau \quad::=\quad \bullet \celse (\tau\tau\ell)\]
\[ \hbox{Tree List }\tau \quad::=\cdot \celse  \tau\ell\]
For example, $(\bu\bu(\bu\bu)(\bu\bu\bu\bu\bu)\bu)$. For better readability, we may
give arbitrary letter names to leaves, and omit the outermost pair of parentheses,
e.g. $ab(cd)(efgh)i$.

The dimension of an internal node is its branching factor minus 2.
The dimension of a tree is the sum of the dimension of each of its internal nodes.
Inductively, we define
\[\dim \bullet = 0\]
\[\dim (\tau_1\cdots \tau_n) = (n-2) + \dim \tau_1 + \cdots \dim \tau_n \]
For example, the dimension of $ab(cd)(efgh)i$ is $3 + 0 + 2 = 5$.
Note that the dimension of every binary tree is $0$.

The size $|\tau|$ of a tree $\tau$ is the number of leaves of $\tau$ minus 2.

An $m$-cell of the $n$-associahedron is a tree of dimension $m$ and size $n$.

There is exactly one $n$-cell in the $n$-associahedron, namely the tree with just
a root and $n+2$ leaves and no other nodes, $(\bu^{n+2})$.

\subsubsection{Boundary Operator}

\textcolor{red}{Define boundaries in associahedron}

\subsubsection{Characterizing the Global Boundary}

\textcolor{red}{Define $C_n$ and $D_n$ somehow}

Note that $ C_n = D_n = (\bu^{n+2})$.

\begin{lemma}
For all $i \ge 0$,
$\partial C_{i+1} = \partial D_{i+1} = C_i - D_i$
\end{lemma}

\begin{proof}

\cqed
\end{proof}


\subsection{The $n$-Permutohedron}

\subsubsection{Cells}

A commutable permutation is a permutation of the numbers $[n]$ with some nonnested, nonoverlapping substrings
enclosed in parentheses, such that all the numbers within one parenthesized group occur in sorted order.
For example, $12(034)(78)65$.

The dimension of such a string is the sum, for each parenthesized
group, the length of that group minus one. For example the dimension of
$12(034)(78)65$ is $(3 -1)+ (2-1) = 3$.

An $m$-cell of the $n$-permutohedron is a commutable permutation of $[n]$ with dimension $m$.

There is exactly one $n$-cell in the $n$-permutohedron, namely $(012\cdots n)$.

\subsubsection{Boundary Operator}

We first try to describe what the boundary of $(012\cdots n)$ is and then describe how to extend that to general cells.

If $S\subseteq [n]$, then let $P_S$ be the permutation with two parenthesized groups, the first which has
every element of $S$, and the second which has the complement of $S$.

We  define
\[ \partial 0 = 0 \]
\[ \partial(012\cdots n) = \sum_{S \subsetneq [1,n]} (-1)^{{|S| \choose 2}} \left(\prod_{s\in S} (-1)^s\right) (P_{[1,n] \setminus S} - P_{S\cup \{0\}} )\]
and assert that boundary commutes with monotone renaming, and boundary behaves something like a  derivative with respect to concatenation,
i.e.
\[ \partial (\sigma_1 \sigma_2) = (\partial \sigma_1)\sigma_2 - \sigma_1(\partial \sigma_2) \]
assuming $\sigma_1$ has the least element among $\sigma_1,\sigma_2$? Not sure this part is right.
This should uniquely determine the boundary for all permutations.

\subsubsection{Characterizing the Global Boundary}

\textcolor{red}{Define $C_n$ and $D_n$ somehow}

Note that $ C_n = D_n = (012\cdots n)$.

\begin{lemma}
For all $i \ge 0$,
$\partial C_{i+1} = \partial D_{i+1} = C_i - D_i$
\end{lemma}

\begin{proof}

\cqed
\end{proof}


\end{document}
