\documentclass{article}
\input{theorem}
\input{prooftree}
\usepackage{stmaryrd}
\input{linear}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}
\def\lpar{\bindnasrepma}
\def\lamp{\binampersand}
\def\bpush{\mathbf{push}}
\newarrow {Equiv} =====
\def\ups#1{#1^G}
\def\dns#1{#1^B}
\def\rsn{\ \mathsf{sn}}
\def\rx{\mapsto}
\def\wat{{@}}
\def\sem#1{[\![#1]\!]}
\def\cn{{:}}
\def\rtype{\mathrm{type}}
\def\rdom{\mathrm{dom}}
\def\rset{\mathbf{Set}}
\def\rcat{\mathbf{Cat}}
\def\rflat{\mathbf{Flat}}
\def\rid{\mathrm{id}}
\def\C{\mathbf{C}}
\def\E{\mathbb{E}}
\def\B{\mathbb{B}}
\def\F{\mathbf{F}}
\def\H{\mathbf{H}}
\def\pair#1#2{\langle#1,#2\rangle}
\def\tri{\triangleright}
\def\o{\circ}
\def\rctx{\,\mathrm{ctx}}
\def\rbctx{\,\mathrm{bctx}}
\def\rbundle{\,\mathrm{bundle}}

\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\def\also#1{\ \textcolor{blue}{\celse #1}}
\title{Notes on Bitopologies}
\usepackage{diagrams}
\author{Jason Reed}

\begin{document}

$$
\erule
{x : A^\alpha \in \Gamma \qquad \xi(x) \ge 1 \qquad \xi \ge \alpha \using{\rid}}
{\Gamma \prov x^\xi : A^\alpha}
\qquad
\erule
{\prov \Gamma \rctx\qquad \Gamma \prov A^\alpha : \rtype \using {\rctx,}}
{\prov \Gamma, x : A^\alpha \rctx }
$$

$$
\erule
{\alpha' \ge  \alpha \mu \qquad \Gamma \prov A^{\alpha} : \rtype\using F}
{\Gamma \prov (F^{\alpha}_\mu A)^{\alpha'} : \rtype}
\qquad
\erule
{\Gamma \prov A^{\alpha \mu} : \rtype\using U}
{\Gamma \prov (U_\mu A)^{\alpha} : \rtype}
$$

$$
\erule
{(\nu'\tri \alpha') \ge  (\nu \tri \alpha) \mu
\qquad  \Gamma \prov N^{ \nu} : A^{\alpha} \using FR}
{\Gamma \prov (F^{ \nu}_\mu N)^{\nu'} :  (F^{\alpha}_\mu A)^{\alpha'} }
$$

$$
\erule
{\Gamma \prov_{\gamma \mu} M : A \using UR}
{\Gamma \prov (U_\mu N)^\nu : (U_\mu A)^\alpha}
$$



$$
\erule
{\Gamma, y: A^{\phi}  \prov_{[ y\tri \mu / x]\gamma}   e : [F_\mu^{\phi,y \tri 1} y/x]C_r \using FL}
{\Gamma, x:(F^\phi_\mu A)^\xi \prov_\gamma  \blet F_\mu y = x \bin e : C_r}
$$

Suppose
$$\Gamma, x:(F^\phi_\mu A)^\xi \prov_\gamma  C_r : \rtype_r$$
$$\Gamma \prov_\xi (F^\phi_\mu A) : \rtype$$
From the latter we know
$$\xi \ge  \phi \mu \qquad \Gamma \prov_\phi A : \rtype$$
so the context is fine. Now we construct
$$\Gamma, y: A^{\phi} \prov_{\phi \mu, y \tri \mu} F_\mu^{\phi,y\tri 1} y : (F_\mu^\phi A)$$
and can weaken
$$\Gamma, y: A^{\phi} \prov_{\xi, y \tri \mu} F_\mu^{\phi,y\tri 1} y : (F_\mu^\phi A)$$
so substitution gives me that $[F_\mu^{\phi,y \tri 1} y/x]C_r$ is well-formed I think.


\vskip1em
\hrule
\vskip1em

Some stuff that was thought about during discussion with mriley and dlicata:

$$
\erule
{\prov \Xi \rbctx \qquad \Xi \prov \alpha \rbundle}
{\prov \Xi, x : \alpha \rbctx  }
$$

$$
\erule{}{\Xi \prov \cdot \rbundle}\qquad
\erule
{\Xi \prov \beta  \rbundle \qquad  \alpha \phi \ge \beta}
{ \Xi , x : \alpha \prov (\beta ,  x := \phi) \rbundle }
$$

$$
\erule
{\Xi \prov \beta  \rbundle }
{ \Xi , x : \alpha \prov \beta  \rbundle }
$$
$$(x_1:A_1^{\alpha_1}, \ldots, x_n:A_n^{\alpha_n})^\ominus = $$
$$(x_1:\alpha_1, \ldots, x_n:\alpha_n) $$
$$
\erule
{\prov \Gamma \rctx\qquad \Gamma \prov A^\alpha : \rtype \qquad \Gamma^\ominus \prov \alpha \rbundle \using {\rctx,}}
{\prov \Gamma, x : A^\alpha \rctx }
$$
\end{document}
