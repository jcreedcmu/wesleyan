\documentclass{article}
\usepackage[framestyle=fbox,framefit=yes,heightadjust=all,framearound=all]{floatrow}
\input{theorem}
\input{prooftree}
\usepackage{stmaryrd}
\usepackage{latexsym}
\usepackage{yfonts}
\usepackage{amsmath}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage{tikz}
\usetikzlibrary{calc,arrows,cd,decorations.pathreplacing}
\usetikzlibrary{decorations.pathmorphing}
\usepackage{tcolorbox}
\tcbuselibrary{breakable}
\input{linear}

\def\natto{\mathrel{\dot\to}}
\def\nto{\Rightarrow}
\def\susp#1{\langle {#1} \rangle}
\def\nulls{0}
\def\sto{\rightsquigarrow}
\def\rto{\twoheadrightarrow}
\def\lto{\rightarrowtail}
\def\P{\mathbf{P}}
\def\N{\mathbf{N}}
\def\one{\mathbf{1}}
\def\pto{\relbar\joinrel\mapstochar\joinrel\rightarrow}
\def\htensor{\otimes}
\def\lol{\multimap}
\def\hlol{\multimap}
\def\quote#1{{\ulcorner {#1} \urcorner}}
\def\U{\mathsf{U}}
\def\fA{\mathsf{A}}
\def\fC{\mathsf{C}}
\def\ff{\mathsf{f}}
\def\B{\mathsf{B}}
\def\uni{\U}
\def\mor#1#2{#1 \to \underline{#2}}
\def\atm#1{\underline{#1}}

\def\ridp{\mathsf{idp}}
\def\ssem#1{\langle\!\langle{#1}\rangle\!\rangle}

\definecolor{cyan}{rgb}{0.80,0.95,0.95}
\definecolor{orange}{rgb}{0.95,0.90,0.80}
\definecolor{lred}{rgb}{0.95,0.8,0.8}
\definecolor{bluegray}{rgb}{0.4,0.4,0.8}
\definecolor{lgray}{gray}{0.9}
\newtcolorbox{declbox}{colframe=lred,colback=lred,grow to right by=-10mm,grow to left by=-10mm,
boxrule=0pt,boxsep=0pt,breakable}
\newtcolorbox{thmbox}{colframe=cyan,colback=cyan,grow to right by=-10mm,grow to left by=-10mm,
boxrule=0pt,boxsep=0pt,breakable}
\newtcolorbox{defnbox}{colframe=orange,colback=orange,grow to right by=-10mm,grow to left by=-10mm,
boxrule=0pt,boxsep=0pt}
\newtcolorbox{tangentbox}{colframe=lgray,colback=lgray,grow to right by=-10mm,grow to left by=-10mm,
boxrule=0pt,boxsep=0pt,breakable}


\def\rpath#1{[#1]}
\def\rfst{\mathsf{fst}\,}
\def\rsnd{\mathsf{snd}\,}
\def\bunfold{\mathbf{unfold}}
\def\bfold{\mathbf{fold}}
\def\pbind#1{\langle {#1} \rangle}
\def\ppbind#1{\langle\!\langle {#1} \rangle\!\rangle}
\def\dto{\mathrel{\dot\to}}
\def\dns{{\downarrow}}
\def\ups{{\uparrow}}
\def\sprov{\Vdash}
\def\signat{{\color{red}\Sigma}}

\def\wat{\mathbin{@}}
\def\wwat{\mathbin{\underline\wat}}
\def\cn{{:}}
\def\dv{{\div}}
\def\ww{{\mathsf w}}
\def\base{{\textfrak b}}

\def\munit{I}
\def\tt{{\mathsf t}}
\def\sem#1{[\![#1]\!]}
\def\usem#1{\lceil\!\!\lceil{#1}\rceil\!\!\rceil}
\def\zem#1{\langle\!\langle#1\rangle\!\rangle}
\def\col#1{{\mathsf{C}}_{#1}}
\def\lax{\mathop\bigcirc}
\def\rjust{\mathsf{just}}
\def\rcvt{\mathsf{cvt}}
\def\rtype{\mathsf{type}}
\def\rkind{\mathsf{kind}}
\def\rmode{\mathsf{mode}}
\def\rprel{\mathbf{Prel}}
\def\rrfam{\mathbf{Rfam}}
\def\rset{\mathbf{Set}}
\def\rprof{\mathbf{Prof}}
\def\rfinset{\mathbf{FinSet}}
\def\rrel{\mathbf{Rel}}
\def\rcat{\mathbf{Cat}}
\def\rfam{\mathbf{Fam}}
\def\binj{\mathbf{inj}}
\def\rid{\mathsf{id}}
\def\rtrue{\mathrel\mathrm{true}}
\def\pbck{\ar[dr, phantom, pos=0, "\lrcorner"]}
\def\bpbck{\ar[ddrr, phantom, pos=0, "\lrcorner"]}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}
\def\lpar{\bindnasrepma}
\def\lamp{\binampersand}
\def\btwo{\mathbf{2}}
\def\bone{\mathbf{1}}

\newarrow {Equiv} =====
\def\FinSet{\mathbf{FinSet}}
\def\x{\times}
\def\maps{\ar[dd,mapsto,shorten <=2em, shorten >=2em]}
\def\mapt{\ar[ddd,mapsto,shorten <=2em, shorten >=2em]}
\def\frommaps{\ar[from=uu,mapsto,shorten <=2em, shorten >=2em, crossing over]}
\def\frommapt{\ar[from=uuu,mapsto,shorten <=2em, shorten >=2em, crossing over]}
\def\A{\mathbf{A}}
\def\B{\mathbf{B}}
\def\C{\mathbf{C}}
\def\S{\mathbf{S}}
\def\D{\mathbf{D}}
\def\E{\mathbf{E}}
\def\M{\mathbf{M}}
\def\pair#1#2{\langle#1,#2\rangle}
\def\tri{\triangleright}
\def\ltri{\triangleleft}
\def\o{\circ}
\def\rctx{\,\mathsf{ctx}}
\def\del{\partial}
\def\also#1{\ \textcolor{blue}{\celse #1}}
\newcounter{nodemaker}
\setcounter{nodemaker}{0}
\def\twocell#1#2{%
  \global\edef\mynodeone{twocell\arabic{nodemaker}}%
  \stepcounter{nodemaker}%
  \global\edef\mynodetwo{twocell\arabic{nodemaker}}%
  \stepcounter{nodemaker}%
  \ar[#1,phantom,shift left=3,""{name=\mynodeone}]%
  \ar[#1,phantom,shift right=3,""'{name=\mynodetwo}]%
  \ar[Rightarrow,#2,from=\mynodeone,to=\mynodetwo]%
}
\def\twocellswap#1#2{%
  \global\edef\mynodeone{twocell\arabic{nodemaker}}%
  \stepcounter{nodemaker}%
  \global\edef\mynodetwo{twocell\arabic{nodemaker}}%
  \stepcounter{nodemaker}%
  \ar[#1,phantom,shift right=3,""{name=\mynodeone}]%
  \ar[#1,phantom,shift left=3,""'{name=\mynodetwo}]%
  \ar[Rightarrow,#2,from=\mynodeone,to=\mynodetwo]%
}

\def\maps{\ar[dd,mapsto,shorten <=2em, shorten >=2em]}
\definecolor{fib}{HTML}{ff7f00}
\definecolor{green}{HTML}{007f00}
\definecolor{red}{HTML}{df3f3f}
\definecolor{opfib}{HTML}{007fff}

% For lightening colors I used
% http://trycolors.com/ 6 parts white to 1 part color
\definecolor{opfibl}{HTML}{DBEDFF}
\definecolor{greenl}{HTML}{DBEDDB}
\definecolor{redl}{HTML}{FAE4E4}
\def\njudge#1{\fcolorbox{opfib}{white}{#1}}
\def\nrule#1{\fcolorbox{white}{opfibl}{#1}}
\def\neqn#1{\fcolorbox{white}{redl}{#1}}

\def\judge#1{\vskip 2em\noindent \njudge{$#1$}\vskip 0.5em\noindent}
\def\rule#1{\vskip 2em \noindent \nrule{$#1$}\vskip 0.5em\noindent}
\def\eqn#1{\vskip 2em \noindent \neqn{$#1$}\vskip 0.5em\noindent}

\def\tensor{\otimes}
\def\lol{\multimap}

\def\wtf{{\color{red}???}}

\def\zero{\texttt{0}}

\title{Bicategorical Phase Semantics of ILL}
% \author{Jason Reed}
\bibliographystyle{alpha}
\begin{document}
\maketitle

\def\
\tikzset{
   commutative diagrams/.cd,
   arrow style=tikz,
   diagrams={>=stealth}}
% got this from
% https://tex.stackexchange.com/questions/169512/tikz-style-arrow-tips-missing-when-using-tikz-cd-crossing-over
% ???

\section{Introduction}
We discuss a generalization of the categorical semantics presented in the previous note
\cite{jcreed.csfill}. We use the same definition of the syntax of linear logic used there.

\section{Semantics}
\subsection{Judgmental Models}
We first define a class of model which doesn't encode much about the specific logic
we have in mind, but which supports some operations that will be generally useful.
A {\em judgmental model} $\M$ consists of the following data:
\begin{enumerate}
\item A bicategory $\M$, with a monoidal product $(\bullet, \one)$,
where the hom-categories have finite coproducts.
\item  operations $\lto$ and $\rto$ that are right adjoints to $\bullet$ in the sense that
\[\hom(f_1 \bullet f_2, g) \cong \hom(f_1, f_2 \rto g) \cong \hom(f_2, f_1 \lto g)\]
whenever $f_1 : \A_1 \to \B_1$
$f_2 : \A_1 \to \B_2$ and $g : \A_1 \bullet \A_2 \to \B_1 \bullet \B_2$
are morphisms in $\M$.
That is, we have the adjunctions $\dash \bullet f_2 \dashv f_2 \rto \dash$ and
$f_1\bullet\dash \dashv f_1 \lto \dash$.
\item an operation $\sto$ that is a right adjoint to morphism composition $\o$
in the sense that
\[\hom(\ell \o k, m) \cong \hom(k, \ell \sto m)\]
when $k : \A \to \B$, $\ell : \B\to \C$, and $m : \A \to \C$.
That is, $\ell\o \dash \dashv \ell \sto \dash$.
\end{enumerate}

\subsection{A Note about the Generality of this Definition}
It is
worth noting already that an example of a judgmental model $\rprof^\op$, the
bicategory whose objects are categories and whose hom-category $\C \to \D$
 is the profunctor category $\D \pto \C$, i.e. the functor category
$\C^\op \x \D \to \rset$. This will be the basis for our syntactic model for
focused linear logic below. We can take the monoidal product $\bullet$
to be cartesian product of categories. The hom-categories easily have
finite coproducts because presheaf categories have all colimits.

The required adjoints can be defined as ends:
\label{adjoints}
\[
\erule
{g : \A_2 \to \B_2\qquad h: \A_1 \x \A_2 \to \B_1\x \B_2}
{(f_2 \rto g)(a_1, b_1) = \int_{a_2 \in \A_2, b_2 \in \B_2} f_2(a_2, b_2)\to h(a_1, a_2, b_1, b_2) }
\]
\[
\erule
{f : \A_1 \to \B_1 \qquad h: \A_1 \x \A_2 \to \B_1\x \B_2}
{(f_1 \lto g)(a_2, b_2) = \int_{a_1\in\A_1, b_1 \in \B_1} f_1(a_1, b_1)\to h(a_1, a_2, b_1, b_2) }
\]
\[
\erule
{ \ell: \B \to \C \qquad m: \A \to \C}
{(\ell \sto m)(a, b) = \int_{c \in \C} \ell(b, c)\to m(a, c) }
\]
For we can easily check
\[\hom(f_1 \bullet f_2, g)  \cong \]
\[ \int_{(a_1,b_1,a_2,b_2) \in \A_1 \x \B_1 \x \A_2 \x \B_2} f_1(a_1, b_1) \x f_2(a_2, b_2) \to g(a_1, a_2, b_1,  b_2) \]
\[ \cong \int_{(a_2, b_2) \in \A_2 \x \B_2} f_2(a_2, b_2) \to   \int_{(a_1, b_1) \in \A_1 \x \B_1} f_1(a_1, b_1)   \to g(a_1, a_2, b_1,  b_2) \]
\[\cong \hom(f_2, f_1 \lto g)\]
and a symmetric calculation for
\[\hom(f_1 \bullet f_2, g)  \cong \hom(f_1, f_2 \rto g)\]
and
\[\hom(\ell \o k, m) \cong \int_{a\in\A, c\in \C} (\ell\o k)(a, c) \to m(a,c)\]
\[ \cong \int_{a\in\A,c\in \C} \left(\int^{b \in \B} k(a,b) \x  \ell(b, c)\right) \to m(a,c) \]
\[ \cong \int_{a\in \A,b \in \B} k(a,b) \to \int_{ c\in \C} \ell(b, c)\to m(a,c) \cong \hom(k, \ell \sto m)\]

\begin{remark}[Broad Semi-Open Question]
What other interesting judgmental models might there be
that don't look anything like $\rprof^\op$?

How about if we only require $\lto$ and $\rto$ to work when $\A_1 = \A_2 = \one$
and only require $\sto$ to work when $\A = \one$? (For these are the only situations
we invoke them in when interpreting linear logic below)
\end{remark}

\subsection{Linear Models}
A {\em linear model} is a judgmental model additionally equipped with
\begin{enumerate}
\addtocounter{enumi}{3}
\item distinguished objects $\P, \N \in \M$
\item  morphisms $\tensor : \P \bullet \P \to \P$ and $1 : \one \to \P$
 and $\lol :   \P \bullet \N \to \N$ and
a morphism $\tri :\one\to \P \bullet \N $
\item 2-cells making $(\tensor, 1)$ a monoid object
\item An invertible 2-cell
\[
k : ((\tensor \bullet \rid_\N)  \sto \tri) \Leftrightarrow  ((\rid_\P \bullet {\lol}) \sto \tri) : \one \to \P \bullet \P \bullet \N
\]
\item a mapping
$\eta$ of atoms $a^+$ (resp. $a^-$) to morphisms $\one \to \P$ (resp.
$ \one \to \N  $)
\end{enumerate}

\subsection{Interpretation}
We interpret positive propositions $P$ as morphisms $\sem P : \one \to \P$ in $\M$,
and negative propositions $N$ as morphisms $\sem N : \one \to \N$.
We say
\begin{enumerate}
\item $\Gamma;\Omega \models_M R$ iff there is a two-cell $(\sem \Gamma \htensor \sem \Omega) \bullet \sem R^> \nto \tri : \one \to \P \bullet \N$
\item $\Gamma \models_M [P]$ iff there is a two-cell $\sem \Gamma \nto \sem P : \one \to \P $
\item $\Gamma[N] \models_M Q$ iff there is a two-cell $(\sem \Gamma \hlol \sem Q^>) \nto \sem N : \one \to \N $
\end{enumerate}
When we drop the subscript $M$ and just write $\models$, it  means that the statement
holds for all $M$.


\begin{figure}
\begin{center}
\[
\erule{p : \one \to \P \qquad n : \one \to \N}
{p \hlol n := {\lol} \o (p \bullet n)}
\qquad
\erule{p_1, p_2 : \one \to \P }
{p_1 \htensor p_2 := {\tensor} \o (p_1 \bullet p_2)}
\]
\[\sem{a^\pm} = \eta(a^\pm) \qquad \qquad \sem{1} = 1\]
\[\sem{P_1 \oplus P_2} =  \sem{P_1} + \sem{P_2}\qquad
\sem{0} = \nulls\]
\[\sem{N_1 \amp N_2} =  \sem{N_1} + \sem{N_2}\qquad
\sem{\top} = \nulls\]
\[\sem{P \lol N} = \sem P \hlol \sem N\]
\[\sem{P_1 \tensor P_2} = \sem {P_1} \htensor \sem{P_2}\]
\[\sem{\ups P } = \sem P \lto \tri\]
\[\sem{\dns N } = \sem N \rto \tri\]
\[\erule{\Gamma = H_1, \ldots, H_n}{\sem{\Gamma} = \sem{ H_1}^< \htensor \cdots \htensor \sem{ H_n}^<}
\qquad
\erule{\Omega = P_1, \ldots, P_n}{\sem{\Omega} = \sem{P_1}^< \htensor \cdots \htensor \sem{P_n}^<}\]
\[\sem P^< = \sem{P} \qquad \sem N^< = \sem{\dns N} \qquad \sem{\susp{a^+}}^< = \eta(a^+)\]
\[\sem N^> = \sem{N} \qquad \sem P^> = \sem{\ups P} \qquad \sem{\susp{a^-}}^> = \eta(a^-)\]
\end{center}
\caption{Interpreting Propositions \label{semantics}}
\end{figure}

\section{Soundness}

\begin{lemma}
The operation $\htensor$ on morphisms $\one \to \P$ is associative.
\end{lemma}

\begin{proof}
Follows from associativity of $\bullet$ and $\tensor$.
\cqed
\end{proof}

\begin{theorem}[Soundness]\ %
  \begin{enumerate}
  \item If $\Gamma; \Omega \prov R$ then $\Gamma ; \Omega \models R$
  \item If $\Gamma \prov [P]$ then $\Gamma \models [P]$
  \item If $\Gamma[N] \prov Q$ then $\Gamma[N] \models Q$
  \end{enumerate}
\end{theorem}

\begin{proof}
  By induction on the derivation.
Some example cases:
\begin{itemize}
\item[Case:]
\[
\erule
{\Gamma; P \prov Q}
{\Gamma[\ups P] \prov Q}
\]
By induction we have the existence of a 2-cell
\[\xi : (\sem\Gamma \htensor \sem P) \bullet  \sem Q^> \nto \tri\]
and need to produce a 2-cell
\[\zeta : (\sem\Gamma \hlol \sem Q^>) \nto \sem{\ups P}\]
Expanding definitions, we have
\[\xi : (\tensor \o (\sem\Gamma \bullet \sem P)) \bullet  \sem Q^> \nto \tri\]
and we need
\[\zeta : {\lol} \o (\sem \Gamma \bullet \sem Q^>) \nto  \sem P \lto \tri\]
which is essentially the same thing as
\[\zeta : \sem P \bullet {\lol} \o (\sem \Gamma \bullet \sem Q^>) \nto  \tri\]
and by $k$ we are done. For we can adjoint-transpose $\xi$ to something of type
\[ \sem P \bullet \sem \Gamma \bullet \sem Q^> \nto ((\tensor \bullet \rid_\N)  \sto \tri)\]
and our goal $\zeta$'s type is similarly as good as
\[\sem P \bullet \sem \Gamma \bullet \sem Q^> \nto ((\rid_\P \bullet {\lol}) \sto \tri)\]
and by $k$ these have isomorphic codomains.


\item[Case:]
\[
\erule
{\Gamma \prov [P]}
{\Gamma \prov P}
\]
We assume a 2-cell $\zeta :\sem \Gamma \nto \sem P : \one \to \P$,
and need to produce a 2-cell
$\xi : \sem \Gamma \bullet \sem{\ups P}\nto \tri : \one \to \P \x \N$.
Expanding definitions,
\[\xi : \sem \Gamma \bullet (\sem{P} \lto \tri) \nto \tri : \one \to \P \x \N\]
but we can consider the counit of the adjunction defining $\lto$
\[\epsilon_{\sem P} : \sem P \bullet (\sem{P} \lto \tri) \nto \tri \]
and compose it with $\zeta$ to get
\[ \epsilon_{\sem P} \o (\zeta \bullet \rid_{\sem P \lto \tri}) : \sem \Gamma \bullet \sem{\ups P}\nto \tri\]
as required.
\item[Case:]
$$
\erule
{\Gamma_1 \prov [P_1]\qquad \Gamma_2 \prov [P_1]}
{\Gamma_1, \Gamma_2 \prov [P_1\tensor P_2]}
$$
We assume 2-cells $\zeta_1 : \sem {\Gamma_1} \nto \sem{P_1}$
and $\zeta_2 : \sem {\Gamma_2} \nto \sem{P_2}$, and we produce
$$\tensor * (\zeta_1 \bullet \zeta_2) : \sem {\Gamma_1} \htensor \sem {\Gamma_2} \nto \sem{P_1 \tensor P_2}$$
with the type of the horizontal composition expanding to
\[ \tensor \o (\sem {\Gamma_1} \bullet \sem {\Gamma_2}) \nto \tensor \o (\sem {P_1} \bullet \sem {P_2})\]
as required.

\item[Case:]
$$
\erule
{\Gamma; P_1, P_2 \prov Q}
{\Gamma; P_1\tensor P_2 \prov Q}
$$
We have a 2-cell
$$ \sem \Gamma \htensor \sem{P_1} \htensor \sem{P_2} \htensor \sem{\ups Q} \nto \tri$$
and need to produce
$$ \sem \Gamma \htensor \sem{P_1 \tensor P_2} \htensor \sem{\ups Q} \nto \tri$$
which is essentially the same thing, by associativity of $\htensor$.
\end{itemize}
\cqed
\end{proof}

\section{Completeness}
\subsection{Universal Model}
We build a  syntactic model. Fix a collection of atoms.

\begin{enumerate}
\item[1-3.] Let $\M$ be $\rprof^\op$ as above in Section~\ref{adjoints}.

% \item
%% The operation $\lto$ taking
%%  $f : \one \to \A$ and $h : \one \to \A \bullet \B$ to
%% $f \lto h : \one \to \B$ is the end (taken in $\rset$)
%% \[ (f \lto h)(b) = \int_{a : \A} f(a) \to h(a, b) \]
%% which is the set of natural transformations $f \natto h(\dash, b) : \A \to \rset$

%%  The operation $\rto$ taking
%%  $g : \one \to \B$ and $h : \one \to \A \bullet \B$ to
%% $f \lto h : \one \to \A$ is the end (taken in $\rset$)
%% \[ (g \rto h)(a) = \int_{b : \B} g(b) \to h(a, b) \]
%% which is the set of natural transformations $g \natto h(a, \dash) : \B \to \rset$

% \item
%% The operation $\sto$ taking
%%  $g : \B \to \C$ and $h : \one \to \C$ to
%% $g \sto h : \one \to \B$ is the end (taken in $\rset$)
%% \[ (g \sto h)(b) = \int_{c : \C} g(b, c) \to h(c) \]
%% which is the set of natural transformations $g(b, \dash) \natto h : \C \to \rset$

\addtocounter{enumi}{3}

\item Let $\P$ be the category whose objects are all contexts $\Gamma$, and
  whose morphisms are permutations.

  Let $\N$ be the category whose objects are `frames' $F = (\Gamma, Q)$ and whose
  morphisms are context permutations. Define $\Gamma, F$ and $\Gamma \prov F$
  in the evident way by setting $\Gamma, (\Gamma', Q) = ((\Gamma, \Gamma'), Q)$
  and $\Gamma \prov (\Gamma', Q) = \Gamma, \Gamma' \prov Q$.
  (Note that if we were to give a semantics for ordered logic
  these definitions would be somewhat less degenerate; a frame would have
  two contexts with a hole in the middle $(\Omega_1\square\Omega_2, Q)$
  and $\Omega \prov (\Omega_1\square\Omega_2, Q)$ would be defined as
   $\Omega_1, \Omega, \Omega_2 \prov Q$)

\item The morphism $\tensor : \P \bullet \P \to \P $ is to be a
  functor $(\P \x \P)^\op \x \P \to \rset$, and is defined as a {\em
    context concatenation relation}. When $\Gamma = \Gamma_1, \Gamma_2$
 (up to permutation) then $\tensor(\Gamma_1, \Gamma_2,  \Gamma)$
 is a singleton, else it is empty. $1$ is the empty context.

  The functor $1$ of type $\P \to \rset$ is a nullary version
  of this relation: If $\Gamma$ is empty,
  then $1(\Gamma)$ is a singleton, else it is empty.

  The functor $\lol : \P \bullet \N \to \N $ of type
  $(\P \x \N)^\op \x \N \to \rset$ is similarly defined such that
  when $F_2 = \Gamma, F_1$
  (up to permutation) then $\lol(\Gamma, F_1,  F_2)$
  is a singleton, else it is empty.

  The functor $\tri$ is to be a functor $\P \x \N \to \rset$. Given
  an object $\Gamma$ of $\P$ and an object $F$ of $\N$,
  we say $\tri(\Gamma, F)$ is
  the set of proofs of $\Gamma \prov F$.
\item It is easy to check that $(\tensor, 1)$ form a monoid object.

\item
The meaning of $(\tensor \bullet \rid_\N)  : \P \x \P \x \N \to \P \x \N$
is a functor $(\P \x \P \x \N)^\op \to \P \x \N \to \rset$ which given
$(\Gamma_1, \Gamma_2, F), (\Gamma, F')$
yields a singleton if $\Gamma = \Gamma_1, \Gamma_2$ and $F = F'$ up to permutation,
else the empty set.

So the meaning of $((\tensor \bullet \rid_\N)  \sto \tri)$
is a functor $\P \x \P \x \N \to \rset$ which given two contexts
$\Gamma_1, \Gamma_2$ and a frame $F$, yields the set
of all proofs of $\Gamma \prov F$
for any $\Gamma$ that happens to be equal to $\Gamma_1, \Gamma_2$.
In other words, it yields the set of proofs of $\Gamma_1, \Gamma_2 \prov F$.

Similar reasoning shows that the meaning of
$((\rid_\P \bullet {\lol}) \sto \tri)$ is also exactly
the set of proofs of $\Gamma_1, \Gamma_2 \prov F$, so the isomorphism $k$
can be easily realized.
\item
  We choose as interpretations of the atoms as follows
  \[\eta(a^+)(\Gamma) =
\begin{cases}
\{*\}&\hbox{if $\Gamma = (\susp{a^+})$;} \\
\nulls & \hbox{otherwise.}
\end{cases}\]
  \[\eta(a^-)(\Gamma, Q) = \begin{cases}\{*\}&\hbox{if $(\Gamma, Q) = (\cdot, \susp{a^-})$;} \\
 \nulls & \hbox{otherwise.}\end{cases}\]
\end{enumerate}

\subsection{Completeness Proof}
The next thing we want to do is show that this model is in fact universal ---
that the interpretation of every proposition reflects its (focused)
provability. We first claim that

\begin{lemma}\label{syntactic}
In the syntactic model, for all $P$ and $N$ we have
  \begin{itemize}
  \item If $\sem{P}(\Gamma)$, then $\Gamma \prov [P]$
  \item If $\sem{N}(\Gamma, Q)$, then $\Gamma[N] \prov Q$
  \end{itemize}
\end{lemma}

\begin{proof}
By induction on the proposition.
\begin{itemize}
\item[Case:] $P_1 \tensor P_2$. If $\rho \in \sem {P_1 \tensor P_2}(\Gamma)$,
then by definition $\rho \in ({\tensor} \o (\sem {P_1} \x \sem{P_2}))(\Gamma)$ is inhabited.
By the definition of profunctor composition, and of $\tensor$,
 this means that $\Gamma$ does
in fact split as $\Gamma_1, \Gamma_2$ with some $\rho_1 \in \sem{P_1}(\Gamma_1)$
and $\rho_2 \in \sem{P_2}(\Gamma_2)$, to which we can apply the induction hypothesis
to obtain $\Gamma_1 \prov [P_1]$ and $\Gamma_2 \prov [P_2]$, from which we can
derive $\Gamma_1, \Gamma_2 \prov [P_1 \tensor P_2]$, as required.
\item[Case:] $\dns N$. If $\rho \in \sem{\dns N}(\Gamma)$, then by definition
$\rho \in (\sem{N} \rto \tri)(\Gamma)$. That is, $\rho$ is a natural transformation
$\sem N \to \tri(\Gamma, \dash) : \N \to \rset$. In order to use the rule
\[
\erule
{\Gamma \prov N}
{\Gamma \prov [\dns N]}
\]
we need to come up with $\Gamma \prov N$, and by identity
(lemma 2.2 in \cite{jcreed.csfill}) it would
suffice to show that $\Gamma_0[N] \prov Q$ implies $\Gamma, \Gamma_0 \prov Q$
for every $\Gamma_0$ and $Q$. But a natural transformation
$\sem N \to \tri(\Gamma, \dash)$ lets us show exactly this:
suppose $\Gamma_0[N] \prov Q$, by soundness there is an inhabitant of
$\sem{N}(\Gamma_0, Q)$, apply the natural transformation to get
into $\tri(\Gamma, (\Gamma_0, Q))$, and by the definition of $\tri$, this is
a proof of $\Gamma, \Gamma_0 \prov Q$, as required.
\end{itemize}
\end{proof}

\begin{lemma}\label{inhabit}
In the syntactic model,
\begin{enumerate}
\item $\sem{\dns N}(N)$ is inhabited.
\item $\sem{\ups P}(\cdot, P)$ is inhabited.
\item  $\sem{\Gamma}(\Gamma)$ is inhabited.
\item  $(\sem \Gamma \hlol \sem Q^>)(\Gamma, Q)$ is inhabited.
\end{enumerate}
\end{lemma}

\begin{proof}\ %
\begin{enumerate}
\item Expanding the definition of $\sem{\dns N}(N)$, we get
$(\sem N \rto \tri)(N)$ which is the same thing as a natural transformation
$\sem N \to \tri(N, \dash)$. So let $\Gamma, Q$ be given and
suppose that $\sem N(\Gamma, Q)$ --- by definition of $\tri$, our goal
 is to show that $\Gamma, N \prov Q$.
 By previous lemma, $\Gamma[N] \prov Q$.
By the rule $focL$, we have $\Gamma, N \prov Q$.
\item Expanding the definition of $\sem{\dns P}(\cdot, P)$, we get
$(\sem P \lto \tri)(\cdot, P)$ which is the same thing as a natural transformation
$\sem P \to \tri(\dash, (\cdot, P))$. So let $\Gamma$ be given and
suppose that $\sem P(\Gamma)$ --- by definition of $\tri$, our goal is to show that $\Gamma \prov P$.
 By previous lemma, $\Gamma \prov [P]$.
By the rule $focR$, we have $\Gamma \prov P$.
\item Suppose $\Gamma = H_1, \ldots, H_n$. We need to show
$(\sem {H_1}^< \tensor \cdots \tensor \sem{H_n}^<)(H_1, \ldots, H_n)$ is inhabited.
But by definition of $\tensor$, it suffices to split up the context into singletons and
prove inhabitation of
 $\sem {H_i}^<(H_i)$ for each $i$, which follows by induction hypothesis (part 1) if $H_i = N$
for some $N$, and directly from definition of $\eta(a^+)$ if $H_i = \susp{a^+}$.
\item Suppose $\Gamma = H_1, \ldots H_n$. We need to show
\[(\sem {H_1}^< \tensor \cdots \tensor \sem{H_n}^< \lol \sem Q^>)((H_1, \ldots, H_n), Q)\]
is inhabited.
We can, similarly to the previous case, divide this obligation up
by definition of $\tensor$ and $\lol$ into showing
that all of $\sem{H_i}^<(H_i)$ and $\sem{Q}^>(\cdot, Q)$ are inhabited.
Analysis of the $H_i$ works exactly as before, and we can check whether $Q$ of
the form $P$, in which case the induction hypothesis (part 2) applies,
or of the form $\susp{a^-}$, which case the definition of $\eta(a^-)$ suffices.
\end{enumerate}
\cqed
\end{proof}

\begin{lemma}
In the syntactic model,
\begin{enumerate}
\item  If  $(\sem \Gamma \htensor \sem \Omega) \x \sem{R}^> \natto \tri$, then $\Gamma; \Omega \prov R$.
\item  If $\sem \Gamma   \natto \sem{ P}$, then $\Gamma \prov [P]$.
\item  If $(\sem \Gamma \hlol \sem Q^>) \natto \sem N$, then $\Gamma[N] \prov Q$.
\end{enumerate}
\end{lemma}

\begin{proof}\ %
%% By combining Lemmas~\ref{syntactic} and~\ref{inhabit}.
%% For example:
  \begin{enumerate}
  \item Lemma~\ref{inhabit} tells us that $\sem{\Gamma}(\Gamma)$
    and $\sem{\Omega}(\Omega)$ and $\sem{R}^>(R)$ are inhabited.
    Therefore $((\sem{\Gamma} \tensor \sem{\Omega}) \x \sem{R}^>)((\Gamma, \Omega), R)$
    is as well. By applying the assumed natural transformation, we have
    $\Gamma, \Omega \prov R$.
  \item Lemma~\ref{inhabit} tells us that $\sem{\Gamma}(\Gamma)$ is inhabited, so by
applying the assumed natural transformation, we have $\sem{P}(\Gamma)$. By
Lemma~\ref{syntactic}, we know $\Gamma \prov [P]$.
  \item Lemma~\ref{inhabit} tells us that $(\sem\Gamma \lol  \sem{Q}^>)(\Gamma, Q)$ is inhabited, so by
applying the assumed natural transformation, we have $\sem{N}(\Gamma, Q)$. By
Lemma~\ref{syntactic}, we know $\Gamma[N] \prov Q$.
  \end{enumerate}
  \cqed
\end{proof}

\begin{corollary}[Completeness]\ %
  \begin{enumerate}
  \item If $\Gamma; \Omega \models R$ then $\Gamma ; \Omega \prov R$
  \item If $\Gamma \models [P]$ then $\Gamma \prov [P]$
  \item If $\Gamma[N] \models Q$ then $\Gamma[N] \prov Q$
  \end{enumerate}
\end{corollary}

\bibliography{../wes}

\end{document}
