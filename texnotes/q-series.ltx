\documentclass{article}

\usepackage{environ}
\usepackage{ytableau}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{xcolor}
\hypersetup{
    colorlinks,
    linkcolor={blue!90!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}
\input{theorem}
\allowdisplaybreaks

\input{prooftree}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}

\usepackage{tikz}
\usepackage{tikz-cd}
\definecolor{green}{HTML}{007f00}
\definecolor{cyan}{HTML}{007f7f}
\definecolor{purple}{HTML}{af00af}
\def\rr#1{{\color{red}\mathbf {#1}}}
\def\bb#1{{\color{blue}\mathbf{#1}}}
\def\Z{\mathcal A}
\def\adjust{\big|}
\def\O{\mathcal{O}}
\def\rid{\mathsf{id}}
\def\bd{\partial}
\def\prov{\vdash}
\def\prequiv{\dashv\vdash}
\def\imp{\Rightarrow}
\def\cqed{\hskip2mm{\vrule width .5em height .5em depth 0em}} % at the end of a |P.
\def\o{\circ}
\def\N{\mathbb{N}}
\def\R{\mathbb{R}}
\def\x{\times}
\def\st{\mathrel|}
\def\rset{\mathbf{Set}}
\def\op{\mathsf{op}}
\def\P{\mathbf{P}}
\def\dash{\hbox{---}}
\def\deg{\mathop{\mathsf{deg}}}
\def\celse{\mathrel{|}}
\def\cn{{:}}
\def\rok{\mathrel\mathsf{ok}}
\def\sub{\subseteq}

\newenvironment{nstabbing}
  {\setlength{\topsep}{-\parskip}%
   \setlength{\partopsep}{0pt}%
   \vskip-2em\hphantom{.}%
   \tabbing}
  {\endtabbing}
% LOL https://tex.stackexchange.com/questions/598862/adding-the-hyperref-packages-causes-errors
\def\MakeUppercaseUnsupportedInPdfStrings{\scshape}
\def\poch#1#2{\left(#1;#2\right)_\infty}
\def\pochn#1#2{\left(#1;#2\right)}
\def\tick{{\vphantom{\sum}}'}

\title{$q$-Series Notes}
\author{Jason Reed}
\begin{document}
\maketitle
\tikzset{
   commutative diagrams/.cd,
   arrow style=tikz,
   diagrams={>=stealth}}


\newif\ifshowall

% Decide whether to hide everything
%\showalltrue

\NewEnviron{hide}{\ifshowall\expandafter\BODY\else {\color{gray} $\cdots$ hidden $\cdots$ } \fi}


\section{Introduction}
\begin{hide}
This is a little \LaTeX sandbox for learning about $q$-series.
\end{hide}
\section{Jacobi Triple Product}
\begin{hide}
I understand it to be the case that

\[\poch{-a}{ab}\poch{-b}{ab}\poch{ab}{ab} = \sum_{n=-\infty}^{\infty} a^{n(n+1)\over 2}b^{n(n-1)\over 2}\]

Expanding out a few terms, I see this is the same as

\[((1+a)(1+a^2b)(1+a^3b^2)\cdots)((1+b)(1+ab^2)(1+a^2b^3)\cdots)\]
\[((1-ab)(1-a^2b^2)(1-a^3b^3)\cdots) = \sum_{n=-\infty}^{\infty} a^{n(n+1)\over 2}b^{n(n-1)\over 2}\]
So I think I should find that

\[((1+a)(1+a^2b)(1+a^3b^2)\cdots)((1+b)(1+ab^2)(1+a^2b^3)\cdots)\]
\[ = {1\over (1-ab)(1-a^2b^2)(1-a^3b^3)\cdots}\sum_{n=-\infty}^{\infty} a^{n(n+1)\over 2}b^{n(n-1)\over 2}\]

Let's try to interpret this combinatorially. The coefficient of $a^pb^m$ is somehow telling us that
we're trying to form partitions of $p$ things colored $a$ and $m$ things colored $b$. On the lhs of
the equation, we know that we can form parts which have the property that either they have one excess
$a$ or one excess $b$. On the rhs, what we're doing is analyzing the difference $p-m$, which
points us in the direction of a single term of the sum
\[\sum_{n=-\infty}^{\infty} a^{n(n+1)\over 2}b^{n(n-1)\over 2}\]
and asks us to partition the remainder of the elements into $ab$ pairs.

For example, let's consider the $a^3b^5$ term. We set $n = p-m = -2$. We're looking for
the $a^3b^5$ coefficient of
\[  {1\over (1-ab)(1-a^2b^2)(1-a^3b^3)\cdots} (ab^3)\]
which is asking us to find a partition of 2 on top of $ab^3$. So there should be two ways of partitioning
$a^3b^5$ using unique off-by-one chunks. And indeed there are: $(a^3b^4)b$ and $(a^2b^3)(ab^2)$.

What about $a^5b^7$? We should subtract off the same $ab^3$, and we should have as many ways to partition
as there are the 5 partitions of 4. I count:

\[ (a^3b^4)(a^2b^3), (a^4b^5)(ab^2),  (a^5b^6)b,  (a)(b)(a^3b^4)(ab^2), (a^2b)(b)(a^2b^3)(ab^2)  \]
I could also notate this as
\[ (43), (52), (61), (421\bar 1), (32\bar 21)  \]
where the barred part $\bar n$ counts as weight $n-1$. In this case I'm requiring that the unbarred parts minus
the barred parts equals $m-p$.

Ok, so which coefficients are bijective with exactly the 5 partitions of 4? It's going to be $a^4b^4$ times
any of the consecutive triangular $\ldots, a^6b^3, a^3b, a, 1, b, ab^3, a^3b^6, \ldots$. Therefore I want to look at
extended partitions of
\[\ldots, a^{10}b^7, a^7b^5, a^5b^4, a^4b^4, a^4b^5, a^5b^7, a^7b^{10}, \ldots\]
Ok so I already established
\[ a^5b^7 \leftrightarrow (43), (52), (61), (421\bar 1), (32\bar 21) \]
So I can extend this to
\[ a^7b^5 \leftrightarrow (\bar 4\bar 3), (\bar5 \bar2), (\bar6\bar1), (\bar4\bar21\bar 1), (\bar32\bar 2\bar 1) \]
\[ a^4b^4 \leftrightarrow (4\bar 1), (3\bar 2), (\bar 4 1), (\bar 3 2), (2\bar 2 1 \bar 1) \]
\[ a^4b^5 \leftrightarrow  (5), (41\bar 1),(32\bar 1), (3\bar 2 1), (\bar 3 2 1) \]
\[ a^5b^7 \leftrightarrow (43), (52), (61), (421\bar 1), (32\bar 21) \]
\[ a^7b^{10} \leftrightarrow (532), (541), (631), (721), (4321\bar 1)\]
\[ a^{10}b^{14} \leftrightarrow (5432), (7421), (6431), (8321), (6521) \]
Oof this is a mess. Let's try something simpler. Let's consider just the things that result in 0-partitions.
\[\ldots, a^6b^3, a^3b, a, 1, b, ab^3, a^3b^6, \ldots\]
These should be unique.
\[a^3b \leftrightarrow (\bar 2\bar 1)\]
\[a \leftrightarrow (\bar 1)\]
\[1 \leftrightarrow ()\]
\[b \leftrightarrow (1)\]
\[ab^3 \leftrightarrow (21)\]
\[a^3b^6 \leftrightarrow (321)\]
Ok, I understand this.
Next, 1-partitions: This is
\[\ldots, a^7b^4, a^4b^2, a^2b, ab, ab^2, a^2b^4, a^4b^{7}, \ldots\]
These should still be unique.
\[ab \leftrightarrow (1\bar 1)\]
\[ab^2 \leftrightarrow (2)\]
\[a^2b^4 \leftrightarrow (31)\]
\[a^4b^7 \leftrightarrow (421)\]
\[a^7b^{11} \leftrightarrow (5321)\]
Ok I think I get this.
Next, 2-partitions: This is
\[\ldots, a^8b^5, a^5b^3, a^3b^2, a^2b^2, a^2b^3, a^3b^5, a^5b^{8}, \ldots\]
These should come in pairs.
\[a^2b^2 \leftrightarrow (2\bar 1), (\bar 21)\]
\[a^2b^3 \leftrightarrow (3),(21\bar 1)\]
\[a^3b^5 \leftrightarrow (41),(32)\]
\[a^5b^8 \leftrightarrow (521),(431)\]
\[a^8b^{12} \leftrightarrow (6321),(5421)\]
Ah! Beginning to see a pattern asymptotically. If I look at the
$a^{10}b^{14}$ patterns, and subtract $(4321)$ from each of them, I
get $(1111),(3100),(2110),(4000),(2200)$. That is just the 5 partitions of 4. So I think I just need to
understand how the bars work.

I think I have, e.g.

\[(532) = (321) + (211)\]
\[(541) = (321) + (220)\]
\[(631) = (321) + (310)\]
\[(721) = (321) + (400)\]
\[(4321\bar 1) = (321) + (1111)\]
and then
\[(43) = (21) + (22)\]
\[(52) = (21) + (31)\]
\[(61) = (21) + (40)\]
\[(421\bar 1) = (21) + (211)\]
\[(32\bar 21) = (21) + (1111)\]
and then
\[(5) = (1) + (4)\]
\[(41\bar 1) = (1) + (31)\]
\[(32\bar 1) = (1) + (211)\]
\[(3\bar 2 1) = (1) + (22)\]
\[(\bar 3 2 1) = (1) + (1111)\]

\subsection{Claim}
Let $U(A,B)$ be the set of {\em unique off-diagonal partitions of $(A,B)$}, that is,
the set of finite sets of pairs $(a_i,b_i)$ such that $|a_i - b_i| =1$ for all $i \in I$, and
$A =\sum_{i} a_i$ and $B = \sum_i b_i$.
For example,
\[\{(1,2),(2,1),(10,9),(11,10)\} \in U(24,22)\]
Let $P(n)$ be the partitions of $n$, i.e. the set of finite multisets whose sum is $n$.

I claim there is a bijection
\[U(A,B) \cong P\left(A + B - (A - B)^2\over 2\right)\]

From this we deduce

\[ \poch{-a}{ab} \poch{-b}{ab} = \left(\sum_{n=-\infty}^\infty a^{n(n+1)\over 2}b^{n(n-1)\over 2}\right){1\over \poch{ab}{ab} }\]
\vfil\eject
\end{hide}




\section*{Stirling Numbers}
\begin{hide}
% Here's a recipe for how to get the stirling numbers.

If we generalize the $q$-Pochhammer symbol to $(a;q)_\infty$ to allow $a$ to
be an operator, defining it explicitly with the order\footnote{as opposed to $q^na$}
\[   \poch{a}{q} = \prod_{n=0}^\infty (1 - aq^n)\]
As usual we we say
\[(a; q)_n = {(a; q)_\infty \over (aq^n; q)_\infty} = (1-a)(1-aq)\cdots (1-aq^{n-1})\]
Now we can consider
 \[\pochn{-tq{\partial\over\partial q}}{q}_n = (1 + tq)(1 + 2tq^2)(1 + 3tq^3) \cdots (1 + ntq^n)\]
\def\,{$&$}
\def\pp{\, + \,}
\[\begin{tabular}{ll*{6}{l@{\ \ }}}
$(n=1) \, 1 \pp tq$\\
$(n=2) \, 1 \pp t(q+2q^2) \pp t^2(2q^3)$\\
$(n=3) \, 1 \pp t(q+2q^2+3q^3) \pp  t^2(2q^3+3q^4+6q^5) \pp 6t^3q^6$\\
\end{tabular}\]
The coefficient $t^kq^m$ in polynomial $n$ counts partitions of $m$ with $k$
parts of distinct lengths $\le n$, where one element of each part is
distinguished. So the $n=3$ polynomial describes for example
\def\spacer{\rule{0pt}{\normalbaselineskip}}
\ytableausetup{boxsize=1em}
\[\begin{tabular}{|l|l|}
\hline
$1$ &\spacer $\emptyset$\\
\hline
$tq$ &\spacer \(\ydiagram[ \bullet]{1}*{1} \)\\
$2tq^2$ &\spacer \(\ydiagram[ \bullet]{1}*{2}\quad
\ydiagram[ \bullet]{1+1}*{2}
\)\\
$3tq^3$ &\spacer \(\ydiagram[ \bullet]{1}*{3}\quad
\ydiagram[ \bullet]{1+1}*{3}\quad
\ydiagram[ \bullet]{2+1}*{3}\)\\
\hline
$2t^2q^3$ &\spacer \(\ydiagram[ \bullet]{1,1}*{2,1}\quad
\ydiagram[ \bullet]{1+1,1}*{2,1}
\)\\
$3t^2q^4$ &\spacer \(\ydiagram[ \bullet]{1,1}*{3,1}\quad
\ydiagram[ \bullet]{1+1,1}*{3,1}\quad
\ydiagram[ \bullet]{2+1,1}*{3,1}\)\\
$6t^2q^5$ & \spacer \(
\ydiagram[ \bullet]{1,1}*{3,2}\quad
\ydiagram[ \bullet]{1+1,1}*{3,2}\quad
\ydiagram[ \bullet]{2+1,1}*{3,2}\quad
\ydiagram[ \bullet]{1,1+1}*{3,2}\quad
\ydiagram[ \bullet]{1+1,1+1}*{3,2}\quad
\ydiagram[ \bullet]{2+1,1+1}*{3,2}
\)\\
&\\
\hline
$6t^3q^6$ & \spacer \(
\ydiagram[ \bullet]{1,1,1}*{3,2,1}\quad
\ydiagram[ \bullet]{1+1,1,1}*{3,2,1}\quad
\ydiagram[ \bullet]{2+1,1,1}*{3,2,1}\quad
\ydiagram[ \bullet]{1,1+1,1}*{3,2,1}\quad
\ydiagram[ \bullet]{1+1,1+1,1}*{3,2,1}\quad
\ydiagram[ \bullet]{2+1,1+1,1}*{3,2,1}
\)\\
&\\
\hline
\end{tabular}\]


If we substitute $q \leftarrow 1$, we get
\[\begin{tabular}{ll*{6}{l@{\ \ }}}
$(n=1) \, 1 \pp t$\\
$(n=2) \, 1 \pp 3t \pp 2t^2$\\
$(n=3) \, 1 \pp 6t \pp  11t^2 \pp 6t^3$\\
\end{tabular}\]
i.e. the Stirling numbers of the first kind.
\end{hide}


\section{Trying To Understand Modular Forms a Bit}

So we start with
\[\wp(z,\Lambda) = {1\over z^2} + \sum_{\lambda \in \Lambda}\tick \left({1\over (z-\lambda)^2} - {1\over \lambda^2}\right)\]
and we try to figure out its Laurent series.
\[ = {1\over z^2} + \sum_{\lambda \in \Lambda}\tick \left({{1\over \lambda^2}\over (1-{z\over\lambda})^2} - {1\over \lambda^2}\right)\]
\[ = {1\over z^2} + \sum_{\lambda \in \Lambda}\tick \left({1\over \lambda^2}{1\over (1-{z\over\lambda})^2} - {1\over \lambda^2}\right)\]
\[ = {1\over z^2} + \sum_{\lambda \in \Lambda}\tick \left({1\over \lambda^2}\left(\sum_{n=0}^\infty {z^n\over\lambda^n}\right)^2 - {1\over \lambda^2}\right)\]
\[ = {1\over z^2} + \sum_{\lambda \in \Lambda}\tick {1\over \lambda^2}\left(-1 + \left(\sum_{n=0}^\infty {z^n\over\lambda^n}\right)^2 \right)\]
\[ = {1\over z^2} + \sum_{\lambda \in \Lambda}\tick {1\over \lambda^2}\left(-1 + \left(\sum_{n=0}^\infty (n+1){z^n\over\lambda^n}\right) \right)\]
\[ = {1\over z^2} + \sum_{\lambda \in \Lambda}\tick {1\over \lambda^2} \left(\sum_{n=1}^\infty (n+1){z^n\over\lambda^n}\right) \]
\[ = {1\over z^2} + \sum_{\lambda \in \Lambda}\tick  \left(\sum_{n=1}^\infty (n+1){z^n\over\lambda^{n+2}}\right) \]
\[ = {1\over z^2} + \sum_{n=1}^\infty (n+1)z^n \sum_{\lambda \in \Lambda}\tick   {1\over\lambda^{n+2}} \]
\[ = {1\over z^2} + \sum_{n=1}^\infty (n+1) G_{n+2}z^n \]
And observe that every lattice $\Lambda$ is symmetric about the origin, so we have pairs of $\lambda$ and $-\lambda$,
and for odd $n$ we have $G_n = 0$, because every $\lambda^{-n}$ and $(-\lambda)^{-n}$ cancel. So
\[\wp= {1\over z^2} + \sum_{n=1}^\infty (2n+1) G_{2n+2}z^{2n}\]
And I can consider the derivative
\[\wp'= {-2\over z^3} + \sum_{n=1}^\infty (4n^2-2n) G_{2n+2}z^{2n-1}\]
And now I can try to cancel out those poles. Let $T = \wp - z^{-2}$ and $T' = \wp' + 2 z^{-3}$.
\[\wp^3=  z^{-6} + 3 z^{-4} T + 3 z^{-2} T^2 + T^3\]
\[(\wp')^2=  4z^{-6} + 3 z^{-3} T' + (T')^2\]
Ok so now I observe that
\[4\wp^3 - (\wp')^2  = 12 z^{-4} T + 12 z^{-2} T^2 + 4T^3 - 3 z^{-3} T' - (T')^2\]
eliminates the order 6 pole. What other poles do we still have? Since $T = 3G_{4}z^2 + \cdots$, we
find $12z^{-4}T$ starts $36G_4z^{-2} + \cdots$. So I want to subtract off a copy of $36G_4\wp$.
Oof, getting confused. Let's make some more definitions.
Since I see $G_6$ is eventually used, let's say

\[U = \sum_{n=3}^\infty (2n+1) G_{2n+2}z^{2n}\]
\[\wp= z^{-2} + 3G_4z^2 + 5G_6z^4 + U\]
\[\wp'= -2z^{-3} + 2G_4z + 20G_6z^3 + U'\]
\[(\wp')^2= 4z^{-6} -8G_4z^{-2} + \cdots \]
\[\wp^3= z^{-6} + 9G_4z^{-2} + \cdots\]
\section{Cauchy Integral Formula}

Let's try to do a little integral around the origin:
\[\oint z^n dz\]
Want to substitute $z = k e^{2\pi i t}$. Therefore $dz = 2\pi i k e^{2\pi i t} dt$.
So we're trying to compute
\[2\pi i \int_0^{1}  k^n e^{2\pi i tn} k e^{2\pi i t} dt \]
\[= 2\pi ik^{n+1} \int_0^{1}  e^{2\pi i t(n+1)}  dt \]
\[= 2\pi ik^{n+1} \int_0^{1}  e^{2\pi i t(n+1)}  dt \]
\[= \begin{cases}
\displaystyle 2\pi ik^{n+1} \int_0^{1}  dt & \hbox{if $n=-1$;}\\
\displaystyle2\pi ik^{n+1} \int_0^{1}  e^{2\pi i t(n+1)}  dt & \hbox{ow.}
\end{cases} \]
\[= \begin{cases}
\displaystyle 2\pi i   & \hbox{if $n=-1$;}\\
\displaystyle {k^{n+1}\over n+1} (  e^{2\pi i t(n+1)})\bigg|_0^{1} & \hbox{ow.}
\end{cases} \]
\[= \begin{cases}
\displaystyle 2\pi i   & \hbox{if $n=-1$;}\\
\displaystyle 0 & \hbox{ow.}
\end{cases} \]
How could I think of this with respect to a DFT?
Change $\int_0^1$ to something like $\sum_{t = 0}^{N-1}$.
Substitute $e^{2\pi i t/ N}$ for $z$, turning  $z^n$ into $e^{2\pi i t n/ N}$. We do find that
\[= \sum_{t=0}^{N-1} e^{2\pi i tn / N} = \begin{cases}
\displaystyle N   & \hbox{if $n=0\pmod N$;}\\
\displaystyle 0 & \hbox{ow.}
\end{cases} \]

\section{Lagrange Interpolation}

If I want to make a polynomial $f(x)$ that is 1 at $x = a_i$ and $0$ for $x=a_j$ for $j\ne i$,
then what I want is:
\[ \prod_{j\ne i} \left(x-a_j\over a_i - a_j\right)\]
So if I want a polynomial that is 1 everywhere, I can sum all these basis functions:
\[1 = \sum_i \prod_{j\ne i} \left(x-a_j\over a_i - a_j\right)\]
What is this telling me combinatorially? Let me do some manipulations.
\[1 = \sum_i \prod_{j\ne i} \left(x/a_j-1\over a_i/a_j - 1\right)\]
\[1 = \sum_i \prod_{j\ne i} \left(1 - x/a_j\over 1 - a_i/a_j \right)\]
Let's say $A = \prod_j a_j$ and $A_i= \prod_{j \ne i} a_j$.
Suppose $i,j$ range over $1,\ldots,n$. Then
\[A^{n-1} = \sum_i \prod_{j\ne i} \left(A - A_jx\over 1 - a_i/a_j \right)\]
\[A^{n-1} = \sum_i \prod_{j\ne i} (A - A_jx) L[a_i/a_j]\]
Nope I'm stuck here.
\end{document}
