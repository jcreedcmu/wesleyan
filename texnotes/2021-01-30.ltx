\documentclass{article}
\usepackage{amssymb}
\input{theorem}

\input{prooftree}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}
\def\pair#1#2{\langle #1 , #2 \rangle}

\usepackage{float}
\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{calc}
\definecolor{morange}{rgb}{1,0.56,0}
\definecolor{lorange}{rgb}{1,0.95,0.8}
\definecolor{mgreen}{rgb}{0,0.56,0}
\definecolor{lgreen}{rgb}{0.95,1,0.8}
\definecolor{lgray}{rgb}{0.95,0.95,1.0}
\definecolor{mblue2}{rgb}{0,0.2,1.0}
\definecolor{lblue}{rgb}{0.8,0.95,1}
\definecolor{mred}{rgb}{0.9,0.1,0.1}
\definecolor{mgreen}{rgb}{0.1,0.5,0.1}
\definecolor{mblue}{rgb}{0.3,0.3,0.9}
\def\bitf#1{#1 [smooth, tension=0.8] coordinates {(-1.6,2) (-1,1) (0,0)}}
\def\bitg#1{#1 [smooth, tension=0.8] coordinates {(1,2) (0.55,1) (0,0)}}
\def\bitgrev#1{#1 [smooth, tension=0.8] coordinates {(0,0) (0.55,1) (1,2)}}
\def\bitfg#1{#1 [smooth, tension=0.8] coordinates {(0,0) (0,-2) }}
\def\ep{\varepsilon}
\def\Top{\mathbf{Top}}
\def\TopR{\mathbf{TopR}}
\def\bcase{\mathop\mathbf{case}}
\def\bof{\mathop\mathbf{of}}
\def\binj{\mathbf{inj}}
\def\blet{\mathrel\mathbf{let}}
\def\bin{\mathrel\mathbf{in}}
\def\bmatch{\mathrel\mathbf{match}}
\def\bwith{\mathrel\mathbf{with}}
\def\pbck{\ar[dr, phantom, pos=0, "\lrcorner"]}
\def\ups{{\uparrow}}
\def\dns{{\downarrow}}
\def\grad{\nabla}
\def\uups{{\Uparrow}}
\def\ddns{{\Downarrow}}
\def\adjust{\big|}
\def\O{\mathcal{O}}
\def\rid{\mathsf{id}}
\def\ridp{\mathsf{idp}}
\def\rcoe{\mathsf{coe}}
\def\rtype{\mathsf{type}}
%\def\int{\square}
\def\bd{\partial}
\def\prov{\vdash}
\def\prequiv{\dashv\vdash}
\def\imp{\Rightarrow}
\def\cqed{\hskip2mm{\vrule width .5em height .5em depth 0em}} % at the end of a |P.
\def\o{\circ}
\def\lx{\bigcirc}
\def\B{\mathbb{B}}
\def\C{\mathbf{C}}
\def\K{\mathbf{K}}
\def\M{\mathbf{M}}
\def\T{\mathbf{T}}
\def\Set{\mathbf{Set}}
\def\D{\mathbf{D}}
\def\J{\mathbf{J}}
\def\R{\mathbb{R}}
\def\bx{\mathbf{x}}
\def\by{\mathbf{y}}
\def\bv{\mathbf{v}}
\def\bt{\mathbf{t}}
\def\bu{\mathbf{u}}
\def\bp{\mathbf{p}}
\def\bz{\mathbf{0}}
\def\bzee{\mathbf{z}}
\def\S{\mathfrak{S}}
\def\X{\mathbf{X}}
\def\Y{\mathcal{Y}}
\def\x{\times}
\def\st{\mathrel|}
\def\rset{\mathbf{Set}}
\def\rvec{\mathbf{Vec}}
\def\rrel{\mathbf{Rel}}
\def\rcat{\mathbf{Cat}}
\def\op{\mathsf{op}}
\def\P{\mathbb{P}}
\def\I{\mathbb{I}}
\def\U{\mathbb{U}}
\def\N{\mathbb{N}}
\def\Z{\mathbb{Z}}
\def\tw{\mathbf{2}}
\def\dash{\hbox{---}}
\def\span{\mathop{\mathrm{span}}}
\def\dom{\mathop{\mathrm{dom}}}
\def\cod{\mathop{\mathrm{cod}}}
\def\celse{\mathrel{|}}
\def\cn{{:}}
\def\rok{\mathrel\mathsf{ok}}
\def\llam#1{\langle {#1} \rangle}
\def\hf{{\odot}}
\def\lerp#1#2#3{#1[\![#2,#3]\!]}
\def\nope{\emptyset}
\def\ep{\varepsilon}
\def\rng{\mathop\mathrm{rng}}
\def\npart{\not\!\partial}
\def\null{\emptyset}
\def\xx{{\bf x}}
\def\yy{{\bf y}}
\def\ps{\wp}

\begin{document}
\tikzset{>=stealth}
\tikzset{
   commutative diagrams/.cd,
   arrow style=tikz,
   diagrams={>=stealth}}

\section{Main}

Still trying to formulate a good topological definition of higher-dimensional trees.
\subsection{Attempt 21}

Fix an $n\in \N$. Take countably many copies of the unit interval $\I = [0,1]$ and name them $\I_0, \I_1, \ldots $.
Define
\[ L_m = \prod_{i = 0}^{m-1} \I_i \qquad R_m = \prod_{i = m}^{n-1} \I_i \]
so that canonically $\I^n \cong L_m \x R_m$.
We write $\pi_m : \I^n \to \I_m$ and $\pi_{\ge m} : \I^n \to R_m$ for the evident projections.
We say $\pi_i x = 0$ in the `out of bounds' case when $x \in \I^n$ and $i \ge n$.

If $p :X \to Y$ and $g,h : W \to X$ are morphisms in $\Top$ we write $g =_p h$ (`$p$ equalizes $g,h$') if $p g = p h$.

Given maps $p : X \to Y$ and $f : X \to X$ we say {\em $f$ flattens $p$} if
\begin{itemize}
\item $p  = p  f$
\item For any $g,h$, we have $ g =_p h \imp g =_f h$
\end{itemize}

A map $d : \I^n \to \N$, is a {\em string diagram} if

\begin{itemize}
\item[1.] For any $i \in \N$, if $\pi_i x \in \{0,1\}$, then $d(x) \le i$.
\item[2.] For every $x\in \I^n$ with $d(x) = m$, there exists an open neighborhood $U_x$ of $x$ in $\I^n$
and a map $f_x : U_x \to U_x$ such that $f_x$ flattens $\pi_{\ge m}\adjust_{U_x} : U_x \to R_{m}$,
and
\[ \forall y \in U_x . (f_x y = y) \iff (d(y) = m)\]
\end{itemize}

A string diagram is a {\em tree diagram} if we also have

\begin{itemize}
\item[3.] For every $x \in \I^n$ with $d(x) = m + 1$, there exists a map $g_x : V_x \to V_x$, where
$V_x = \{ y \in U_x \st \pi_m y \ge \pi_m f_x y \}$, such that $g_x$ flattens $\pi_{\ge m} \adjust_{V_x} : V_x \to R_m$,
and
\[ \forall y \in V_x . (g_x y = y) \iff (f_x y = y \lor d(y) = m)\]

\end{itemize}

\subsection{Attempt 22}

Reading Todd Trimble's thoughts on surface diagrams, I think the above
is still vulnerable to the `Reidemeister I equivalence' problem.
Here's an attempt to dodge it.

Let $V, X$ be topological spaces, let $C$ be a set, and
assume $V$ has a commutative group structure $(+,0,-)$.
A map $P : V \x X \to C$ is called
{\em flat} at the point $(v,x) \in V\x X$ if there
exists
\begin{itemize}
\item  an open neighborhood $U_V \x U_X \subseteq V \x X$ containing $(v,x)$
\item  a continuous map $f : U_X \to U_V$
\end{itemize}
such that
\begin{itemize}
\item $f(x) = v$
\item $\forall (w, y) \in U_V \x U_X. P(f(y) + w - v, y) = P( w, x)$
\end{itemize}

Let $[n] = \{0,\ldots, n\}$ and $\I = [0,1]$. We say {\em surface diagram} of dimension $n$
is a map $P : \I^n \to [n]$ that is flat at every $x\in \I^n$ when considered as a map
 $P : \I^{d(x)} \x \I^{n-d(x)} \to [n]$.

\subsection{Attempt 23}

I think the above is still kind of wrong. Let me try to do the full $n$-categories version.

We ask for a collection $C$ of cells and a map $d : C \to \N$ that gives their dimension.
For each $c \in C$ we have a map $\partial_c : \R^{d(c)} \to C$ that gives its `boundary picture'.

Suppose $c \in C$ and $n = d(c)$ and $x \in \R^{n}$ and $c' = \partial_c x$ and $m = d(c')$.
If $x = {\bf 0}$ then we require $c' = c$. Otherwise, we require $m < n$, and that there
exists open neighborhoods of the origin
\[
{\bf 0} \in U_1 \subseteq \R^{n - m}
\qquad
{\bf 0} \in U_2 \subseteq \R^{m }\]
and a function $f : U_1 \to \R^m$, such that
\[ f({\bf 0}) = {\bf 0} \]
\[ \forall (\Delta_1, \Delta_2) \in U_1 \x U_2. \partial_c(x_1 + \Delta_1, x_2 + \Delta_2 + f(\Delta_1) ) = \partial_{c'}(\Delta_2)\]

\begin{figure}[H]
\centering
  \includegraphics[scale=0.35]{images/cell-pictures.png}
\end{figure}

\subsection{Attempt 23b}

This is essentially the same definition, I'm just trying to compress it.

If $C$ is a set and $V, V'$ are topological vector spaces, and we have maps $g : V \x V' \to C$ and $h : V' \to C$,
we say a point $(a,a') \in V \x V'$ is {\em flat} for $g$ and $h$ if there exists an open
neighborhood $U \x U' \subseteq V \x V'$ containing the origin and a continuous function $f : U \to V'$
preserving the origin such that
\[ \forall (\delta, \delta') \in U \x U' . g(a + \delta, a' + \delta' + f(\delta))  = h(\delta') \]

A {\em topological $\omega$-category} is $(C : \Set) \x (d : C \to \N) \x (\partial_c : \R^{d(c)} \to C)$
such that for every $c \in C$, for every $x \in \R^{d(c)}$, if we let $c' = \partial_c x$, we have either
\begin{itemize}
\item $x = {\bf 0}$ and $c' = c$; or
\item $d(c') < d(c)$ and $x$ is flat for $\partial_c$ and $\partial_{c'}$
\end{itemize}



\subsection{Attempt 24}

I notice that the above attempts are about baking in demanding local {\em translations} of the
(germ of the) declared boundary of a cell. But I think I should allow more general transformations,
along the lines of the $\I_n \to \I_m$ maps I've thought about before.


Let me punt on defining `good' maps $\R^{m} \x \R^{n-m} \to \R^m$ for
the moment, and assume that I know what I mean. It's allowed to (and in fact required to) `compress away'
the last $n-m$ coordinates, and may not compress any of the other coordinates.

A {\em topological $\omega$-category} is a set $C$, a map $d : C \to \N$, and for every $c\in C$ a map
 $\partial_c : \R^{d(c)} \to C$,
such that for every $c \in C$, for every $x \in \R^{d(c)}$, if we let $c' = \partial_c x$, we have either
\begin{itemize}
\item $x = {\bf 0}$ and $c' = c$; or
\item $d(c') < d(c)$ and there is some `good' map $\pi : \R^{d(c)} \to \R^{d(c')}$ such that
$\partial_c$ and $ \partial_{c'} \o \pi$ agree on an open neighborhood of $x$.
\end{itemize}
\subsection{Attempt 25}

Maybe instead of giving a `dimension' to points, I just give the whole space $\R^n$ that they correspond to.

Suppose $\T$ is a subcategory of the category of pointed topological spaces.
A {\em topological $\omega$-category} for $\T$ is a set $C$, a map $D : C \to \T$, and for every $c\in C$ a map
 $\partial_c : D(c) \to C$,
such that for every $c \in C$, for every $x \in D(c)$, if we let $c' = \partial_c x$, we have either
\begin{itemize}
\item $x = {\bf 0}$ and $c' = c$; or
\item There is a morphism $\pi : D(c) \to D(c') \in \T$ such that
$\partial_c$ and $ \partial_{c'} \o \pi $ agree on an open neighborhood of $x$.
\end{itemize}


(Does $\partial$ become a natural transformation $D \to \Delta
C$, if I regard $C$ as a discrete category, and also as an indiscrete
topological space?)

\subsection{Attempt 26}

A {\em topological $\omega$-category} on a category $\D$ is a set $C$
and a map $\Delta  : C \to \D$ and a functor $F : \D \to \Top_0$ and for each
$c \in C$ a map $\partial_c : F\Delta c \to C $, such that for every $c \in C$,
for every $x \in F\Delta c$, if we let $c' = \partial_c x$, we have either
\begin{itemize}
\item $x = {\bf 0}$ and $c' = c$; or
\item There is a morphism $\pi : \Delta c \to \Delta c' \in \D$ such that
$\partial_c$ and $ \partial_{c'} \o F\pi $ agree on an open neighborhood $U$ of $x$.
\end{itemize}
\[\begin{tikzcd}
&U\ar[dl, hookrightarrow]\ar[dr, hookrightarrow]\\
 F\Delta c  \ar[d, "F\pi"']&& F\Delta c\ar[d, "\partial_c"]\\
 F\Delta c' \ar[rr, "\partial_{c'}"'] && C \\
\end{tikzcd}\]

%% \subsection{Attempt 26b}

%% A {\em topological $\omega$-category} on a category $\D$ is a set $C$
%% and a map $\Delta  : C \to \D$ and for each $c \in C$ a map $\partial_c : \Delta c \to C $, such that for every $c \in C$,
%% for every $x \in \Delta c$, if we let $c' = \partial_c x$, we have either
%% \begin{itemize}
%% \item $x = {\bf 0}$ and $c' = c$; or
%% \item There is a morphism $\pi : \Delta c \to \Delta c' \in \D$ such that
%% $\partial_c$ and $ \partial_{c'} \o \pi $ agree on an open neighborhood $U$ of $x$.
%% \end{itemize}
%% \[\begin{tikzcd}
%% &U\ar[dl, hookrightarrow]\ar[dr, hookrightarrow]\\
%%  \Delta c  \ar[d, "\pi"']&& \Delta c\ar[d, "\partial_c"]\\
%%  \Delta c' \ar[rr, "\partial_{c'}"'] && C \\
%% \end{tikzcd}\]

\subsection{Attempt 27}

I blogged about this definition.

An {\em orderly space} is a topological space $X$ together with
countably many binary relations $<_0, <_1, <_2, \ldots$ on $X$. An
{\em orderly map} is a continuous map between orderly spaces that
preserves all the relations.

Any subset of an orderly space inherits an orderly space structure in
the evident way, by taking the subspace topology and restricting the
orders to the subset.

For each $n$ we equip $\R^n$ with an orderly space structure, by saying that
for $x = (x_0, \ldots, x_{n-1}) \in \R^n$ and $y = (y_0, \ldots, y_{n-1}) \in \R^n$
the orders $<_m$ are given by
\[ x <_m y \iff (m \ge n) \lor (x_m < y_m \land \forall i \ge m . x_i = y_i )\]


 A {\em prespace} is a set $C$ and a map $d : C \to \N$ and for each $c \in C$ a map
$\partial_c : \R^n \to C$. A {\em picture} in a prespace is a map $\R^n \to C$. A picture $P$ is {\em good
at a point} $x \in \R^n$, written $P[x]$, if there exists an open neighborhood $U\subseteq \R^n $ of $x$ and an orderly
map $\pi : U \to \R^{d(P(x))}$ such that
\[\pi(x) = 0 \land \forall y \in U . P(x) = \partial_{P(x)}(\pi(y))\]

A {\em space} is a prespace $(C, d, \partial)$ such that for every $c \in C$ and every $x \in \R^{d(c)}$,
we have

\[ (x = 0\land \partial_c(x) = c) \lor \partial_c[x] \]

\subsubsection{Results}
If $x \in \R^n$ and $y \in \R_{> 0}^n$, define the closed box of radius $y$ around $x$
\[B(x \pm y) = \prod_{i = 0}^{n-1} [x_i-y_i, x_i+y_i] \]
and the $m^{th}$-dimensional extrema of this box by
\[B(x \pm y; m) = \{z \in B(x\pm y) \st z_m \in  \{x_m-y_m, x_m+y_m\}\} \]

Let $[y]_m$ be the first $m$ coordinates of $y$, replacing the rest with zeroes:
\[ [y]_m = (y_0, \ldots, y_{m-1}, 0,  \ldots, 0)\]
I want to try to prove the following lemmas:

\begin{lemma}
Suppose we have a picture $P : \R^n \to C$ that's good at a point $x \in \R^n$.
Then there exists $y\in \R_{> 0}^n$ such that for all $m \in 1,\ldots, n$, we have
 $\forall z \in B(x\pm [y]_m) . z\ne x \imp  d(P(z )) < m$
\end{lemma}

\begin{proof}
\cqed
\end{proof}


\begin{lemma}
Suppose we have a picture $P : \R^n \to C$ that's good at a point $x \in \R^n$.
Then there exists $y\in \R_{> 0}^n$ such that for all $m \in 0,\ldots, n-1$, we have
 $\forall z \in B(x\pm y; m) . d(P(z)) \le m$
\end{lemma}

\begin{proof}
For $n = 0$ there is nothing to prove.

For $n = 1$, we have a picture $P : \R \to C$  that's good at $x \in \R$.
We must find $y \in \R_{> 0}$ such that $\forall z \in \{x-y, x+y\}. d(P(z)) = 0$.

For $n = 2$, we have a picture $P : \R^2 \to C$ that's good at $(x_0,x_1) \in \R^2$.
That means we can find a box $B(x \pm y)$ that resembles $\partial_{P(x)}$.
\cqed
\end{proof}

\section{Bitopologies Again}

A bitopological space is a set $X$ equipped with two topologies, call them $L, R \subseteq \ps(X)$.
Maps between bitopologies are continuous if they're continuous according to both $L$ and $R$.

The directed real line $\R$ is the set of reals $\R$
 equipped with the bitopology where bases for the $L$- and $R$-topologies can
be given by
\[ L \supseteq \{ [a,b) \st a,b\in \R \} \qquad R \supseteq \{ (a,b] \st a, b \in \R \} \]
The directed interval $\I$ has the subspace bitopology for the subset $[0,1]$.



\begin{lemma}
A subset of $\R$ is open (in the usual topology) iff it is $L$-open and $R$-open.
\end{lemma}

\begin{proof}
Suppose $U$ is open. Let $x$ be given. We want to find an $L$-interval around $x$ that lies
in $U$. Since $U$ is open, we can find $a,b$ such that $x \in (a, b) \subseteq U$. In that case,
$x \in [x,b)\subseteq U$. Reason symmetrically for $R$.

Suppose in the other direction $U$ is $L$-open and $R$-open. Let $x$ be given. We want to find an open
neighborhood of $x$. By $L$-openness, we find $x \in [a_\ell, b_\ell) \subseteq U$, and by $R$-openness, we
find $x \in (a_r, b_r] \subseteq U$. In that case $x \in (a_r, b_\ell) \subseteq U$.
\cqed
\end{proof}

\begin{lemma}
A function $\R \to \R$ is continuous (as a map between bitopological spaces) if and only if it's
continuous (as an ordinary map between topological spaces) and monotone, i.e. $x \le y$ implies $f(x) \le f(y)$.
\end{lemma}

\begin{proof}
$\imp$: Suppose $f^{-1}$ takes $L$-open to $L$-open sets, and $R$-open to $R$-open sets.
Then $f^{-1}$ takes open sets to open sets by the previous lemma, and $f$ is at least continuous.

For any $t$, consider the set of points
\[ \{ \phi \st \phi \ge f(t) \}  = [f(t), \infty) \]
It is clearly an $L$-open set. So its inverse image under $f$
\[ \{ u \st f(u) \ge f(t) \}   \]
should also be $L$-open. Surely $t$ itself belongs to this set. So there exists an $L$-open interval
$[t, b)$ such that $\forall u . u \in [t, b) \imp f(u) \ge f(t)$. Symmetrically, using $R$-continuity,
we get an interval $(a, t]$ such that $\forall s . s \in (a, t] \imp f(s) \le f(t)$.
Putting these together we have an interval $(a, b)$ containing $t$ such that everything left of $t$
has a smaller $f$-value, and everything to the right of it has a bigger $f$ value. Since the closed
interval $[x,y]$ is compact, we can find a finite subcover of these `locally monotone' patches, and
conclude that $f(x) \le f(y)$.

$\Leftarrow$:
Suppose $f$ is continuous in the ordinary sense, and monotone. Then note that the inverse image of any point
must be closed, and convex, so it must be a closed interval (including the possibility that it's a point).
Let some $L$-open interval $[a,b)$ be given.
We need to show that its inverse image
\[ f^{-1}([a,b)) = \{ x \st a \le f(x) < b \} \]
is $L$-open. Let some particular $x \in f^{-1}([a,b))$, be given. Now
if $x > a$, we're basically already done. There's an open
neighborhood around $x$ in the codomain, and so $f$'s ordinary
continuity takes it back to an open neighborhood of $x$. Let's think about the remaining case.
Given an $x$ and a $b > f(x)$, we need to show there's a $c > x$ such that the image
of $[x, c)$ lies entirely in $[f(x), b)$. But this is easy: set $c$ to be the left endpoint of the closed
interval that is the inverse image of $b$. Reason symmetrically to show $R$-continuity.
\cqed
\end{proof}

\subsection{Higher Dimensions}
Here's how I deal with $n$ dimensions. Say a {\em polytopology} is a set equipped
with countably many pairs of topologies, call them $L_i, R_i \subseteq \ps(X)$ for $i \in \N$.
Say a function is polycontinuous if it is continuous according to all topologies.

Recall that we have relations $<_m$ defined in the `orderly' structure on $\R^n$.
\[ x <_m y \iff (m \ge n) \lor (x_m < y_m \land \forall i \ge m . x_i = y_i )\]

Define
\[ [a, b)_i = \{z \st a \le_i z <_i b \} \]
\[ (a, b]_i = \{z \st a <_i z \le_i b \} \]
We can then define bases $\hat L_i, \hat R_i$ for topologies $L_i, R_i$ on $\R^n$ by saying
\[ \hat L_i = \{ U \cap [a, b)_i \st a <_i b \in \R^n, U \in \O(\R^n)\} \]
\[ \hat R_i = \{ U \cap (a, b]_i \st a <_i b \in \R^n, U \in \O(\R^n)\} \]

Then we should find
\begin{lemma}
A subset of $\R^n$ is open in the usual sense if it is open with respect to all $L_i, R_i$.
\end{lemma}

\begin{proof}
For $i \ge m$ we have that $L_i$ and $R_i$ coincide with the usual topology $\O$ on $\R^n$.
So we need only show that $U \subseteq \R^n$ is open in $\O$ iff it is open with respect to all
the topologies in
\[ \{L_i, R_i \st 0 \le i < n\} \]
$\imp$: Suppose $U$ really is open in $\O$. We must show that it's open in $L_i$. Pick a point
$x \in U$, and we can easily find a $b$ also in $U$ such that $x <_i b$, and then $U \cap [x, b)_i$
is a basic open set in $L_i$ contained in $U$ and containing $x$. Reason symmetrically about $R_i$.

$\Leftarrow$: Suppose $U$ is open in all $L_i, R_i$. Let some $x$ be given. We must have witnesses
$U^L_i, a^L_i, b^L_i, U^R_i, a^R_i, b^R_i$ such that
\[ x \in  U^L_i \cap [a^L_i, b^L_i)_i \subseteq U\]
\[ x \in  U^R_i \cap (a^R_i, b^R_i]_i \subseteq U \]
then also we can see
\[ x \in  U^L_i \cap [x, b^L_i)_i \subseteq U\]
\[ x \in  U^R_i \cap (a^R_i, x]_i \subseteq U \]
and so
\[ x \in  U^L_i \cap U^R_i \cap (a^R_i, b^L_i)^{x}_i \subseteq U\]
if we write $(a^R_i, b^L_i)^{x}_i = (a^R_i,x]_i \cup [x, b^L_i)_i $.

Now $\bigcap_i U^L_i \cap U^R_i$ is open, so contains some finite box $V = \prod_i (c_i, d_i)$ around $x$.
So we know
\[ x \in  V \cap (a^R_i, b^L_i)^x_i \subseteq U\]
But now observe that
\[\bigcup_i (a^R_i, b^L_i)^x_i \supseteq \prod_i (a^R_{ii}, b^L_{ii})\]
so we have an open box around $x$ contained in $U$, as required.
\cqed
\end{proof}
\begin{lemma}
A map $f : \R^n \to \R^m$ is polycontinuous iff it is continuous and weakly orderly, that is, $x \le_i y$ implies
$f(x) \le_i f(y)$ for all $i$.
\end{lemma}

\begin{proof}
$\imp$: Suppose $f$ is continuous with respect to all $L_i, R_i$. It is continuous by previous lemma.

$\Leftarrow$: ???
\cqed
\end{proof}

\subsection{Higher Dimensions, Attempt 2}

Here's a different attempt at describing a polytopology for $\R^n$.

A set is a basic open set of $L_m$ if it is a product of intervals $I_0 \x \cdots I_{n-1}$
of the form
\[I_i =
\cases{
  (a_i, b_i) & if $i < m$\cr
  [a_i, b_i) & if $i = m$\cr
  [a_i, b_i] & if $i > m$\cr
}
\]
And $R_m$ has as opens products of intervals of the form
\[I_i =
\cases{
  (a_i, b_i) & if $i < m$\cr
  (a_i, b_i] & if $i = m$\cr
  [a_i, b_i] & if $i > m$\cr
}
\]
No, that's not right.

\subsection{An Exercise}

Consider the two topologies on $\R$ that are just open upsets and downsets. Do we get order
and continuity if we demand both of these simultaneously?

Suppose $f : \R \to \R$ is continuous and monotone. Let $(a, \infty)$ be some upset.
What's $f^{-1}(a, \infty)$? It's $\{ x \st f(x) > a\}$. It could be that that's the whole
set or the empty set. Either of those are fine. Otherwise, there exist $x, y$ such that $f(x) \le a$
and $f(y) > a$. If $y \le x$ then $f(y) \le f(x) \le a$, a contradiction. So $x < y$.
That is, all elements of $f^{-1}(a, \infty)$ are greater than all elements of its complement.
But also $(a, \infty)$ is an open set, so its inverse image is open. So $f$ is $R$-continuous.
Symmetrically it's $L$-continuous.

Suppose $f$ is $L$- and $R$-continuous. Consider an open interval $(a, b)$.
The inverse image $f^{-1}(a, \infty)$
is  $(a', \infty)$ for some $\ell(a) \in \R \cup \{-\infty, \infty\}$.
 The inverse image $f^{-1}(\infty, b)$ is $(\infty, b')$ for some $r(b) \in \R \cup \{-\infty, \infty\}$.

\[ f^{-1}(a, \infty) = \{ x \st f(x) > a \} = (\ell(a), \infty) = \{x \st x > \ell(a)\} \]
\[ f^{-1}( \infty, b) = \{ x \st f(x) < b \} = (\infty, r(b)) = \{x \st x < r(b)\}\]

\[ a < f(x) \iff   \ell(a) < x \]
\[ f(x) < b  \iff  x < r(b) \]
(huh, so these are adjunctions $\ell \dashv f \dashv r$!)

\[ f(x) \in (a, b) \iff x \in (\ell(a), r(b)) \]
So definitely $f$ is continuous.

\subsection{Higher Dimensions, Attempt 3}

Does the following work for 2 dimensions?
Say $\R^+ = \R\cup\{-\infty, \infty\}$.
I say $U \subseteq \R^2$ is $R_1$-continuous if
\[ \exists a \in \R^+. U = \{ (x,y) \in \R^2 \st y > a \} \]
i.e.
\[ \exists a \in \R^+. U = \R \x (a, \infty) \]
and it's $L_1$-continuous if it's a lower set in the sense of
\[ \exists a \in \R^+. U = \{ (x,y) \in \R^2 \st y < a \} \]
i.e.
\[ \exists a \in \R^+. U = \R \x (-\infty, a) \]
Then I think I want to say that $U$ is an $L_0$-continuous set if
\[ \exists f : \R \to \R^+ . U = \{(x,y) \st x > f(y) \} \]
where $f$ is required to be continuous. And $U$ is $R_0$-continuous if
\[ \exists f : \R \to \R^+ . U = \{(x,y) \st x > f(y) \} \]

Suppose that $g$ is $L_0, R_0, L_1, R_0$-continuous function. I want to try to show that
$g$ is continuous as a function $\R^2 \to \R^2$ in the usual sense, and is weakly orderly,
i.e. it preserves $\le_0$ and $\le_1$ on $\R$, i.e. concretely
\[
\erule
{x_0 \le y_0 \land x_1 =  y_1}
{g(x)_0 \le g(y)_0 \land g(x)_1 =  g(y)_1}
\qquad
\erule
{x_1 \le  y_1}
{g(x)_1 \le  g(y)_1}
\]
So first of all let's give names to all the open sets.
\[ L_0^f = \{(x,y) \st x < f(y) \}  \qquad  R_0^f = \{(x,y) \st x > f(y) \} \]
\[ L_1^a = \{(x,y) \st y < a \}  \qquad  R_1^a = \{(x,y) \st y > a \} \]
I think these are actually {\em the} open sets of all the relevant topologies, not just the basic ones.
Except, hm, no are continuous functions aren't closed under $\max/\min$.

\subsection{Higher Dimensions, Attempt 4}

Here's what I want to demand: I think: Let $\R_R$ be $\R$ with the topology given by
{\em lower} sets $(-\infty, a)$ and $\R_L$ be $\R$ with the topology with
{\em upper} sets $(a, \infty)$.



We want to equip $\R^n$ with many topologies. We define

\[ L^f_m = \{x \in \R^n \st x_m < f(x_{m+1}, \ldots, x_{n-1}) \} \qquad
 R^f_m = \{x \in \R^n \st x_m > f(x_{m+1}, \ldots, x_{n-1}) \}\]
\[ L_m = \{ L^f_m \st f : \R^{n-m-1} \to \R_L \} \qquad
 R_m = \{ R^f_m \st f : \R^{n-m-1} \to \R_R \}\]

\begin{lemma} Suppose $(f_i)_{i \in I}$ is a family of functions.
  \begin{itemize}
  \item If $\forall i . f_i : X \to \R_L$, then $\max_i f_i : X \to \R_L$.
  \item If $\forall i . f_i : X \to \R_R$, then $\min_i f_i : X \to \R_R$.
  \end{itemize}
\end{lemma}
\begin{proof}
Let an open set $(a, \infty) \in \R_L$ be given. We know
\[ \bigcup_i f_i^{-1}(a, \infty) \in \O(X) \]
by  from the continuity of $f_i$ and the closure
of open sets in $X$ under arbitrary union, and
\[\bigcup_i f_i^{-1}(a, \infty) = \bigcup_i \{ x \st  f_i(x) > a \} \]
\[ = \{ x \st \bigvee_i f_i(x) > a \} \]
\[ = \{ x \st \max_i f_i(x) > a \}  \]
\[ = (\max_i f_i)^{-1} (a, \infty) \]
so we are done. The $\R_R$ case is symmetric.
\cqed
\end{proof}

\begin{corollary}
  $L_i$ and $R_i$ are closed under arbitrary unions.
\end{corollary}

\begin{proof}
Suppose we have $(f_i)_{i \in I} : \R^{n-m-1} \to \R_L$. We want to show
\[\bigcup_{i} L_m^{f_i} \in L_i \]
but
\[\bigcup_{i} L_m^{f_i} = \bigcup_{i} \{ x \in \R^n \st x_m < f_i(x_{m+1}, \ldots, x_{n-1}) \}\]
\[   = \{ x \in \R^n \st x_m < \max_i f_i(x_{m+1}, \ldots, x_{n-1}) \}   \]
\[ =  L_m^{\max_i f_i}  \in L_i \]
\cqed
\end{proof}
\subsection{Higher Dimensions, Attempt 5}

I think the approach where intervals are huge is unsatisfactory;
consider the directed circle. I {\em have} to think in terms of
half-open intervals to give it an orientation, because there's no
global order. So I might as well give $\R$ that topology to make it
locally isomorphic to the directed circle.

However, I think it might be easier to define topologies in terms of
closure.

Define
\[x\in \R^n \prov E_m(x)  = \{y \in \R^n \st \forall i > m . x_i = y_i \} \subseteq \R^n\]
\[X \subseteq \R^n \prov \pi_m(X) = \{x_m \st x \in X \} \subseteq \R\]

Say a subset $X \subseteq \R^n$  $m$-converges up to $x \not\in X$
\[ \pi_m(X \cap E_m)  \cap (-\infty, x) \]
contains points arbitrarily close to $x$ in $\R$. Say $X$  $m$-converges down to $x$ if
\[ \pi_m(X \cap E_m)  \cap (x, \infty) \]
does. Say $X$  $m$-converges to $x$ if
\[ \pi_m(X \cap E_m)   \setminus \{x\} \]
does.
The closure operation $L_m : \ps(\R^n) \to \ps(\R^n)$ is given by taking a set $X$ and including
any point $x$ such that either
\begin{itemize}
\item  $X$  $i$-converges to $x$ for some $i < m$, or
\item  $X$  $m$-converges up to $x$
\end{itemize}
The operation $R_m$ is the same with `up' replaced by `down'. The
operation $U_m$ is the same with the word `up' removed. We have subset relations:
\[\begin{tikzcd}
 L_0(X)\ar[dr]&[-3em]&[-3em] L_1(X)\ar[dr]&[-3em]&[-3em] L_2(X)\ar[dr]\\
&  U_0(X)\ar[ur]\ar[dr]&&  U_1(X)\ar[ur]\ar[dr]&&[-2.2em] \cdots\\
 R_0(X)\ar[ur]&& R_1(X)\ar[ur]&& R_2(X)\ar[ur]\\
\end{tikzcd}\]

\subsection{Higher Dimensions, Attempt 6}

I'm not sure I need to do this careful telescoping. Write $C$ for the usual closure
operation in $\R$. Maybe just
\[ E^x_m(X) = \{ y_m \st y \in X, \forall i > m . x_i = y_i \} \subseteq \R \]
\[ L_m(X) = \{ x \st  x_m \in C(E^x_m(X)  \cap (-\infty, x]) \} \]
\[ R_m(X) = \{ x \st  x_m \in C(E^x_m(X)  \cap [x, \infty)) \} \]
\[ U_m(X) = \{ x \st  x_m \in C(E^x_m(X)) \} \]

works? The containment of $L_m(X) \subseteq U_m(X)$ is easy. How about
\begin{lemma}
$U_m(X) \subseteq L_{m+1}(X)$
\end{lemma}

\begin{proof}
Write $ L(X) =  C(X \cap (-\infty, x])$.
 Want to show $x_m \in C(E^x_m(X))$ implies
$x_{m+1} \in L(E^x_{m+1}(X))$ for any $x \in \R^n$. That is, we have
\[x_m \in C(\{ y_m \st y \in X, \forall i > m . x_i = y_i \})\]
and we want
\[x_{m+1} \in L(\{ y_{m+1} \st y \in X, \forall i > {m+1} . x_i = y_i \})\]
We can show the even stronger
\[x_{m+1} \in \{ y_{m+1} \st y \in X, \forall i > {m+1} . x_i = y_i \}\]
Because
\[C(\{ y_m \st y \in X, \forall i > m . x_i = y_i \}) \]
is not empty, also
\[\{ y_m \st y \in X, \forall i > m . x_i = y_i \}\]
is not empty. So let $y \in X$ be given with $\forall i > m . x_i = y_i$.
Therefore
\[y_{m+1} \in \{ y_{m+1} \st y \in X, \forall i > {m+1} . x_i = y_i \}\]
But $m+1 > m$ so $x_{m+1} = y_{m+1}$ and we are done.
\cqed
\end{proof}

No, wait, this seems wrong. This means the $L_1$-open sets in $\R^2$ are `too wide', and can't
be any smaller in the $x_0$-direction than the entire real line.

\subsection{Higher Dimensions, Attempt 5b}
We stick with $C$ being the standard closure on $\R$.
\[ E^x_m(X) = \{ y_m \st y \in X, \forall i > m . x_i = y_i \} \subseteq \R \]
\[ L_m(X) = \{ x \st  x_m \in C(E^x_m(X)  \cap (-\infty, x)) \} \]
\[ R_m(X) = \{ x \st  x_m \in C(E^x_m(X)  \cap (x, \infty)) \} \]
\[ U_m(X) = \{ x \st  x_m \in C(E^x_m(X)) \} \]

Then define
\[ \hat L_0 = L_0 \qquad \hat R_0 = R_0\]
\[ \hat U_m(X) = \hat L_m(X) \cup \hat R_m(X) \]
\[ \hat L_{m+1}(X) = L_{m+1}(X) \cup \hat U_m(X) \]
\[ \hat R_{m+1}(X) = R_{m+1}(X) \cup \hat U_m(X) \]
In that case the containments
\[\begin{tikzcd}
 \hat L_0(X)\ar[dr]&[-3em]&[-3em] \hat L_1(X)\ar[dr]&[-3em]&[-3em] \hat L_2(X)\ar[dr]\\
&  \hat U_0(X)\ar[ur]\ar[dr]&&  \hat U_1(X)\ar[ur]\ar[dr]&&[-2.2em] \cdots\\
 \hat R_0(X)\ar[ur]&& \hat R_1(X)\ar[ur]&& \hat R_2(X)\ar[ur]\\
\end{tikzcd}\]
become obvious by definition.

But I'm not sure I believe in this diagram anymore.

\subsection{Higher Dimensions, Attempt 6}
Isn't it actually this?
\[\begin{tikzcd}
&[-1.5em]  L_0\ar[dr]&[-1.5em]&[-1.5em]  L_1\ar[dr]&[-1.5em]&[-1.5em]  L_2\ar[dr]\\
U_0\ar[ur]\ar[dr]&&   U_1\ar[ur]\ar[dr]&&   U_2\ar[ur]\ar[dr]&&[-1.5em] \cdots\\
&  R_0\ar[ur]&&  R_1\ar[ur]&&  R_2\ar[ur]\\
\end{tikzcd}\]
The arrows point in the direction of having fewer arrows in a multigraph, and more open sets in topology.
You have $U_m$ texture at a point in a direction if you have $L_m$ {\em and} $R_m$ texture there.
Ordinary topology $(U_0)$ admits both forward and backward paths. I think I associate $L_m, R_m$ with $\le_m$.
If $x \le_m y$ and $y \le_m x$, then $x \equiv_m y$, and we're in $U_m$.

This means $U_0$ is actually about being literally the same point, up
to homotopy. The relation $\le_0$ is antisymmetric. An open set in $U_0$ is one where nothing interesting happens.

The graphs of the square look like
\[
U_0 =
\begin{tikzcd}
  * \ar[r, <->]\ar[d,  <->] & *\ar[d,  <->]\\
  * \ar[r, <->] & *
\end{tikzcd}
\qquad L_0 =
\begin{tikzcd}
  * \ar[r, <-]\ar[d,  <->] & *\ar[d,  <->]\\
  * \ar[r, <-] & *
\end{tikzcd}
\qquad
R_0 =
\begin{tikzcd}
  * \ar[r, ->]\ar[d,  <->] & *\ar[d,  <->]\\
  * \ar[r, ->] & *
\end{tikzcd}
\]
\[
U_1 =
\begin{tikzcd}
  *\ar[d,  <->] & *\ar[d,  <->]\\
  * & *
\end{tikzcd}
\qquad
L_1 =
\begin{tikzcd}
  * \ar[d,  <-] & *\ar[d,  <-]\\
  *  & *
\end{tikzcd}
\qquad
R_1 =
\begin{tikzcd}
  * \ar[d,  ->] & *\ar[d,  ->]\\
  *  & *
\end{tikzcd}
\]
\[
U_2 =
\begin{tikzcd}
  * & *\\
  * & *
\end{tikzcd}
\]
Wait no maybe I have this backwards. I think the number of edges should go {\em up} as I increase the dimension.
And there need not be any topology that actually takes place at $U_m$, but I could also list it:

\[
 U_0 =
\begin{tikzcd}
  *  & *\\
  *  & *
\end{tikzcd}
\qquad
 L_0 =
\begin{tikzcd}
  * \ar[r, <-] & *\\
  * \ar[r, <-] & *
\end{tikzcd}
\qquad
R_0 =
\begin{tikzcd}
  * \ar[r, ->] & *\\
  * \ar[r, ->] & *
\end{tikzcd}
\]
\[
U_1 =
\begin{tikzcd}
  * \ar[r, <->] & *\\
  * \ar[r, <->] & *
\end{tikzcd}
\qquad
L_1 =
\begin{tikzcd}
  * \ar[r, <->] \ar[dr, <-]\ar[d,  <-] & *\ar[d,  <-]\ar[dl, <-]\\
  * \ar[r, <->] & *
\end{tikzcd}
\qquad
R_1 =
\begin{tikzcd}
  *\ar[r, <->] \ar[d,  ->]\ar[dr, ->] & *\ar[d,  ->]\ar[dl, ->]\\
  *\ar[r, <->]  & *
\end{tikzcd}
\]
\[
U_2 =
\begin{tikzcd}
  * \ar[r, <->] \ar[dr, <->]\ar[d,  <->] & *\ar[d,  <->]\ar[dl, <->]\\
  * \ar[r, <->] & *
\end{tikzcd}
\qquad
L_2 =
\begin{tikzcd}
  * \ar[r, <->] \ar[dr, <->]\ar[d,  <->] & *\ar[d,  <->]\ar[dl, <->]\\
  * \ar[r, <->] & *
\end{tikzcd}
\qquad
R_2 =
\begin{tikzcd}
  * \ar[r, <->] \ar[dr, <->]\ar[d,  <->] & *\ar[d,  <->]\ar[dl, <->]\\
  * \ar[r, <->] & *
\end{tikzcd}
\]

\subsection{Higher Dimensions, Prelude to Attempt 7}
My current belief state is that I actually do want the topologies to {\em decrease} the number
of open sets as I crank up the dimension. I'd like to name them like so:
\[\begin{tikzcd}
&[-2.5em]  L_0\ar[from=dr]&[-2.5em]&[-2.5em]  L_1\ar[from=dr]&[-2.5em]&[-2.5em]  L_2\ar[from=dr]
&[-2.5em]&[-2em]&[-3.5em]L_{n-1}\ar[dl]\ar[from=dr]&[-3.5em]
\\
U_{-1}\ar[from=ur]\ar[from=dr]&&   U_0\ar[from=ur]\ar[from=dr]&&   U_1\ar[from=ur]\ar[from=dr]&& \cdots
&\cdots&&U_{n-1}
\\
&  R_0\ar[from=ur]&&  R_1\ar[from=ur]&&  R_2\ar[from=ur]
&&&R_{n-1}\ar[ul]\ar[from=ur]
\\
\end{tikzcd}\]
with the arrows pointing in the $\subseteq$ direction, where each one of these is a set of open sets.
It will end up being that $U_{-1}$ is the discrete topology, and $U_{n-1}$ is the ordinary topology on $\R^n$.

The $U_i$ aren't really part of the structure I intend to define; I'm
just defining $U_i = L_i \cap R_i$. So I could draw this diagram more
parsimoniously as
\[
\begin{tikzcd}
  L_0\ar[from=r]\ar[from=dr] & L_1\ar[from=r]\ar[from=dr] & \cdots\ar[from=r]\ar[from=dr] & L_{n-1} \\
  R_0\ar[from=r]\ar[from=ur] & R_1\ar[from=r]\ar[from=ur] & \cdots\ar[from=r]\ar[from=ur] & R_{n-1} \\
\end{tikzcd}
\]

\subsection{Higher Dimensions, Attempt 7}

Define a {\em polytopology} to be a set $X$ equipped with a function
\[\textstyle  \O : \{0,\ldots,n-1\} \x \{- {1\over 2}, {1\over 2}\}  \to 2^{2^X}\]
such that each $\O(m, d)$ is a topology, and $\O(m, d) \subseteq \O(m', d')$ whenever $m < m'$.
The standard polytopology structure on $\R^n$ can be defined by saying
\[
\prec_k = \cases{
  \le & if $k > 0$;\cr
  < & otherwise.\cr
}
\qquad
(a,b)_{k,d} =  \{ x \in \R \st a \prec_{k+d} x \prec_{k-d} b \} \]
and letting a basis for $\O(d,m)$ be
\[  \left\{\prod_{i=0}^{n-1} (a_i,b_i)_{i-m,d} \middle| a_i,b_i \in \R \right\}\]

This means the high-dimensional topologies (i.e. $m \ge n$)
are just the ordinary topology on $\R^n$, because the basis is
all open boxes. If we decided to define $\O(-1, d)$, it would just be
the discrete topology, because the basis is made of all closed boxes.

Recall that a map $\R^m \to \R^k$ is orderly
if $x \le_m y$ always implies $f(x) \le_m f(y)$, where
\[(x \le_m y) \iff (x_m \le y_m) \land (\forall i. i > m \imp x_i = y_i)\]
and we say conventionally that $x_i = 0$ if $x\in \R^n$ and $i \ge n$.
As a consequence, we have that $m \ge n$ implies $x \le_m y$ for any $x,y$.

\begin{lemma}
A map $\R^m \to \R^k$ is polycontinuous just in case it is orderly.
\end{lemma}

\begin{proof}
$\imp$: Suppose $f : \R^m \to \R^k$ is polycontinuous. We want to show $f$ is orderly.

Let's first show that $f$ preserves $\le_0$.
Pick an $x \in \R^m$. We want to show that any $y$ with $x \le_0 y$ guarantees $f(x) \le_0 f(y)$.
In other words, we want to show that $f^{-1}\{z \in \R^k \st z \ge_0 f(x) \} \supseteq \{ y\in\R^n \st y \ge_0 x\}$,
or
\[f^{-1}( \dash\ge_0 f(x) ) \supseteq (\dash \ge_0 x) \]
Now $( \dash\ge_0 f(x) )$ is definitely an $\O(0, r)$-open set, so
$f^{-1}( \dash\ge_0 f(x) )$ must be also. So it must contain a basic $\O(0,r)$-open set, some interval
$[x, a)_0$. $\cdots$ should finish this proof
\cqed
\end{proof}
\vfil\eject
\subsection{Higher Dimensions, Attempt 8}
\def\eps{\varepsilon}
Pick an arbitrary $\eps \in (0,1)$.
A polytopology is a set $X$ equipped with with a function
\[\O_X : \Z \x \{\eps, -\eps\} \to 2^{2^X}\]
such that $\O_X(n,d)$ is a topology for any $n,d$.
A polycontinuous function is a map of underlying sets that is
continuous for every topology independently.

Define $[a]_k$ by
\[
[a]_k = \cases{
  \{a\} & if $k < 0$;\cr
\emptyset & otherwise.
}
\]
A polytopology can be given on $\R$ by letting
$\O_\R(n,d)$ be generated by the basis $\{(a,b) \cup [a]_{n+d} \cup [b]_{n-d} \st a,b \in \R\}$.
If $X$ is a polytopology, let $\lx X$ be the same underlying set with the topologies shifted over by one:
\[\O_{\lx X}(n, d) = \O_X(n-1, d)\]
I think then that an interesting polytopology that comes with the underlying set $\R^n$ is
\[ \R^{\lx n} := \R \x \lx \R \x \lx^2 \R \x \cdots \x \lx^{n-1} \R \]
It behaves something like a categorical $n$-cell; maps out of $\R^{\lx (n+1)}$ seem to be a natural
notion of homotopy between pairs of maps out of $\R^{\lx n}$.

\subsection{Higher Dimensions, Attempt 9}

This leads me right back to more or less the same
(pre)sheaf-theoretic conception of directed spaces that I had
in 2019-12-04 with ${\bf MultOrdTop}$.

\def\KMC{\langle \K\M\C \rangle}
To recap: Suppose $\K, \M, \C$ are categories with the same object
set $X$. Write, e.g. $\K \o \M$ for the set of all composites $k \o m$ of $k \in \K$
and $m \in \M$. Assume:
\begin{itemize}
\item $(\K \o \C) \cup (\C \o \K) \subseteq \K \cap \M \cap \C$
\item $(\C \o \M) \cup (\M \o \C) \subseteq \C$
\item $(\K \o \M) \cup (\M \o \K) \subseteq \K$
\end{itemize}
Then we can define $\KMC$ to be the category
whose objects are the set $X \x \Z$, and whose morphisms are given by
\[\KMC((C, n), (D, m)) = \begin{tabular}{r@{\qquad}l}
$\K(C, D)$&if $n < m$;\\
 $\M(C, D)$&if $n = m$;\\
$\C(C,D)$&if $n > m$.
\end{tabular}\]
Then I get a category of $\Z$-many interval objects if I let $\K$ be the monoid
of constant functions $\I \to \I$, and $\M$ the monoid of continuous nondecreasing
functions $\I \to \I$, and $\C$ the monoid of continuous functions $\I \to \I$.

I'm then interested in $\rset^{\KMC^\op}$.

Previously in the other note I'd talked about presheaves over free
finite products of the intervals. I don't know if I need that or not.

\section{Digression on Cartographic Things}

I was shocked to find that I couldn't locate any tex notes on the idea
I had last summer (and sent a couple emails to Noam about) so I
thought I'd jot some of it down here now.

The main idea is to move from of a cartographic set (i.e. a set $X$
acted on by involutive flips $\sigma_0, \ldots, \sigma_n$ such that
every pair of non-adjacent flips commutes) first to a cartographic
{\em linear space}, i.e. a vector space $V$ with maps
$\sigma_0, \ldots, \sigma_n : V \to V$ that are all involutions, and again
every non-adjacent pair commutes, i.e.
\[|i-j| > 1 \imp \sigma_i\sigma_j = \sigma_j \sigma_i\]
And from there taking one more step and considering the {\em mixing} operators
we can derive from flips, namely
\[\mu^+_i = {1 + \sigma_i\over 2} \qquad \mu^-_i = {1 - \sigma_i\over 2}\]
and we see the involutivity of the $\sigma$s (and of $-\sigma$s) means that the $\mu$ are idempotent:
\[ \mu \mu  = (1 +  \sigma) (1 +  \sigma) / 4   = (1 +  \sigma + \sigma + \sigma^2) / 4
   = (1 +  \sigma) / 2    = \mu \]

We can also imagine iterating various $\mu$s towards convergence. I happen to know
that for spaces based on finite cartographic sets that everything converges nicely.
I'm not sure exactly what a minimal set of assumptions that guarantees convergence
generally, but I can punt on that for now.

Let $S$ be the set of partial functions $\{0,\ldots, n\} \to \{-, +\}$. For every $s\in S$
suppose I have an idempotent $\mu_s : V \to V$. For an example of the intended semantics,
suppose $n = 2$ and suppose $s = \{0\mapsto -, 2 \mapsto +\}$, which we can abbreviate
as $-0+$. (We write $0$ in the $1^{th}$ position because 1 is not in the domain of the partial function $s$).
Then the mixing operator $\mu_{-0+}$ converts an element of $V$ --- which is thought of
as an assignment of values to every flag in the complex --- into a directed edge.

I can think of a few requirements for these $\mu$s. There should be
`monotone mutual idempotence`: if you mix over fewer dimensions, and
over more. in either order, it's the same as mixing over more. Mixing
over no dimensions should be the identity. Mixing over `contradictory
functions', which try to impossibly assign both $+$ and $-$ to the
same dimension, should produce the zero function.
\[
\erule
{s \subseteq s'}
{\mu_{s}\mu_{s'} = \mu_{s'}\mu_s = \mu_{s'}}
\qquad
\erule
{}
{\mu_{\emptyset} = \rid}
\qquad
\erule
{s \# s'}
{\mu_{s'}\mu_s = 0}
\]

I'm writing $s \# s'$ to mean $\exists i . s(i)\dns \land s'(i)\dns \land s(i) \ne s'(i)$.
When $s$ and $s'$ are sufficiently ``independent'' they should commute.
Define $s \| s'$ to mean
\[\lnot \exists i,j . s(i)\dns \land s'(j) \dns \land |i - j| \le 1\]
Then we want to require
\[
\erule
{s \| s'}
{\mu_{s'}\mu_s = \mu_s\mu_{s'}}
\]
\subsection{Star}

%%%% WRONG:
%%
%% A collection $C \subseteq V \to V$ of linear operators is star-closed if for any
%% $c \in C$ there exists a unique $c^* \in C$ such that $c c^* = c^* c = c^*$.
%% \begin{lemma}
%% $c^{**} = c^*$
%% \end{lemma}

%% \begin{proof}
%% $c^{**} = c^{**}c^* = c^{**}c^* c = c^{**} c$. Symmetrically
%% $c^{**} = cc^{**}$. So $c^{**}$ is the closure of $c$, and is equal to $c^*$ by uniqueness.
%% \cqed
%% \end{proof}

I'd rather talk about $\mu_i = \mu^+_i$ (and define $\mu^-_i = 1 - \mu_i$)
and talk about a canonical iteration closure of linear operators.

If my eigenvalues are always in the interval $[0,1]$ this makes sense:
If $f : V \to V$ is a linear operator of that sort, then $f^*$ is the one
where we zero out all the eigenvalues less than 1.

Specifically: we say $L^*$ is the closure of $L$ if it preserves any
vector that $L$ preserves, and annihilates any vector that $L$ reduces.
For any $v \in V$, and any $\lambda \in [0,1)$, we demand
\[ (L v = v) \imp (L^* v = v) \]
\[ (L v = \lambda v) \imp (L^* v = 0) \]

An operator is complete if its eigenvectors span the whole space.


Suppose we have $\mu_i$ which are complete, idempotent and non-adjacent-commutative. Can we
show, for example, $(\mu_{i}\mu_j)^* = (\mu_j \mu_i)^*$? Hm, I don't even see that
$\mu_i \mu_j$, for example, is complete.

Maybe I really want to take the closure of a set of operators.
This is going back to the $U$ and $Z$ notation in my august 2020 email to Noam.
Let
\[U[L] = \{v \in V \st Lv = v\}\qquad
Z[L] = \{v \in V \st Lv = 0\}
\]
\[ U[\bigstar_i L_i] = \bigcap_i U[L_i] \]
\[ Z[\bigstar_i L_i] = \span_i Z[L_i] \]
or I could just write this as
\[ ( \bigstar_i L_i )v = v \iff \forall i . L_i v = v \]
\[ (\bigstar_i L_i) v = 0 \iff \sum_i v_i = v  \land \forall i .  L_i v_i = 0 \]
Can I even show that closures are unique?


Suppose I have some operators $L_i$ and $L$ such that
$U[L] = \bigcap_i U[L_i]$. I know $L$ is a projection, so any eigenvalues
it has other than 1 are 0. I know $LL_i = L_iL = L$. Does this uniquely
characterize $L$? I don't think so.

Suppose I have two operators $L$ and $M$ such that $\{UL,ZL\}$ and $\{UM, ZM\}$
are both partitions of $V$ into two subspaces. If I define
\[U(L \star M) = UL \cap UM \]
\[Z(L \star M) = ZL + ZM \]
does that share that property? Does that uniquely characterize $L \star M$ as an
operator? What I know is if $v \in V$, then there exists a unique choice of
 $\ell_1\in UL$ and $\ell_0 \in ZL$ such that $\ell_1 + \ell_2 = v$. Also I get
 $m_1\in UM$ and $m_0 \in ZM$ such that $m_1 + m_2 = v$.

Ah, I already settled this in the email. The counterexample is
\[V = \R^2 \qquad
UL  = \{(x,0) \st x \in \R\}\qquad
UM = \{(0,y) \st y \in\R\}\]
\[ZL = ZM = \{(t,-t) \st t \in \R\}\]
Then $UL \cap UM$ is just the origin, and this isn't enough to span $\R^2$ together with $ZL = ZM$.
%% If there were two
%% different choices, I'd have $v_1, w_1\in UL$ and $v_2, w_2 \in ZL$ with
%% also $w_1 + w_2 = v$ so $v_1 - w_1 + v_2 - w_2 = 0$ so $v_1 - w_1 \in UL$ and $w_2 - v_2 \in ZL$
%% would be equal and nontrivial, violating my tacit assumption that $UL \cap VL = \{0\}$.

\subsection{Characterization of Projections}

Let's say I have two projections $L, M: V \to V$, and I know for each one that their kernel and image
decompose $V$. If they have the same kernel and same image, are they the same?
Then $v = v_1 + v_0$, and $Lv = v_1$ and $Mv = v_1$. Yes.

Ok, so the data I need for a projection really is just a pair of subspaces $(V_0, V_1)$ that decompose $V$,
i.e. $V_0 + V_1 = V$ and $V_0 \cap V_1 = 0$. And then I can define the join of two pairs as

\[ (V_0, V_1) * (W_0, W_1) = (V_0 + W_0, V_1 \cap W_1) \]

With the proviso being: the result may not in general be a decomposition pair. But I can ask
for a set $\mu_0, \ldots, \mu_n = (V_{00}, V_{01}), \ldots, (V_{n0}, V_{n1})$ of decomposition
pairs which have the property that the join of any subset of them is again a decomposition pair.

\subsection{Setting this up formally}

A {\em preprojection} is a pair of subspaces $(V_0, V_1)$.

A {\em projection} is a preprojection $\mu = (V_0, V_1)$ such that
$V_0 \cap V_1 = 0$ and $V_0 + V_1 = V$. We can do function application
with $\mu$ because we can turn $v$ uniquely into
$(v_0 \in V_0) + (v_1 \in V_1)$, and define $\mu(v) = v_1$.
We can define the {\em conjunction} of two preprojections by
\[ (V_0, V_1) \land (W_0, W_1) = (V_0 + W_0, V_1 \cap W_1) \]
and the {\em negation} by
\[ \lnot (V_0, V_1) = (V_1, V_0)\]
It is easy to see that $\land$ is a commutative monoid, with
unit $(0, V)$, which as a function is the identity function.

I'd like to say a {\em cartographic space} is a space $V$ and a set $C$ of projections
closed under $\land$ and $\lnot$, containing distinguished elements $\mu_0, \ldots, \mu_n$.

\def\ket#1{|f\rangle}
I'm not sure that I actually get this full structure from cartographic sets, though.
Given some $\sigma$s, I'd want to define
\[ \mu_i = (Z_i, U_i) =  (\{v \st \sigma_i v = - v\}, \{v \st \sigma_i v = v\})\]
which means the decomposition is explicitly
\[  v = {(1 - \sigma_i)v  \over 2}  + {(1 +\sigma_i)v  \over 2}  \]
But I'm not quite as certain that an expression like
\[ \lnot(\mu_{i} \land \mu_j) \land \mu_k \]
is actually a projection. I start by knowing
\[ \mu_i \land \mu_j = (Z_i + Z_j, U_i \cap U_j)\]
and then
\[ \lnot(\mu_i \land \mu_j) = ( U_i \cap U_j, Z_i + Z_j)\]
and then
\[ \lnot(\mu_i \land \mu_j) \land \mu_k  = ( (U_i \cap U_j) + Z_k , (Z_i + Z_j) \cap U_k)\]
Some easy lemmas are
\begin{lemma}
$ (A \cap B) + (A \cap C) \subseteq A \cap (B + C) $
\end{lemma}

\begin{lemma}
$ A + (B \cap C) \subseteq (A + B) \cap (A + C)   $
\end{lemma}

which would let me show
\[ ( (U_i \cap U_j) + Z_k) \cap (Z_i + Z_j) \cap U_k \]
\[ \subseteq  (U_i + Z_k) \cap (U_j + Z_k) \cap (Z_i + Z_j) \cap U_k \]
Can I perhaps show specifically
\[ (U_i+  Z_k) \cap U_k = U_i \cap U_k\]
? In that case I'd have
\[ \subseteq  U_i \cap U_j \cap (Z_i + Z_j) \cap U_k \]
\[ \subseteq  U_i \cap U_j \cap \emptyset \cap U_k \]
\[ = \emptyset\]
which is what I want.

This would be the same as saying
\[ (\mu_i \lor \lnot \mu_k) \land \mu_k = \lnot (\lnot \mu_i \land \mu_k) \land \mu_k \]
is actually the {\em same} preprojection as
\[ \mu_i \land \mu_k \]
which seems sensible on logical grounds, but I don't know if it's true.

\subsection{The Punchline I was Trying to Build To}

I think the $m$-vector fields --- assignments of values to $m$-cells ---
are characterized by belonging to the image of the projection
\[ D_m =  \lnot\mu_0 \land \cdots \land \lnot\mu_{m-1} \land \mu_{m+1}\land \cdots \land\mu_{n}\]
For example, the edges in a 2-d space are characterized by being in the image of the projection
\[ \lnot\mu_0 \land \mu_2 \]
The sign of the field flips if you do a $\sigma_0$-flip, and stays the same if you do a $\sigma_2$.
The $m$-covector fields are those that satisfy
\[ \hat D_m = \mu_0 \land \cdots \land \mu_{m-1} \land \lnot\mu_{m+1}\land \cdots \land \lnot\mu_{n}\]
A primal face in a 2-d space looks like a curl, but a co-face is more like a vertex: it just has a value.
A co-edge has a direction {\em crossing} the edge from one face to another,
where as a primal edge has a direction {\em along} the edge, from one vertex to another.

I think boundary and coboundary operators are just these $D_m$ and
$\hat D_m$ projections, but off by a scalar factor somehow.

The fact that $dd = 0$ is somehow the same as the fact that $+$ contradicts $-$: if we start
with an $(m+1)$-cell, (already in the image of $D_{m+1}$, where $\lnot \mu_{m}$ holds) and project it
to $D_{m}$, then to $D_{m-1}$, we find that $D_{m-1}$ wants $\mu_{m}$ to hold, a contradiction,
so we get 0.

\subsection{A sad counterexample}

The logic of projections can't be distributive, even for cartographic sets:
I would want expect

\[\top = (\mu_0 \land \mu_1) \lor (\lnot\mu_0 \land \mu_1) \lor (\mu_0 \land \lnot\mu_1) \lor (\lnot\mu_0 \land \lnot\mu_1)\]
\[ = \lnot (\lnot(\mu_0 \lor \mu_1) \land \lnot(\lnot\mu_0 \lor \mu_1) \land \lnot(\mu_0 \lor \lnot\mu_1) \land \lnot(\lnot\mu_0 \lor \lnot\mu_1))\]

\[V = U_0\cap U_1 + U_0\cap Z_1 + Z_0\cap U_1 + Z_0\cap Z_1\]
on a (spatially) 1-dimensional cartographic space, but this clearly
isn't true. On a connected space, each of the summands is at most only
a 1-dimensional subspace of the cartographic space, which as a vector
space can be arbitrarily high-dimensional.

\subsection{Where to Find More}
I noticed I actually did put some more elaborate notes around August
2020 in my IDEAS file.

\subsection{Scaling Factors}

I want to determine the correct `gauge' for a vector field to be in so
that projection operators actually compute boundaries. Naively, I
would imagine a fixed isomorphism between $\R$ and each 1-dimensional
subspace at each flag, and a directed cell would be represented by
throwing weight 1 or -1 at all flags in it.

\def\orb{\mathrm{Orb}}
But instead I think I want to do the following. Let $\orb(x, I)$ be the orbit of flag $x$ under
the flips $\{\sigma_i \st i \in I\}$. For primal $n$-vector fields,
throw a factor of
\[\pm |\orb(x, \{m \st m > n\})|^{-1}\]
 at each flag $x$,
and for the duals, for $n$-forms, throw in a factor
\[\pm |\orb(x, \{m \st m < n\})|^{-1}\]

\subsection{Proving $dd = 0$}
I think I see more or less how to prove the chain complex condition $dd = 0$ now.
Let
\[ A_{m} = \lnot \mu_0 \land \cdots \land \lnot\mu_{m-1} \]
\[ M_{m} = \mu_{m+1} \land \cdots \land \mu_n \]
\[ D_{m} = A_m \land M_m \]

First I claim that (writing composition of operators as juxtaposition)

\[ D_m = A_m M_m = M_m A_m \]
by commutativity of nonadjacent dimensions, and
\[ (\lnot \mu_m) A_{m+1}  = A_{m+1} \]
\[ M_{m-1} \mu_{m} =  M_{m-1} \]
and
\[ A_m A_{m+1}  = A_{m+1} \]
\[ M_{m-1}M_m =  M_{m-1} \]
by `absorption'

Then I can derive
\[ D_{m-1} D_m D_{m+1} = ( A_{m-1} M_{m-1})(  M_{m}A_{m})( A_{m+1} M_{m+1}) \]
\[= A_{m-1} (M_{m-1} M_{m})( A_{m} A_{m+1}) M_{m+1} \]
\[= A_{m-1} M_{m-1}  A_{m+1} M_{m+1} \]
\[= A_{m-1} M_{m-1} (\mu_m) (\lnot \mu_m) A_{m+1} M_{m+1} \]
\[= A_{m-1} M_{m-1} 0 A_{m+1} M_{m+1} \]
\[ = 0\]


\end{document}
