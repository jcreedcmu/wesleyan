\documentclass{article}
\usepackage{amssymb}
\input{theorem}

\input{prooftree}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}
\def\pair#1#2{\langle #1 , #2 \rangle}

\usepackage{float}
\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{calc}
\definecolor{morange}{rgb}{1,0.56,0}
\definecolor{lorange}{rgb}{1,0.95,0.8}
\definecolor{mgreen}{rgb}{0,0.56,0}
\definecolor{lgreen}{rgb}{0.95,1,0.8}
\definecolor{lgray}{rgb}{0.95,0.95,1.0}
\definecolor{mblue2}{rgb}{0,0.2,1.0}
\definecolor{lblue}{rgb}{0.8,0.95,1}
\definecolor{mred}{rgb}{0.9,0.1,0.1}
\definecolor{mgreen}{rgb}{0.1,0.5,0.1}
\definecolor{mblue}{rgb}{0.3,0.3,0.9}
\def\bitf#1{#1 [smooth, tension=0.8] coordinates {(-1.6,2) (-1,1) (0,0)}}
\def\bitg#1{#1 [smooth, tension=0.8] coordinates {(1,2) (0.55,1) (0,0)}}
\def\bitgrev#1{#1 [smooth, tension=0.8] coordinates {(0,0) (0.55,1) (1,2)}}
\def\bitfg#1{#1 [smooth, tension=0.8] coordinates {(0,0) (0,-2) }}
\def\ep{\varepsilon}
\def\Top{\mathbf{Top}}
\def\TopR{\mathbf{TopR}}
\def\bcase{\mathop\mathbf{case}}
\def\bof{\mathop\mathbf{of}}
\def\binj{\mathbf{inj}}
\def\blet{\mathrel\mathbf{let}}
\def\bin{\mathrel\mathbf{in}}
\def\bmatch{\mathrel\mathbf{match}}
\def\bwith{\mathrel\mathbf{with}}
\def\pbck{\ar[dr, phantom, pos=0, "\lrcorner"]}
\def\ups{{\uparrow}}
\def\dns{{\downarrow}}
\def\grad{\nabla}
\def\uups{{\Uparrow}}
\def\ddns{{\Downarrow}}
\def\adjust{\big|}
\def\O{\mathcal{O}}
\def\rid{\mathsf{id}}
\def\ridp{\mathsf{idp}}
\def\rcoe{\mathsf{coe}}
\def\rtype{\mathsf{type}}
%\def\int{\square}
\def\bd{\partial}
\def\prov{\vdash}
\def\prequiv{\dashv\vdash}
\def\imp{\Rightarrow}
\def\cqed{\hskip2mm{\vrule width .5em height .5em depth 0em}} % at the end of a |P.
\def\o{\circ}
\def\lx{\bigcirc}
\def\B{\mathbb{B}}
\def\C{\mathbf{C}}
\def\T{\mathbf{T}}
\def\Set{\mathbf{Set}}
\def\D{\mathbf{D}}
\def\J{\mathbf{J}}
\def\R{\mathbb{R}}
\def\bx{\mathbf{x}}
\def\by{\mathbf{y}}
\def\bv{\mathbf{v}}
\def\bt{\mathbf{t}}
\def\bu{\mathbf{u}}
\def\bp{\mathbf{p}}
\def\bz{\mathbf{0}}
\def\bzee{\mathbf{z}}
\def\S{\mathfrak{S}}
\def\M{\mathbb{M}}
\def\X{\mathbf{X}}
\def\Y{\mathcal{Y}}
\def\x{\times}
\def\st{\mathrel|}
\def\rset{\mathbf{Set}}
\def\rvec{\mathbf{Vec}}
\def\rrel{\mathbf{Rel}}
\def\rcat{\mathbf{Cat}}
\def\op{\mathsf{op}}
\def\P{\mathbb{P}}
\def\I{\mathbb{I}}
\def\U{\mathbb{U}}
\def\N{\mathbb{N}}
\def\Z{\mathbb{Z}}
\def\tw{\mathbf{2}}
\def\dash{\hbox{---}}
\def\dom{\mathop{\mathrm{dom}}}
\def\cod{\mathop{\mathrm{cod}}}
\def\celse{\mathrel{|}}
\def\cn{{:}}
\def\rok{\mathrel\mathsf{ok}}
\def\llam#1{\langle {#1} \rangle}
\def\hf{{\odot}}
\def\lerp#1#2#3{#1[\![#2,#3]\!]}
\def\nope{\emptyset}
\def\ep{\varepsilon}
\def\rng{\mathop\mathrm{rng}}
\def\npart{\not\!\partial}
\def\null{\emptyset}
\def\xx{{\bf x}}
\def\yy{{\bf y}}

\begin{document}
\tikzset{>=stealth}
\tikzset{
   commutative diagrams/.cd,
   arrow style=tikz,
   diagrams={>=stealth}}

\section{Main}

Still trying to formulate a good topological definition of higher-dimensional trees.
\subsection{Attempt 21}

Fix an $n\in \N$. Take countably many copies of the unit interval $\I = [0,1]$ and name them $\I_0, \I_1, \ldots $.
Define
\[ L_m = \prod_{i = 0}^{m-1} \I_i \qquad R_m = \prod_{i = m}^{n-1} \I_i \]
so that canonically $\I^n \cong L_m \x R_m$.
We write $\pi_m : \I^n \to \I_m$ and $\pi_{\ge m} : \I^n \to R_m$ for the evident projections.
We say $\pi_i x = 0$ in the `out of bounds' case when $x \in \I^n$ and $i \ge n$.

If $p :X \to Y$ and $g,h : W \to X$ are morphisms in $\Top$ we write $g =_p h$ (`$p$ equalizes $g,h$') if $p g = p h$.

Given maps $p : X \to Y$ and $f : X \to X$ we say {\em $f$ flattens $p$} if
\begin{itemize}
\item $p  = p  f$
\item For any $g,h$, we have $ g =_p h \imp g =_f h$
\end{itemize}

A map $d : \I^n \to \N$, is a {\em string diagram} if

\begin{itemize}
\item[1.] For any $i \in \N$, if $\pi_i x \in \{0,1\}$, then $d(x) \le i$.
\item[2.] For every $x\in \I^n$ with $d(x) = m$, there exists an open neighborhood $U_x$ of $x$ in $\I^n$
and a map $f_x : U_x \to U_x$ such that $f_x$ flattens $\pi_{\ge m}\adjust_{U_x} : U_x \to R_{m}$,
and
\[ \forall y \in U_x . (f_x y = y) \iff (d(y) = m)\]
\end{itemize}

A string diagram is a {\em tree diagram} if we also have

\begin{itemize}
\item[3.] For every $x \in \I^n$ with $d(x) = m + 1$, there exists a map $g_x : V_x \to V_x$, where
$V_x = \{ y \in U_x \st \pi_m y \ge \pi_m f_x y \}$, such that $g_x$ flattens $\pi_{\ge m} \adjust_{V_x} : V_x \to R_m$,
and
\[ \forall y \in V_x . (g_x y = y) \iff (f_x y = y \lor d(y) = m)\]

\end{itemize}

\subsection{Attempt 22}

Reading Todd Trimble's thoughts on surface diagrams, I think the above
is still vulnerable to the `Reidemeister I equivalence' problem.
Here's an attempt to dodge it.

Let $V, X$ be topological spaces, let $C$ be a set, and
assume $V$ has a commutative group structure $(+,0,-)$.
A map $P : V \x X \to C$ is called
{\em flat} at the point $(v,x) \in V\x X$ if there
exists
\begin{itemize}
\item  an open neighborhood $U_V \x U_X \subseteq V \x X$ containing $(v,x)$
\item  a continuous map $f : U_X \to U_V$
\end{itemize}
such that
\begin{itemize}
\item $f(x) = v$
\item $\forall (w, y) \in U_V \x U_X. P(f(y) + w - v, y) = P( w, x)$
\end{itemize}

Let $[n] = \{0,\ldots, n\}$ and $\I = [0,1]$. We say {\em surface diagram} of dimension $n$
is a map $P : \I^n \to [n]$ that is flat at every $x\in \I^n$ when considered as a map
 $P : \I^{d(x)} \x \I^{n-d(x)} \to [n]$.

\subsection{Attempt 23}

I think the above is still kind of wrong. Let me try to do the full $n$-categories version.

We ask for a collection $C$ of cells and a map $d : C \to \N$ that gives their dimension.
For each $c \in C$ we have a map $\partial_c : \R^{d(c)} \to C$ that gives its `boundary picture'.

Suppose $c \in C$ and $n = d(c)$ and $x \in \R^{n}$ and $c' = \partial_c x$ and $m = d(c')$.
If $x = {\bf 0}$ then we require $c' = c$. Otherwise, we require $m < n$, and that there
exists open neighborhoods of the origin
\[
{\bf 0} \in U_1 \subseteq \R^{n - m}
\qquad
{\bf 0} \in U_2 \subseteq \R^{m }\]
and a function $f : U_1 \to \R^m$, such that
\[ f({\bf 0}) = {\bf 0} \]
\[ \forall (\Delta_1, \Delta_2) \in U_1 \x U_2. \partial_c(x_1 + \Delta_1, x_2 + \Delta_2 + f(\Delta_1) ) = \partial_{c'}(\Delta_2)\]

\begin{figure}[H]
\centering
  \includegraphics[scale=0.35]{images/cell-pictures.png}
\end{figure}

\subsection{Attempt 23b}

This is essentially the same definition, I'm just trying to compress it.

If $C$ is a set and $V, V'$ are topological vector spaces, and we have maps $g : V \x V' \to C$ and $h : V' \to C$,
we say a point $(a,a') \in V \x V'$ is {\em flat} for $g$ and $h$ if there exists an open
neighborhood $U \x U' \subseteq V \x V'$ containing the origin and a continuous function $f : U \to V'$
preserving the origin such that
\[ \forall (\delta, \delta') \in U \x U' . g(a + \delta, a' + \delta' + f(\delta))  = h(\delta') \]

A {\em topological $\omega$-category} is $(C : \Set) \x (d : C \to \N) \x (\partial_c : \R^{d(c)} \to C)$
such that for every $c \in C$, for every $x \in \R^{d(c)}$, if we let $c' = \partial_c x$, we have either
\begin{itemize}
\item $x = {\bf 0}$ and $c' = c$; or
\item $d(c') < d(c)$ and $x$ is flat for $\partial_c$ and $\partial_{c'}$
\end{itemize}



\subsection{Attempt 24}

I notice that the above attempts are about baking in demanding local {\em translations} of the
(germ of the) declared boundary of a cell. But I think I should allow more general transformations,
along the lines of the $\I_n \to \I_m$ maps I've thought about before.


Let me punt on defining `good' maps $\R^{m} \x \R^{n-m} \to \R^m$ for
the moment, and assume that I know what I mean. It's allowed to (and in fact required to) `compress away'
the last $n-m$ coordinates, and may not compress any of the other coordinates.

A {\em topological $\omega$-category} is a set $C$, a map $d : C \to \N$, and for every $c\in C$ a map
 $\partial_c : \R^{d(c)} \to C$,
such that for every $c \in C$, for every $x \in \R^{d(c)}$, if we let $c' = \partial_c x$, we have either
\begin{itemize}
\item $x = {\bf 0}$ and $c' = c$; or
\item $d(c') < d(c)$ and there is some `good' map $\pi : \R^{d(c)} \to \R^{d(c')}$ such that
$\partial_c$ and $ \partial_{c'} \o \pi$ agree on an open neighborhood of $x$.
\end{itemize}
\subsection{Attempt 25}

Maybe instead of giving a `dimension' to points, I just give the whole space $\R^n$ that they correspond to.

Suppose $\T$ is a subcategory of the category of pointed topological spaces.
A {\em topological $\omega$-category} for $\T$ is a set $C$, a map $D : C \to \T$, and for every $c\in C$ a map
 $\partial_c : D(c) \to C$,
such that for every $c \in C$, for every $x \in D(c)$, if we let $c' = \partial_c x$, we have either
\begin{itemize}
\item $x = {\bf 0}$ and $c' = c$; or
\item There is a morphism $\pi : D(c) \to D(c') \in \T$ such that
$\partial_c$ and $ \partial_{c'} \o \pi $ agree on an open neighborhood of $x$.
\end{itemize}


(Does $\partial$ become a natural transformation $D \to \Delta
C$, if I regard $C$ as a discrete category, and also as an indiscrete
topological space?)

\subsection{Attempt 26}

A {\em topological $\omega$-category} on a category $\D$ is a set $C$
and a map $\Delta  : C \to \D$ and a functor $F : \D \to \Top_0$ and for each
$c \in C$ a map $\partial_c : F\Delta c \to C $, such that for every $c \in C$,
for every $x \in F\Delta c$, if we let $c' = \partial_c x$, we have either
\begin{itemize}
\item $x = {\bf 0}$ and $c' = c$; or
\item There is a morphism $\pi : \Delta c \to \Delta c' \in \D$ such that
$\partial_c$ and $ \partial_{c'} \o F\pi $ agree on an open neighborhood $U$ of $x$.
\end{itemize}
\[\begin{tikzcd}
&U\ar[dl, hookrightarrow]\ar[dr, hookrightarrow]\\
 F\Delta c  \ar[d, "F\pi"']&& F\Delta c\ar[d, "\partial_c"]\\
 F\Delta c' \ar[rr, "\partial_{c'}"'] && C \\
\end{tikzcd}\]

%% \subsection{Attempt 26b}

%% A {\em topological $\omega$-category} on a category $\D$ is a set $C$
%% and a map $\Delta  : C \to \D$ and for each $c \in C$ a map $\partial_c : \Delta c \to C $, such that for every $c \in C$,
%% for every $x \in \Delta c$, if we let $c' = \partial_c x$, we have either
%% \begin{itemize}
%% \item $x = {\bf 0}$ and $c' = c$; or
%% \item There is a morphism $\pi : \Delta c \to \Delta c' \in \D$ such that
%% $\partial_c$ and $ \partial_{c'} \o \pi $ agree on an open neighborhood $U$ of $x$.
%% \end{itemize}
%% \[\begin{tikzcd}
%% &U\ar[dl, hookrightarrow]\ar[dr, hookrightarrow]\\
%%  \Delta c  \ar[d, "\pi"']&& \Delta c\ar[d, "\partial_c"]\\
%%  \Delta c' \ar[rr, "\partial_{c'}"'] && C \\
%% \end{tikzcd}\]

\subsection{Attempt 27}

I blogged about this definition.

An {\em orderly space} is a topological space $X$ together with
countably many binary relations $<_0, <_1, <_2, \ldots$ on $X$. An
{\em orderly map} is a continuous map between orderly spaces that
preserves all the relations.

Any subset of an orderly space inherits an orderly space structure in
the evident way, by taking the subspace topology and restricting the
orders to the subset.

For each $n$ we equip $\R^n$ with an orderly space structure, by saying that
for $x = (x_0, \ldots, x_{n-1}) \in \R^n$ and $y = (y_0, \ldots, y_{n-1}) \in \R^n$
the orders $<_m$ are given by
\[ x <_m y \iff (m \ge n) \lor (x_m < y_m \land \forall i \ge m . x_i = y_i )\]


 A {\em prespace} is a set $C$ and a map $d : C \to \N$ and for each $c \in C$ a map
$\partial_c : \R^n \to C$. A {\em picture} in a prespace is a map $\R^n \to C$. A picture $P$ is {\em good
at a point} $x \in \R^n$, written $P[x]$, if there exists an open neighborhood $U\subseteq \R^n $ of $x$ and an orderly
map $\pi : U \to \R^{d(P(x))}$ such that
\[\pi(x) = 0 \land \forall y \in U . P(x) = \partial_{P(x)}(\pi(y))\]

A {\em space} is a prespace $(C, d, \partial)$ such that for every $c \in C$ and every $x \in \R^{d(c)}$,
we have

\[ (x = 0\land \partial_c(x) = c) \lor \partial_c[x] \]

\subsubsection{Results}
If $x \in \R^n$ and $y \in \R_{> 0}^n$, define the closed box of radius $y$ around $x$
\[B(x \pm y) = \prod_{i = 0}^{n-1} [x_i-y_i, x_i+y_i] \]
and the $m^{th}$-dimensional extrema of this box by
\[B(x \pm y; m) = \{z \in B(x\pm y) \st z_m \in  \{x_m-y_m, x_m+y_m\}\} \]

Let $[y]_m$ be the first $m$ coordinates of $y$, replacing the rest with zeroes:
\[ [y]_m = (y_0, \ldots, y_{m-1}, 0,  \ldots, 0)\]
I want to try to prove the following lemmas:

\begin{lemma}
Suppose we have a picture $P : \R^n \to C$ that's good at a point $x \in \R^n$.
Then there exists $y\in \R_{> 0}^n$ such that for all $m \in 1,\ldots, n$, we have
 $\forall z \in B(x\pm [y]_m) . z\ne x \imp  d(P(z )) < m$
\end{lemma}

\begin{proof}
\cqed
\end{proof}


\begin{lemma}
Suppose we have a picture $P : \R^n \to C$ that's good at a point $x \in \R^n$.
Then there exists $y\in \R_{> 0}^n$ such that for all $m \in 0,\ldots, n-1$, we have
 $\forall z \in B(x\pm y; m) . d(P(z)) \le m$
\end{lemma}

\begin{proof}
For $n = 0$ there is nothing to prove.

For $n = 1$, we have a picture $P : \R \to C$  that's good at $x \in \R$.
We must find $y \in \R_{> 0}$ such that $\forall z \in \{x-y, x+y\}. d(P(z)) = 0$.

For $n = 2$, we have a picture $P : \R^2 \to C$ that's good at $(x_0,x_1) \in \R^2$.
That means we can find a box $B(x \pm y)$ that resembles $\partial_{P(x)}$.
\cqed
\end{proof}

\end{document}
