\documentclass{article}
%\usepackage[tmargin=0.15in, bmargin=0.15in]{geometry}
\input{theorem}
\input{prooftree}
\usepackage{relsize}
\usepackage{stmaryrd}
\usepackage{latexsym}
\usepackage{yfonts}
\usepackage{amsmath}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage{tikz}
\usetikzlibrary{calc,arrows,cd,decorations.pathreplacing}
\usetikzlibrary{decorations.pathmorphing}
\usepackage{tcolorbox}
\tcbuselibrary{breakable}
\usepackage{listings}
\lstset{basicstyle=\ttfamily\footnotesize,breaklines=true}

\def\zed{\emptyset}
\def\lint{{\textstyle\int}}
\def\isopen{\textcolor{orange}{\mathlarger{\mathlarger{\mathlarger{\textbf ?}}}}}
\def\isok{\textcolor{green}{\mathlarger{\mathlarger{\mathlarger{\checkmark}}}}}
\def\isbad{\textcolor{red}{\mathlarger{\mathlarger{\mathlarger{\x}}}}}

\def\mhave{\textcolor{blue}{\hbox{have}}}
\def\mwant{\textcolor{orange}{\hbox{want}}}

\def\chave{\eqno\mhave}
\def\cset{\eqno \textcolor{green}{\hbox{set}}}
\def\cwant{\eqno\mwant}
\def\gol{\sqsubset}
\def\gor{\sqsupset}

\def\sp{\bullet}
\def\ot{\leftarrow}
\def\prequiv{\dashv\vdash}
\def\fdom{{\mathbf{d}f}}
\def\fcod{{\mathbf{e}f}}
\def\fidom{\mathbf{\bar d}f}
\def\ficod{\mathbf{\bar e}f}

\def\thn{\mathrel|}
\def\coe{\mathsf{coe}}
\def\bpush{\mathbf{push}}
\def\bpull{\mathbf{pull}}

\definecolor{blu}{rgb}{0.1,0.5,1}
\definecolor{orng}{rgb}{1,0.5,0.3}

\def\wo{\setminus}
\def\fA{\mathsf{A}}
\def\fC{\mathsf{C}}
\def\fX{\mathsf{X}}
\def\ff{\mathsf{f}}
\def\fm{\mathsf{m}}
\def\rspan{\mathsf{Span}}
% \def\El#1{\mathsf{El}({#1})}
\def\El#1{\ulcorner{#1}\urcorner}
\def\U{\mathsf{U}}
\def\uu{\mathsf{u}}
\def\uni{\U}
\def\mor#1#2{#1 \to \underline{#2}}

\def\ridp{\mathsf{idp}}
\def\ssem#1{\langle\!\langle{#1}\rangle\!\rangle}

\definecolor{lred}{rgb}{0.95,0.8,0.8}
\definecolor{cyan}{rgb}{0.80,0.95,0.95}
\definecolor{lorange}{rgb}{0.95,0.90,0.80}
\definecolor{bluegray}{rgb}{0.6,0.6,0.85}
\definecolor{lgray}{gray}{0.8}
\newtcolorbox{declbox}{colframe=lred,colback=lred,grow to right by=-10mm,grow to left by=-10mm,
boxrule=0pt,boxsep=0pt,breakable}
\newtcolorbox{thmbox}{colframe=cyan,colback=cyan,grow to right by=-10mm,grow to left by=-10mm,
boxrule=0pt,boxsep=0pt,breakable}
\newtcolorbox{defnbox}{colframe=lorange,colback=lorange,grow to right by=-10mm,grow to left by=-10mm,
boxrule=0pt,boxsep=0pt,breakable}
\newtcolorbox{tangentbox}{colframe=lgray,colback=lgray,grow to right by=-10mm,grow to left by=-10mm,
boxrule=0pt,boxsep=0pt,breakable}

\input{linear}
\def\rpath#1{[#1]}
\def\rfst{\mathsf{fst}\,}
\def\rsnd{\mathsf{snd}\,}
\def\bunfold{\mathbf{unfold}}
\def\bfold{\mathbf{fold}}
\def\susp#1{\langle {#1} \rangle}
\def\ssusp#1{\langle\!\langle {#1} \rangle\!\rangle}
\def\dto{\mathrel{\dot\to}}
\def\dns{{\downarrow}}
\def\ups{{\uparrow}}
\def\sprov{\Vdash}
\def\signat{{\color{red}\Sigma}}
\def\ep#1{\underline{#1}}
\def\wat{\mathbin{@}}
\def\wwat{\mathbin{\underline\wat}}
\def\cn{{:}}
\def\dv{{\div}}
\def\ww{{\mathsf w}}
\def\base{{\textfrak b}}

\def\N{{\mathbb N}}
\def\Z{{\mathbb Z}}
\def\munit{I}
\def\tt{{\mathsf t}}
\def\ii{{\mathbb I}}
\def\T{\mathbb{T}}
\def\tw{\mathsf{Tw}}
\def\sw#1{^{#1}_{#1}}
\def\TP{\mathbf{TPre}}
\def\pp{\textsf{\textbf p}}
\def\nn{{\mathsf n}}
\def\PP{\textsf{\textbf P}}
\def\NN{\textsf{\textbf N}}
\def\zz{{\mathsf z}}
\def\sem#1{[\![#1]\!]}
\def\usem#1{\lceil\!\!\lceil{#1}\rceil\!\!\rceil}
\def\zem#1{\langle\!\langle#1\rangle\!\rangle}
\def\col#1{{\mathsf{C}}_{#1}}
\def\lax{\mathop\bigcirc}
\def\rjust{\mathsf{just}}
\def\rcvt{\mathsf{cvt}}
\def\rtype{\mathsf{type}}
\def\rdtype{\mathsf{disc}}
\def\rkind{\mathsf{kind}}
\def\rmode{\mathsf{mode}}
\def\rprel{\mathbf{Prel}}
\def\rrfam{\mathbf{Rfam}}
\def\rset{\mathbf{Set}}
\def\rfinset{\mathbf{FinSet}}
\def\rrel{\mathbf{Rel}}
\def\rcat{\mathbf{Cat}}
\def\rfam{\mathbf{Fam}}
\def\binj{\mathbf{inj}}
\def\rid{\mathsf{id}}
\def\rtrue{\mathrel\mathrm{true}}
\def\pbck{\ar[dr, phantom, pos=0, "\lrcorner"]}
\def\bpbck{\ar[ddrr, phantom, pos=0, "\lrcorner"]}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}
\def\lpar{\bindnasrepma}
\def\lamp{\binampersand}
\def\btwo{\mathbf{2}}
\def\bone{\mathbf{1}}

\newarrow {Equiv} =====
\def\FinSet{\mathbf{FinSet}}
\def\x{\times}
\def\maps{\ar[dd,mapsto,shorten <=2em, shorten >=2em]}
\def\mapt{\ar[ddd,mapsto,shorten <=2em, shorten >=2em]}
\def\A{\mathbf{A}}
\def\B{\mathbf{B}}
\def\C{\mathbf{C}}
\def\G{\mathbf{G}}
\def\D{\mathbf{D}}
\def\DD{\mathbb{D}}
\def\E{\mathbf{E}}
\def\M{\mathbf{M}}
\def\pair#1#2{\langle#1,#2\rangle}
\def\ltri{{\lhd}}
\def\rtri{{\rhd}}
\def\tri{\rhd}
\def\ll{{<}}
\def\rr{{>}}
\def\cc{\mathsf{c}}
\def\dd{\mathsf{d}}
\def\o{\circ}
\def\rctx{\,\mathsf{ctx}}
\def\rdctx{\,\mathsf{dctx}}
\def\del{\partial}
\def\also#1{\ \textcolor{blue}{\celse #1}}
\newcounter{nodemaker}
\setcounter{nodemaker}{0}
\def\twocell#1#2{%
  \global\edef\mynodeone{twocell\arabic{nodemaker}}%
  \stepcounter{nodemaker}%
  \global\edef\mynodetwo{twocell\arabic{nodemaker}}%
  \stepcounter{nodemaker}%
  \ar[#1,phantom,shift left=3,""{name=\mynodeone}]%
  \ar[#1,phantom,shift right=3,""'{name=\mynodetwo}]%
  \ar[Rightarrow,#2,from=\mynodeone,to=\mynodetwo]%
}
\def\twocellswap#1#2{%
  \global\edef\mynodeone{twocell\arabic{nodemaker}}%
  \stepcounter{nodemaker}%
  \global\edef\mynodetwo{twocell\arabic{nodemaker}}%
  \stepcounter{nodemaker}%
  \ar[#1,phantom,shift right=3,""{name=\mynodeone}]%
  \ar[#1,phantom,shift left=3,""'{name=\mynodetwo}]%
  \ar[Rightarrow,#2,from=\mynodeone,to=\mynodetwo]%
}
\def\maps{\ar[dd,mapsto,shorten <=2em, shorten >=2em]}
\author{Jason Reed}
\definecolor{fib}{HTML}{ff7f00}
\definecolor{green}{HTML}{007f00}
\definecolor{red}{HTML}{df3f3f}
\definecolor{opfib}{HTML}{007fff}

% For lightening colors I used
% http://trycolors.com/ 6 parts white to 1 part color
\definecolor{opfibl}{HTML}{DBEDFF}
\definecolor{greenl}{HTML}{DBEDDB}
\definecolor{redl}{HTML}{FAE4E4}
\def\njudge#1{\fcolorbox{opfib}{white}{#1}}
\def\nrule#1{\fcolorbox{white}{opfibl}{#1}}
\def\neqn#1{\fcolorbox{white}{redl}{#1}}



\def\judge#1{\vskip 2em\noindent \njudge{$#1$}\vskip 0.5em\noindent}
\def\rule#1{\vskip 2em \noindent \nrule{$#1$}\vskip 0.5em\noindent}
\def\eqn#1{\vskip 2em \noindent \neqn{$#1$}\vskip 0.5em\noindent}
\def\prof{\nrightarrow}
\def\tensor{\otimes}
\def\htensor{\mathrel{\hat\otimes}}
\def\lol{\multimap}
\def\hlol{\mathrel{\hat\multimap}}
\def\wtf{{\color{red}???}}

\def\re{\mathbf{E}}
\def\sh{\sharp}
\def\shp{\mathrel{\sharp}}
\def\zero{\texttt{0}}
\begin{document}

\def\
\tikzset{
   commutative diagrams/.cd,
   arrow style=tikz,
   diagrams={>=stealth}}

\def\doubs#1{{}^{{#1}^\op}_{\x {#1}}}
\def\doub#1{{#1}^\op \x {#1}}

\section{Collecting Examples, Again}
$\forall$ means end and $\exists$ means coend. The variable
$a$ is free in the top and bottom of every rule, and there is an implicit end over it.
Rules marked $\star$ are newly proved below in this document.

\[
\erule
{ F \sw {a a}}
{ \exists b. F \sw {a b}}
\isbad
\qquad
\erule
{ F^a_a \to G\sw a}
{\left(\forall b. F^b_b\right) \to  G\sw a}
\isbad
\]
\[
\erule
{ F^a_{a t\sw a} \x H^{a t\sw a}_a}
{ \exists b. F^a_{a b} \x H^{a b}_a}
\isopen
\qquad
\erule
{  F^{a}_{a t^a_a} \x H^{a t^a_a}_{a } \to G^a_a}
{ \left(\forall b. F^a_{ab} \x H^{a b}_{a }\right) \to G^a_a}
\isok
\]
\[
\erule
{ F^a_{a t_a} \x H^{a t_a}_a}
{ \exists b. F^a_{a b} \x H^{a b}_a}
\isok
\qquad
\erule
{ F^a_{a t\sw a} }
{ \exists b. F^a_{a b}}
\isok
\]
\[
\erule
{\using \isok}
{ \left(\forall b. F\sw {a b}\right) \to  F\sw {a t\sw a}}
\qquad
\erule
{ \using \isok \star}
{ F\sw {a t\sw a} \to \exists b. F\sw {a b} }
\]
\[
\erule
{G\sw a \to H^a_{at\sw a}
\using \isok  \star}
{  F\sw {a t\sw a} \x G^{a}_{a} \to \exists b. F\sw {a b}\x H^a_{ab} }
\]

Counterexample to the first $\isbad$ is the ``$\lrcorner$''-shaped diagram in 6.6.2 of \texttt{2018-07-04}. Counterexample to the second is $F = 0111$ and $G = 0112$.
I was going to add
\[
\erule
{ F^{a t_a}_{a t_a}}
{ \exists b. F^{a b}_{a b} }
\isbad
\]
as an open example, but I realize it's a special case of the first counterexample,
with $t$ the identity functor.

Another good thing to observe is the rule
\[
\erule
{G\sw a \to H^a_{at\sw a}
\qquad
G\sw a \to F\sw {a t\sw a}
\using \isbad  \star}
{   G^{a}_{a} \to \exists b. F\sw {a b}\x H^a_{ab} }
\]
is no good; just substitute $1$ for $G$ and $H$, and set $t^x_y = y$, and we're
back to counterexample number one again. This is the kind of thing that {\em does}
feel very much like focusing to me --- we seem to be pressured to {\em already have}
$F\sw{a t\sw a}$ `in the context'.
\subsection{Existential Version of Identity}
\[
\erule
{\using \isok}
{ F\sw {a t\sw a} \to \exists b. F\sw {a b} }
\]
We are trying to make $M_d : F\sw {d t\sw d} \to \exists b. F\sw {d b} $, so
we set $M_d (x) = \pair {t^d_d} x$. Want to check the end-property
that
\[(\exists b . F_f) \o M_d \o  F_{\cdot t^f}^{f t_f} = (\exists b . F^f) \o M_e \o F_{ft_f}^{\cdot t^f} \]
i.e.
\[ (x : F^{et^e_d}_{dt^d_e}) \to \pair {t^d_d} {F_{f t^f}^{f t_f} x} = \pair {t^e_e} {F_{f t_f}^{f t^f} x} : \exists b . F^{db}_{eb}\]
for which it would suffice
\[ (y : F^{dt^e_d}_{et^d_e}) \to \pair {t^d_d} {F_{\cdot t^f}^{\cdot t_f} y} = \pair {t^e_e} {F_{\cdot t_f}^{\cdot t^f} y} : \exists b . F^{db}_{eb}\]
and I can reason
\[\begin{tikzcd}
{[eeee]}\ar[from=dd]  &&\exists b . F^{db}_{eb}\ar[from=dl, "\iota"']\ar[from=dr, "\iota"]\ar[from=ll, "\iota"']\ar[from=rr, "\iota"] &&  {[dddd]}\ar[from=dd]\\
 & {[dede]}\ar[from=dr]\ar[from=dl] && {[eded]}\ar[from=dr]\ar[from=dl] \\
 {[eede]} \ar[from=rr]&& {[edde]} && {[eddd]}\ar[from=ll]
\end{tikzcd}\]
Where $[ijk\ell]$ means $F^{d t^i_j}_{e t^k_\ell}$.

\subsection{An Important Case For Existentials and Products}
\[
\erule
{G\sw a \to H^a_{at\sw a}
\using \isok}
{  F\sw {a t\sw a} \x G^{a}_{a} \to \exists b. F\sw {a b}\x H^a_{ab} }
\]
We have $L_d : G^d_d \to H^d_{dt\sw d}$. We know the end-property
\[H_{ft_f} \o L_d \o  G^f = H^f_{t^f} \o L_e \o G_f \chave\]

We are trying to make $M_d :  F\sw {d t\sw d} \x G\sw d \to \exists b. F\sw {d b} \x H^d_{db}$, so
we set
\[M_d (x, z) = \pair {t^d_d} {x, L_d(z)}\]
 Want to check the end-property
that
\[(\exists b . F_f \x H_f) \o M_d \o  (F_{\cdot t^f}^{f t_f} \x G^f) = (\exists b . F^f \x H^f) \o M_e \o (F_{ft_f}^{\cdot t^f} \x G_f) \]
i.e.
\[ (x : F^{et^e_d}_{dt^d_e}) (z : G^e_d) \to \pair {t^d_d} {F_{f t^f}^{f t_f} x, H_f L_dG^f z}
= \pair {t^e_e} {F_{f t_f}^{f t^f} x, H^fL_eG_f z} \cwant\]
\[: \exists b . F^{db}_{eb} \x H^{d}_{eb} \]

I appear to be blocked on applying the {\em end} property that I have,
for lack of $t^f$/$t_f$ appearing here in the rightmost component of the tuple. However,
maybe I can exploit the coend property since $H$ is covariant in $b$. I know
the coend property of $\exists b .  C^b_b$ tells me that for any $s : u \to v$
and $K : C^v_u$ that
\[ \pair u {C^s K} = \pair v {C_s K}\]
so the coend property for $\exists b . F\sw{ab} \x H^a_{ab}$ tells me that for any
$s : u \to v$ and $K : F^{av}_{au} \x H^a_{au}$ that
\[ \pair u {F^{\cdot s} K^1, K^2} = \pair v {F_{\cdot s} K^1, H_{\cdot s} K^2}\]
That unadorned $K^2$ there is the thing giving me hope! So let me guess that I want
$u = t^d_d$ and $v = t^d_e$ and
$s = t_f : t\sw d \to t^d_e$ and $K^1 = F^{f}_{ft^f} x$ and $K^2 = H_f L_d G^f z$.
Then I get
\[ (x : F^{et^e_d}_{dt^d_e}) (z : G^e_d) \to \pair {t^d_d} {F_{f t^f}^{f t_f} x, H_f L_dG^f z}
= \pair {t^d_e} {F_{f t^f_f}^{f } x, H_{f t_f} L_dG^f z} \]
\[: \exists b . F^{db}_{eb} \x H^{d}_{eb}\]
and {\em now} we can use the end-property we have to see this is the same as
\[ (x : F^{et^e_d}_{dt^d_e}) (z : G^e_d) \to \pair {t^d_d} {F_{f t^f}^{f t_f} x, H_f L_dG^f z}
= \pair {t^d_e} {F_{f t^f_f}^{f } x, H^{f}_{\cdot t^f} L_eG_f z} \chave \]
\[: \exists b . F^{db}_{eb} \x H^{d}_{eb}\]
and we can also use the {\em coend} property with $u = t^e_e$ and $v = t^d_e$
and $s = t^f : t\sw e \to t^d_e$
and $K^1 = F^f_{f t_f} x$ and $K^2 = H^f L_e G_f z$ to see
\[ (x : F^{et^e_d}_{dt^d_e}) (z : G^e_d) \to
 \pair {t^e_e} {F_{f t_f}^{f t^f} x, H^f L_eG_f z}
= \pair {t^d_e} {F_{f t^f_f}^{f } x, H^{f}_{\cdot t^f} L_eG_f z} \chave \]
\[: \exists b . F^{db}_{eb} \x H^{d}_{eb}\]
and combining the two `have's I get my goal by transitivity.

\section{Formaling the Question of Which Connectives Exist}
If I consider a polarized language that leaves out the shifts:
\[
\begin{tabular}{rccl}
Positives&$P$&$::=$&$\exists x . P \celse P \tensor P \celse P \oplus P \celse 1 \celse 0\celse p(\vec t)$\\
Negatives&$N$&$::=$&$\forall x . N \celse P \lol N \celse N \amp N \celse \top \celse n(\vec t)$
\end{tabular}
\]

Then there's a specific `megaconnective' inference rule associated
with each positive and negative proposition. This can be expressed like so:


There is direct end/coend interpretation of each proposition. This will be the conclusion
of the rule. For this we require that $p$ and $n$ be given functorial interpretations.
If $\Delta \prov P : \rtype$, then $\sem P : \sem \Delta \to \rset$ is a functor,
with the usual thing about $\sem \Delta$ including the co- and contravariant versions
of every variable in $\Delta$. This is defined by
\[ \sem{\exists x . P}_\delta = \int^x \sem P_\delta \qquad  \sem{\forall x . N}_\delta = \int_x \sem N_\delta\]
\[ \sem{P\tensor P}_\delta = \sem P_\delta \x \sem P_\delta \qquad  \sem{N \amp N}_\delta = \sem N_\delta \x \sem N_\delta\]
\[ \sem{P\oplus P}_\delta = \sem P_\delta + \sem P_\delta \qquad  \sem{P \lol N}_\delta = \sem P_{\bar \delta} \to \sem N_\delta\]

The thing I need to express is what it means for a list of functors
$\Phi = F_1, \ldots, F_n$ to `count as' a premise
for a rule. Maybe these functors have different sources? If we need that, we
give them names like $F_i : \sem{\Delta_i} \to \rset$. But I think I may not
need that. We're only trying to capture the {\em synchronous} rules of megaconnectives,
so maybe we won't be varying the $\Delta$ context in the course of unpacking
one such rule. We have rules like
\[
\erule
{\Phi \prov [P_1]  }
{\Phi \prov [P_1 \oplus P_2] }
\qquad
\erule
{\Phi \prov [P_2] }
{\Phi \prov [P_1 \oplus P_2] }
\]
\[
\erule
{\Phi_1 \prov [P_1] \qquad \Phi_2 \prov [P_1] }
{\Phi_1, \Phi_2 \prov [P_1 \times P_2] }
\]
No, wait, I'm off to a slightly wrong start. This scheme isn't taking into
account focusing forcing things to be in the context.
If my proposition I start with is $\exists x . p \tensor n$, then the derived inference rule
is something like
\[
\erule
{\Gamma \prov n(t)}
{\Gamma, p(t) \prov [\exists x . p(x) \tensor n(x)]}
\]
So what I really want to say is that there is some relation
established between a sequence of functors $\sem \Delta \to \rset$
(these being all the premises, considered as ends over the free
variables from $\Delta$) to a functor that is supposed to be a conclusion
from them.

\def\seq{\longrightarrow}
I think this means that the actual data I want the judgment to be over is like
\[ \Phi \seq_\Delta \Gamma \prov [P] \]
\[ \Phi \seq_\Delta \Gamma [N] \prov Q \]
for $\Phi$ being a sequence of $\sem{\Delta} \to \rset$ functors, and $\Gamma$
and $P$ and $N$ and $Q$ being individual such functors. These judgments mean
that {\em if} we have inhabitants for all of
$(\int_{\delta\in  \Delta} F_\delta \st F \in \Phi)$, then we can make an
inhabitant of $\int_{\delta\in\Delta} \Gamma_\delta \to P_\delta$ or
$\int_{\delta\in\Delta} \Gamma_\delta \x N_\delta \to Q_\delta$
as appropriate.

I think the moding is therefore that $\Phi$ is thought of as output,
and we have to be clever enough to `guess' a $\Gamma/Q$ that eventually
matches up with focused atoms.
 In the quantifier rules, we have to guess
the instantiation as well.
\[
 \erule
{\Phi \seq_\Delta \Gamma \prov [[t/x] P]}
{ \Phi \seq_\Delta \Gamma \prov [\exists x . P] }
\qquad
 \erule
{\Phi \seq_\Delta \Gamma [[t/x]N] \prov Q}
{ \Phi \seq_\Delta \Gamma  [\forall x . N] \prov Q}
\]
\[
\erule
{\Phi_1 \seq_\Delta \Gamma \prov  [P_1]\qquad \Phi_2 \seq_\Delta \Gamma \prov  [P_2]}
{ \Phi_1, \Phi_2 \seq_\Delta \Gamma \prov [P_1 \otimes P_2] }
\]
\[
\erule
{\Phi_1 \seq_\Delta \Gamma \prov  [P]\qquad \Phi_2 \seq_\Delta \Gamma[N] \prov  Q}
{ \Phi_1, \Phi_2 \seq_\Delta \Gamma  [P \lol N] \prov Q}
\]
\[
\erule
{}
{ \cdot \seq_\Delta \Gamma, p \prov [p] }
\qquad
\erule
{}
{ \cdot \seq_\Delta \Gamma [n] \prov n }
\]

\[
\erule
{}
{ \Gamma \to N  \seq_\Delta \cdot \prov \Gamma \prov [\dns N] }
\qquad
\erule
{}
{ \Gamma \x P \to Q  \seq_\Delta \Gamma [\ups P] \prov Q }
\]
\[
 \erule
{\Phi \seq_\Delta \Gamma \prov [P_i]}
{ \Phi \seq_\Delta \Gamma \prov [P_1 \oplus P_2] }
\qquad
 \erule
{\Phi \seq_\Delta \Gamma [N_i] \prov Q}
{ \Phi \seq_\Delta \Gamma  [N_1 \amp N_2] \prov Q}
\]

So a proposition $P$ over $\Delta$ is {\em sound} iff
for all choices of functors for its atoms,
and all ways of proving $\Phi \seq_\Delta \Gamma \prov [P]$, if there are
inhabitants of every $(\int_{\delta\in  \Delta} F_\delta \st F \in \Phi)$, then there
is an inhabitant of $\int_{\delta\in\Delta} \Gamma_\delta \to P_\delta$.

Likewise $N$ over $\Delta$ is sound iff
for all choices of functors for its atoms,
and all ways of proving $\Phi \seq_\Delta \Gamma[N] \prov Q$, if there are
inhabitants of every $(\int_{\delta\in  \Delta} F_\delta \st F \in \Phi)$, then there
is an inhabitant of $\int_{\delta\in\Delta} \Gamma_\delta \x N_\delta \to Q_\delta$.

\subsection{Known Examples In This Setting}
I guess I'll be assuming that all atoms mentioned can depend on the $a$-variable
however they like.
\[
 \exists b. \dns n \sw { b}
\isbad
\qquad
\forall b. \ups p^b_b
\isbad
\]
\[
 \exists b. \dns n'_b \otimes \dns n^b
\isopen
\qquad
\forall b. \ups p'_b \amp \ups p^b
\isok \hbox{(but see \S\ref{questioning})}
\]
\[
 \exists^+ b. \dns n'_b \otimes \dns n^b
\isok
\qquad
 \exists b. \dns n_b
\isok
\]
\[
 \forall b. n\sw { b} \isok
\qquad
 \exists b. p\sw { b} \isok
\]
\[
\exists b. p \sw { b}\otimes \dns n_b \isok
\]
The quantifier $\exists^+$ only quantifies over $\Delta$-covariant instantiations of
the variable.
\subsection{Confused About a Difference}
The main thing that's still very mysterious to me is why
$\exists b. \dns n'_b \otimes \dns n^b$
doesn't {\em seem} to work, at least (although I still lack a counterexample)
and yet $\forall b. \ups p'_b \amp \ups p^b$ does work. I suppose the real
categorical dual would be
$\exists b. \dns n'_b \oplus \dns n^b$. Let's see if I can do that.
I can determine all the ways that
\[\Phi \seq_\Delta \exists b .  \Gamma \prov [\dns n'_b \oplus \dns n^b]\]
can be derived. They are
\[(\Gamma^a_a \to n^{t^a_a}) \seq_\Delta \Gamma \prov \exists b .  [\dns n'_b \oplus \dns n^b]\]
\[(\Gamma^a_a \to n'_{t^a_a}) \seq_\Delta \Gamma \prov \exists b .  [\dns n'_b \oplus \dns n^b]\]
So there are two derived inference rules whose soundness I want to verify:
\[
\erule{\int_a \Gamma^a_a \to n^{at^a_a}_a}
{ \int_a \Gamma^a_a \to \int^b  (n')^a_{ab} \oplus  n^{ab}_a }
\qquad
\erule{\int_a \Gamma^a_a \to n'_{t^a_a}}
{ \int_a \Gamma^a_a \to \int^b  (n')^a_{ab} \oplus  n^{ab}_a }
\]
So let's tackle the first one.
We have $M_d : \Gamma^d_d \to n^{d t\sw d}_d$ with
\[ n^{\cdot t^f}_f \o M_d \o \Gamma^f = n^{ft_f} \o M_e \o \Gamma_f : \Gamma^e_d \to n^{dt^e_d}_e
\chave \]
We set $N_d(g) = \pair{t^d_d} {\binr M_d(g)}$. We need to check
\[ (\int n'_f \oplus n_f) \o N_d \o \Gamma^f = (\int (n')^f \oplus n^f)\o N_e \o \Gamma_f \]
i.e.
\[  (g : \Gamma^e_d) \to \pair{t^d_d} {\binr n_f M_d(\Gamma^f g)}
 = \pair{t^e_e} {\binr n^f M_e(\Gamma_f g)} : \int^b (n')^d_{eb} \oplus n^{db}_e
\cwant\]
Now I'm going to try to exploit the coend property and the fact that the $\binr$ {\em branch}
of the coproduct only really cares about one variance.

We know that since $t_f : t^d_d \to t^d_e$,
for any  $K : (n')^d_{et^d_d} \oplus n^{dt^d_e}_e$ that
\[ \pair {t^d_d} {(\binr n^{\cdot t_f}) K} = \pair {t^d_e} {(\binl (n')_{\cdot t_f}) K}
: \int^b (n')^d_{eb} \oplus n^{db}_e\]
Hm, this doesn't look useful yet. How about the fact that
since $t^f : t^e_d \to t^d_d$,
 we're allowed to take any  $K : (n')^d_{et^e_d} \oplus n^{dt^d_d}_e$
and conclude
\[ \pair {t^e_d} {(\binr n^{\cdot t^f}) K} = \pair {t^d_d} {(\binl (n')_{\cdot t^f}) K}
: \int^b (n')^d_{eb} \oplus n^{db}_e\]
and in particular for $K =\binr n_f M_d(\Gamma^f g)$ this means
\[ \pair {t^e_d} { \binr n^{\cdot t^f}_f M_d(\Gamma^f g)} = \pair {t^d_d} { \binr n_f M_d(\Gamma^f g)}
: \int^b (n')^d_{eb} \oplus n^{db}_e \chave\]
Right, this is looking good. Then we consider the coend property for
$t_f : t^e_d \to t^e_e$, which says that for any
$K : (n')^d_{et^e_d} \oplus n^{dt^e_e}_e$
we know that
\[ \pair {t^e_d} {(\binr n^{\cdot t_f}) K} = \pair {t^e_e} {(\binl (n')_{\cdot t_f}) K}
: \int^b (n')^d_{eb} \oplus n^{db}_e\]
so we plug in $K = \binr n^f M_e(\Gamma_f g)$ to get
\[ \pair {t^e_d} { \binr n^{ft_f} M_e(\Gamma_f g)} = \pair {t^e_e} { \binr n^f M_e(\Gamma_f g)}
: \int^b (n')^d_{eb} \oplus n^{db}_e
\chave\]
And now stringing together the three $\mhave$s gives us our $\mwant$.
\subsection{Actually, Is the Universally Quantified one Correct?}
\label{questioning}

Oh, wait, it doesn't actually feel like
\[
\erule
{  F^{a}_{a t^a_a} \x H^{a t^a_a}_{a } \to G^a_a}
{ \left(\forall b. F^a_{ab} \x H^{a b}_{a }\right) \to G^a_a}
\isok
\]
is the same thing as $\forall b. \ups p'_b \amp \ups p^b$ at all.
No, I think it's actually $\forall b. \ups (p'_b \tensor  p^b)$.

So what is the dual of this? Maybe something more like
$\exists b. \dns (p_b \lol  n^b)$ or $\exists b. \dns (p^b \lol  n_b)$?
The asymmetry of $\lol$ is confusing here. Anyhow I'm not sure what
a priority this construction is right now, since it doesn't seem relevant
to explaining the end/coend semantics of focusing specifically.

\subsection{Trying to Express an Informal Intuition}
So currently it feels like the required restriction might be something like:
the variables quantified by $\forall$ and $\exists$ feel `linear' in some way
that {\em is} broken up by tensor, but not additives, but the linear counting that
goes on is {\em how many times the variable gets to pass through shifts}.
And each distinct variance counts as one use.

Oh, but I'm not sure how this fits with
$\forall b. \ups (p'_b \tensor  p^b)$, though.
\subsection{Double-checking the Forall-Amp Case}
Despite it not being the same thing as $\forall b. \ups (p_b \tensor  q^b)$,
I think $\forall b. \ups p_b \amp  \ups q^b$ should be sound anyhow.

I think the derivable $\seq_\Delta$ judgments are
\[(\Gamma^a_a \x p^a_{at^a_a} \to Q^a_a) \seq_\Delta \Gamma[\forall b. \ups p_b \amp  \ups q^b] \prov Q\]
\[(\Gamma^a_a \x q^{at^a_a}_{a} \to Q^a_a) \seq_\Delta \Gamma[\forall b. \ups p_b \amp  \ups q^b] \prov Q\]
So the sound rules should be (letting $R = \Gamma \to Q$)
\[
\erule{\int_a q^{at^a_a}_a\to R^a_a }
{ \int_a \left( \int_b  p^a_{ab} \amp  q^{ab}_a\right) \to R^a_a }
\qquad
\erule{\int_a p^a_{at^a_a} \to R^a_a}
{ \int_a \left( \int_b  p^a_{ab} \amp  q^{ab}_a\right) \to R^a_a }
\]
Let's do the second one.

We suppose we have $M_d : p^d_{dt\sw d} \to R\sw d$ with
\[ R_f \o M_d \o p^{f}_{\cdot t^f} = R^f \o M_e \o p_{f t_f} :  p^{e}_{dt^e_d} \to R^d_e
\chave \]
We then set
\[ L_d(w) = M_d(\pi_1 w_{t^d_d}) \cset\]
and need to check that
\[ R_f \o L_d \o \int (p^f \amp q^f) = R^f \o L_e \o \int (p_f \amp q_f)
:  \left(\int_b p^{e}_{db}\right) \to R^d_e \]
i.e.
\[ \left(w : \int_b p^{e}_{db} \amp q^{eb}_d \right) \to R_f  M_d(p^{f} \pi_1  w_{t^d_d})   = R^f  M_e(p_f \pi_1  w_{t^e_e})
:  R^d_e \cwant\]
And what I suspect I need to do is look at the end-property of $w$ itself, which says
for $t_f : t^d_d \to t^d_e$ that
\[ (p_{\cdot t_f} \amp \cdot) w_{t^d_d} = (\cdot \amp q^{\cdot t_f}) w_{t^d_e} \]
which means
\[ p_{\cdot t_f} \pi_1 w_{t^d_d} = \pi_1 w_{t^d_e} \]
and once again I think I guessed the wrong morphism at first. Let's do
for $t^f : t^e_d \to t^d_d$ and $t_f : t^e_d \to t^e_e$. We get
\[ (p_{\cdot t^f} \amp \cdot) w_{t^e_d} = (\cdot \amp q^{\cdot t^f}) w_{t^d_d} : p^{e}_{dt^d_d} \amp q^{et^e_d}_d\]
\[ (p_{\cdot t_f} \amp \cdot) w_{t^e_d} = (\cdot \amp q^{\cdot t_f}) w_{t^e_e} : p^{e}_{dt^e_e} \amp q^{et^e_d}_d\]
and by projecting we get
\[ \pi_1 (p_{\cdot t^f} \amp \cdot) w_{t^e_d} = \pi_1 (\cdot \amp q^{\cdot t^f}) w_{t^d_d} : p^{e}_{dt^d_d} \]
\[\pi_1 (p_{\cdot t_f} \amp \cdot) w_{t^e_d} = \pi_1 (\cdot \amp q^{\cdot t_f}) w_{t^e_e} : p^{e}_{dt^e_e} \]
i.e.
\[ p_{\cdot t^f} \pi_1 w_{t^e_d} = \pi_1 w_{t^d_d} : p^{e}_{dt^d_d} \chave\]
\[ p_{\cdot t_f} \pi_1 w_{t^e_d} = \pi_1 w_{t^e_e} : p^{e}_{dt^e_e} \chave\]
and again, combining the three $\mhave$s gives us the $\mwant$.

\subsection{How to Extend the Forall-atom Case}
I have two guesses for how to extend $\forall b . n^b_b$, they are
\[ \forall b. \dns m_b \lol n\sw { b}\isok \qquad  \forall b. p\sw { b} \lol \ups q_b\]
I like the first one much better because, er,
 it actually is a generalization of $\forall b . n^b_b$.
So let's try that. The derived rule is I think
\[
\erule
{\int_a \Gamma^a_a \to  m^a_{at\sw a}}
{\int_a \Gamma^a_a \to (\int_b m^a_{ab} \to n^{ab}_{ab}) \to n\sw {at^a_a}}
\]
We suppose we have $M_d : \Gamma^d_d \to  m^d_{dt\sw d}$ with
\[ (g : \Gamma^e_d) \to
 m_{ft_f}  M_d  \Gamma^f g= m^{f}_{\cdot t^f}  M_e  \Gamma_f g
: \Gamma^e_d \to m^{d}_{et^d_e}
\chave \star\]
and we set
\[ L_d(g, w) = w_{t\sw d}(M_d(g)) \cset\]
looking to satisfy
\[ (g : \Gamma^e_d) (w : \int_b m^d_{eb} \to n^{eb}_{db}) \to\]
\[ n_{ft_f}^{\cdot t^f} L_d(\Gamma^f g , \left( \int (m \to n)^f \right)w)   =
n_{\cdot t^f}^{f t_f}  L_e(\Gamma_f g , \left( \int (m \to n)_f \right)w)\]
\[ : n_{e t^d_e}^{d t^e_d}\]
i.e.
\[ (g : \Gamma^e_d) (w : \int_b m^d_{eb} \to n^{eb}_{db}) \to\]
\[ n_{ft_f}^{f t^f}   w_{t\sw d}  m_f M_d \Gamma^f g   =
n_{f t^f}^{f t_f}    w_{t\sw e} m^f M_e \Gamma_f g : n_{e t^d_e}^{d t^e_d} \cwant\]
Let's attend to the end-property of $w$. It says for any $h : x \to y$ that
\[
n_{\cdot h} \o w_x = n^{\cdot h} \o w_y \o m_{\cdot h}
: m^d_{ex} \to n^{ex}_{dy}
\]
Ok, so let's consider $t_f : t\sw d \to t^d_e$ and $t^f : t\sw e \to t^d_e$. These should tell me that
\[
n_{\cdot {t_f}} \o w_{t\sw d} = n^{\cdot {t_f}} \o w_{t^d_e} \o m_{\cdot {t_f}}
: m^d_{e{t\sw d}} \to n^{e{t\sw d}}_{d{t^d_e}}
\chave
\]
\[
n_{\cdot {t^f}} \o w_{t\sw e} = n^{\cdot {t^f}} \o w_{t^d_e} \o m_{\cdot {t^f}}
: m^d_{e{t\sw e}} \to n^{e{t\sw e}}_{d{t^d_e}}
\chave
\]
So with these I can rewrite my goal to
\[ (g : \Gamma^e_d) (w : \int_b m^d_{eb} \to n^{eb}_{db}) \to\]
\[ n_{f}^{f t^f_f}  w_{t^d_e}   m_{ft_f} M_d \Gamma^f g   =
n_{f }^{f t^f_f}  w_{t^d_e}  m_{\cdot t^f}^f M_e \Gamma_f g : n_{e t^d_e}^{d t^e_d} \cwant\]
and this follows directly from the $\mhave\star$ above.

\section{Known Examples As of Now}
Dropping some subsumed ones.
\[
 \exists b. \dns n \sw { b}
\isbad
\qquad
\forall b. \ups p^b_b
\isbad
\qquad
 \exists b. \dns n'_b \otimes \dns n^b
\isopen
\]
\[
\forall b. \ups p'_b \amp \ups p^b
\isok
\qquad
\exists b. \dns n'_b \oplus \dns n^b
\isok
\]
\[
 \forall b. \dns m_b \to n\sw { b} \isok
\qquad
\exists b. p \sw { b}\otimes \dns n_b \isok
\]
These two I feel like I really don't understand:
\[
 \exists^+ b. \dns n'_b \otimes \dns n^b \isok
\qquad
 \forall b. \ups (p_b \otimes q^b) \isok
\]
I don't think the $+$ in $\exists^+$ is essential; it could also be $-$. It's
just essential that it's one or the other. Similarly, everywhere I have just
co- or contravariant arguments to an atom, I think it would work symmetrically
if I flipped all variances in the overall proposition.
\subsection{Trying to Find a Counterexample}
Let's stare hard at the currently open
\[ \exists b. \dns m_b \otimes \dns n^b\]
The inference rule for it is
\[
\erule
{\int_a \Gamma^a_a \to  m^a_{at^a_a} \qquad \int_a \Gamma^a_a \to  n^{at^a_a}_a}
{\int_a \Gamma^a_a \to \int^b  m^a_{ab} \otimes n^{ab}_a}
\]
and I suspect that if I can falsify it, then I can falsify it with merely
\[
\erule
{\int_a   m^a_{at^a_a} \qquad \int_a  n^{at^a_a}_a}
{\int_a  \int^b  m^a_{ab} \otimes n^{ab}_a}
\]
And the way the proof gets stuck is by supposing I have $M_d : m^d_{dt\sw d}$ and
$N_d : n^{dt\sw d}_d$ with
\[ m_{ft_f} M_d = m^f_{\cdot t^f} M_e : m^d_{et^d_e} \qquad
 n^{\cdot t^f}_{f} N_d = n^{f t_f} N_e : n^{dt^e_d}_{e} \chave\]
and then I set
\[ L_d = \pair {t^d_d} {M_d, N_d} \cset\]
and try to show
\[ (\int m_{f} \otimes  n_{f}) L_d = (\int m^f \otimes n^{f})  L_e : \int^b m^d_{eb} \otimes n^{db}_{e} \]
i.e.
\[ \pair {t^d_d} {m_f M_d, n_f N_d} = \pair {t^e_e} {m^f M_e, n^f N_e}
: \int^b m^d_{eb} \otimes n^{db}_{e}
\cwant\]
And at this point using the end properties of the premises and the coend property of the
desired conclusion both seem unusable.

Actually, is this perhaps already falsifiable without direct $a\in \A$-arguments
for $m$ and $n$?
\[
\erule
{\int_a   m_{t^a_a} \qquad \int_a  n^{t^a_a}}
{ \int^b  m_b \otimes n^b} \isok
\]
Suppose I have $M_d : m_{t\sw d}$ and
$N_d : n^{t\sw d}$ with
\[ m_{t_f} M_d = m_{t^f} M_e : m_{t^d_e} \qquad
 n^{ t^f} N_d = n^{ t_f} N_e : n^{t^e_d} \chave\]
and then I set
\[ L_d = \pair {t^d_d} {M_d, N_d} \cset\]
and try to show... oh, there's nothing to show.
I do need the collateral variables to make it break.

What if they only occur bivariantly in one of the functors?
\[
\erule
{\int_a   m^a_{at^a_a} \qquad \int_a  n^{t^a_a}_a}
{\int_a \int^b  m^a_{ab} \otimes n_a^b}
\]
supposing I have $M_d : m^d_{dt\sw d}$ and
$N_d : n^{t\sw d}_d$ with
\[ m_{ft_f} M_d = m^f_{\cdot t^f} M_e : m^d_{et^d_e} \qquad
 n^{ t^f}_{f} N_d = n^{ t_f} N_e : n^{t^e_d}_{e} \chave\]
and then I set
\[ L_d = \pair {t^d_d} {M_d, N_d} \cset\]
and try to show
\[ (\int m_{f} \otimes  n_{f}) L_d = (\int m^f)  L_e : \int^b m^d_{eb} \otimes n^{b}_{e} \]
i.e.
\[ \pair {t^d_d} {m_f M_d, n_f N_d} = \pair {t^e_e} {m^f M_e,  N_e}
: \int^b m^d_{eb} \otimes n^{b}_{e}
\cwant\]
and here, as far as I know, I still am stuck. What about with just one occurrence of $a$?

\[
\erule
{\int_a   m_{t^a_a} \qquad \int_a  n^{t^a_a}_a}
{\int_a \int^b  m_{b} \otimes n_a^b}
\]
supposing I have $M_d : m_{t\sw d}$ and
$N_d : n^{t\sw d}_d$ with
\[ m_{t_f} M_d = m_{ t^f} M_e : m_{t^d_e} \qquad
 n^{ t^f}_{f} N_d = n^{ t_f} N_e : n^{t^e_d}_{e} \chave\]
and then I set
\[ L_d = \pair {t^d_d} {M_d, N_d} \cset\]
and try to show
\[ (\int   n_{f}) L_d =   L_e : \int^b m_{b} \otimes n^{b}_{e} \]
i.e.
\[ \pair {t^d_d} { M_d, n_f N_d} = \pair {t^e_e} { M_e,  N_e}
: \int^b m_b \otimes n^{b}_{e}
\cwant\]
The coend property for $t_f : t^d_d \to t^d_e$ says for $K : m_{t^d_d} \tensor n^{t^d_e}_e$ that
\[ \pair {t^d_d} {n^{t_f} K} = \pair {t^d_e} {m_{t_f} K} \]
which we can use to get anywhere, I think.

The coend property for $t^f : t^e_d \to t^d_d$ says for $K : m_{t^e_d} \tensor n^{t^d_d}_e$ that
\[ \pair {t^e_d} {n^{t^f} K} = \pair {t^d_d} {m_{t^f} K} \]
which also doesn't seem to get me anywhere. Still can't visualize a counterexample
for it, thought.

\subsection{Maybe With $\Gamma$ after all}
\[
\erule
{\int_a \Gamma^a_a \to  m_{t^a_a} \qquad \int_a \Gamma^a_a \to  n^{t^a_a}}
{\int_a \Gamma^a_a \to \int^b  m_{b} \otimes n^b}
\]
Suppose I have $M_d : \Gamma^d_d \to m_{t\sw d}$ and
$N_d : \Gamma^d_d \to n^{t\sw d}$ with
\[ m_{t_f} \o M_d \o \Gamma^f = m_{t^f} \o M_e \o \Gamma_f: \Gamma^e_d \to m_{t^d_e} \chave\]
\[ n^{ t^f} \o N_d \o \Gamma^f= n^{ t_f}\o N_e \o \Gamma_f: \Gamma^e_d \to n^{t^e_d} \chave\]
and then I set
\[ L_d(g) = \pair {t^d_d} {M_d(g), N_d(g)} \cset\]
and I want to check
\[ L_d \o \Gamma^f= L_e \o \Gamma_f : \Gamma^e_d \to \int^b m_b \otimes n^{b} \]
i.e.
\[ (g : \Gamma^e_d) \to \pair {t^d_d} {M_d(\Gamma^f g), N_d(\Gamma^f g)} =
\pair {t^e_e} {M_e(\Gamma_f g), N_e(\Gamma_f g)}
:   \int^b m_b \otimes n^{b} \cwant\]
Here I seem just about as stuck, in either the proving or disproving direction

\subsection{Trying To Prove an Ugly Classical Lemma}
Suppose we are just dealing with the arrow category $\A = d\to e$.
I claim (assuming an ambient classical metalogic) that
\begin{lemma}
If $M \in \int_{a\in\A} F^a_a \to G^a_a$, then either
there exists $N \in \int_{a\in\A} G^a_a$ or $F^e_d = \emptyset$.
\end{lemma}

\begin{proof}
Suppose towards a contradiction that $\emptyset = \int_{a\in\A} G^a_a$ and $x \in F^e_d$.
This means the images $G_f(G^d_d)$ and $G^f(G^e_e)$ are disjoint. The situation looks
like
\[\begin{tikzcd}
  G^e_d = \emptyset \ar[r]\ar[d]& G^e_e = E\ar[d]\\
  G^d_d = D \ar[r]& G^d_e = D + E
\end{tikzcd}\]
This also means that the situation for $\int_{a\in\A} F^a_a \to \emptyset$ must look like
\[\begin{tikzcd}
  F^e_d  \ar[r]\ar[d]& F^e_e \ar[d]\\
  F^d_d  \ar[r]& F^d_e
\end{tikzcd}\]
with $x$ wlog belonging to all four sets. Now let's look at $F^a_a \to G^a_a$:
\[\begin{tikzcd}
   \emptyset \ar[r]\ar[d]& F^e_e \to E  \ar[d]\\
  F^d_d \to D  \ar[r]& F^e_d \to (D + E)
\end{tikzcd}\]
We have to pick an $F^e_e \to E$ that does something with $x$, and a
$F^d_d \to D$ that does something to $x$, and since $x$ is also in $F^e_d$,
it will distinguish the two functions at input $x$. So
$\int_{a\in\A} F^a_a \to G^a_a$ is empty.
\cqed
\end{proof}

Oh, nevermind, this does have a one-line constructive proof:
\begin{lemma}
If $x \in F^e_d$ and $M \in \int_{a\in\A} F^a_a \to G^a_a$, then
there exists $N \in \int_{a\in\A} G^a_a$.
\end{lemma}

\begin{proof}
Set $N_d = M_d (F^f x)$ and $N_e = M_e(F_f x)$.
\cqed
\end{proof}

So, then, maybe I can do
\begin{lemma}
Classically, when $a$ ranges over the arrow category $d \to e$,
\[
\erule
{\int_a \Gamma^a_a \to  m_{t^a_a} \qquad \int_a \Gamma^a_a \to  n^{t^a_a}}
{\int_a \Gamma^a_a \to \int^b  m_{b} \otimes n^b}
\]
\end{lemma}

\begin{proof}
Either $\Gamma^d_d$ is empty or not. If it's not empty, then we can make $m_{t^d_d}$ and
$n^{t\sw d}$. If it is empty, then $\Gamma^e_d$ must be empty. This means we merely need
to make both of
\[ \Gamma^d_d \to \int^b  m_{b} \otimes n^b\]
\[ \Gamma^e_e \to \int^b  m_{b} \otimes n^b\]
and don't need to worry whether they're compatible, which we can easily do.
\cqed
\end{proof}

\subsection{A Different Thought}
I realize that a special case of
\[
\erule
{ F^a_{a t\sw a} \x H^{a t\sw a}_a}
{ \exists b. F^a_{a b} \x H^{a b}_a}
\isopen
\]
is
\[
\erule
{\int_a F^{a a}_{aa} \x H^{a a}_{aa}}
{ \int_a \int^{ b c} F^{a b}_{a c} \x H^{a c}_{a b}}
\isopen
\]
which my gut tells me might actually be provable. It's awfully close to
a double use of
\[
\erule
{\int_a F^{a a}_{a} \x H^{a}_{aa}}
{ \int_a \int^{ b} F^{a b}_{a} \x H^{a}_{a b}}
\]
Let $M_d : F\sw{dd} \x H\sw{dd}$ be given such that
\[ F_{ff}  M^1_d = F^{ff} M^1_e \chave\]
\[ H_{ff}  M^2_d = H^{ff} M^2_e \chave\]
Set
\[L_d = \pair {d, d} { M^1_d, M^2_d}\cset\]
We want to show
\[ (F_f \x H_{f}) L_d  = (F^f \x H^f) L_e : \int^{bc} F^{db}_{ec} \x H^{dc}_{eb} \]
i.e.
\[  \pair {d, d} { F_f M^1_d, H_f M^2_d}  =  \pair {e, e} { F^f M^1_e, H^f M^2_e} : \int^{bc} F^{db}_{ec} \x H^{dc}_{eb} \cwant \]
Ok, what can the coend properties tell me? If I have $K : \int^c F^{de}_{ec} \x H^{dc}_{ed}$
then I can conclude
\[  \pair {d}{F^{\cdot f} K}  =  \pair {e}{ H_{\cdot f} K} : \int^{bc} F^{db}_{ec} \x H^{dc}_{eb} \]
Actually I should be reasoning about this through the lens of the Fubini theorem.
If I have $(g ,h) : (u, x) \to (v, y)$, and I have
$K :  F^{d v}_{e x} \x H^{d y}_{e u}$ then
\[  \pair {u, x}{(F^{\cdot g} \x G^{\cdot h})K}  =  \pair {v, y}{ (F_{\cdot h} \x G_{\cdot g}) K} : \int^{bc} F^{db}_{ec} \x H^{dc}_{eb} \]
Oh, wow, I'm stuck here, too!

\subsubsection{Counterexample?}
Let $F^a_a = 0111$ for $\A = d \to e$. Let me try to compute $\int^{bc} F^b_c \x F^c_b$.
First let's look at $\int^c  F^b_c \x F^c_b$. This is still a two-argument bivariant functor
into $\rset$. We want to figure out what
\[
\begin{tikzcd}
  \int^c F^e_c \x F^c_d\ar[r]\ar[d]& \int^c F^e_c \x F^c_e\ar[d]\\
  \int^c F^d_c \x F^c_d\ar[r]& \int^c F^d_c \x F^c_e
\end{tikzcd}
\]
looks like. I think it looks like
\[
\begin{tikzcd}
  0\ar[r]\ar[d]& 1\ar[d]\\
  1\ar[r]&  ?
\end{tikzcd}
\]
So let's take a harder look at $\int^c F^d_c \x F^c_e$. It's the coend of
\[
\begin{tikzcd}
   F^d_d \x F^e_e\ar[r]\ar[d]&  F^d_e \x F^e_e\ar[d]\\
   F^d_d \x F^d_e\ar[r]&  F^d_e \x F^d_e
\end{tikzcd}
\]
which is just $1111$
So this means $\int^c  F^b_c \x F^c_b$ is $0111$ and $\int^{bc}  F^b_c \x F^c_b$ is $2$.

I think this means I'm convinced that setting $F = H = $
\def\inh#1{\textcolor{blue}{#1}}
\[
\begin{tikzcd}
  F^{ee}_{dd} \ar[r]\ar[d]&   F^{ee}_{de}\ar[d] &   F^{ee}_{ed} \ar[r]\ar[d]&   \inh{F^{ee}_{ee}}\ar[d] \\
  F^{ed}_{dd} \ar[r]&   F^{ed}_{de} &   F^{ed}_{ed} \ar[r]&   \inh{F^{ed}_{ee}} \\
  F^{de}_{dd} \ar[r]\ar[d]&   F^{de}_{de}\ar[d] &   F^{de}_{ed} \ar[r]\ar[d]&   \inh{F^{de}_{ee}}\ar[d] \\
  \inh{F^{dd}_{dd}} \ar[r]&   \inh{F^{dd}_{de}} &   \inh{F^{dd}_{ed}} \ar[r]&   \inh{F^{dd}_{ee}}
\end{tikzcd}
\]
is a counterexample to
\[
\erule
{\int_a F^{a a}_{aa} \x H^{a a}_{aa}}
{ \int_a \int^{ b c} F^{a b}_{a c} \x H^{a c}_{a b}}
\isbad
\]
and therefore indirectly to
\[
\erule
{ G^a_{a t\sw a} \x K^{a t\sw a}_a}
{ \exists b. G^a_{a b} \x K^{a b}_a}
\isbad
\]
Because I set $\B = \doubs \A$ and $t = \rid$ and $G^x_{y^z_w} = F^{xz}_{yw}$
and $K^{x^w_z}_y = H^{xz}_{yw}$.

\subsection{What's Special About the Forall-Tensor Case?}

I think it's essentially contained in $\S 5$ of \texttt{2018-07-04}.
Supposing I have a functor $F^{ab}_{ab}$ with a family of maps
\[ \mu_f : \left(\int_b F^{eb}_{db}\right) \to F^{et^d_e}_{dt^e_d} \]
where `appropriate' means some diagrams like
\[
\begin{tikzcd}
  \int_b F\sw {db} \ar[d, "\pi_{\rid_d}"']& \int_b F^{eb}_{db} \ar[r]\ar[l]\ar[d, "\mu_{f}"]
 & \int_b F\sw {eb}\ar[d, "\pi_{\rid_e}"]\\
   F\sw {dt\sw d} &  F^{et^d_e}_{dt^e_d} \ar[r]\ar[l] & F\sw {et\sw e}
\end{tikzcd}
\]
(which, for example,
will be possible if $F$ is univariant in $b$, or separably-product-univariant,
i.e. $F = K^{ab}_a \x H^a_{ab}$)
then I should be able to come up with
\[
\erule
{\int_a F\sw {at\sw a} \to G\sw a}
{\int_a \left(\int_b F\sw {ab}\right) \to G\sw a}
\]
How? Let $M_d : F\sw {d t\sw d} \to G\sw d$ be given with
\[ G_f \o  M_d \o F^{ft_f}_{\cdot t^f}  = G^f \o  M_e \o F^{\cdot t^f}_{ft_f} \chave\]
we define $L_d : \left(\int_b F^{db}_{db}\right) \to G^d_d$ by
\[ L_d(E) = M_d(E_{t\sw d}) \cset\]
and need to check
\[ G_f \o  L_d \o \int F^{f}  = G^f \o  L_e \o  \int F_f \]
i.e.
\[ (E : \int_b F^{eb}_{db} )\to G_f   M_d ( F^f E_{t\sw d})  = G^f M_e (F_f E_{t\sw e}) : G^d_e\cwant\]
which follows directly from the diagram
\[
\begin{tikzcd}
  \int_b F\sw {db} \ar[d, "\pi_{\rid_d}"']& \int_b F^{eb}_{db} \ar[r]\ar[l]\ar[d, "\mu_{f}"]
 & \int_b F\sw {eb}\ar[d, "\pi_{\rid_e}"]\\
   F\sw {dt\sw d} \ar[d, "M_d"']&  F^{et^d_e}_{dt^e_d} \ar[r]\ar[l] & F\sw {et\sw e}\ar[d, "M_e"]\\
G\sw d & G^d_e \ar[from=l, "G_f"']\ar[from=r, "G^f"]& G\sw e
\end{tikzcd}
\]

\subsection{Twisted Arrows Again}

What's going on? Well, I know that
\[
\lhd f =
\begin{tikzcd}
  d \ar[r]\ar[d, equal] & e \ar[from=d] \\
d \ar[r, equal] & d
\end{tikzcd}
\quad \hbox{leads to}\quad
\begin{tikzcd}
  \int_b F^{eb}_{db} \ar[r, "\mu_f"] \ar[d]& F^{et^d_e}_{dt^e_d}\ar[d]\\
  \int_b F^{db}_{db} \ar[r, "\mu_{\rid_d}"'] & F^{dt^d_d}_{dt^d_d}\\
\end{tikzcd}
\]
\[
\rhd f =
\begin{tikzcd}
  d \ar[r]\ar[d] & e \ar[from=d, equal] \\
e \ar[r, equal] & e
\end{tikzcd}
\quad \hbox{leads to}\quad
\begin{tikzcd}
  \int_b F^{eb}_{db} \ar[r, "\mu_f"] \ar[d]& F^{et^d_e}_{dt^e_d}\ar[d]\\
  \int_b F^{eb}_{eb} \ar[r, "\mu_{\rid_e}"'] & F^{et^e_e}_{et^e_e}\\
\end{tikzcd}
\]
So it feels like $\mu$ is a natural transformation between two functors $\tw(\C) \to \rset$.
Right, sure, one is $f \mapsto \int_b F^{eb}_{db}$ and the other is
$f \mapsto F^{et^d_e}_{dt^e_d}$. We're using the domain and codomain
projections $\dom : \tw(\C) \to \C$ and $\cod : \tw(\C) \to \C^\op$ and building
up stuff.

\subsection{Dualizing}
Suppose I have a functor $F$ equipped with a natural transformation
$\nu_f : F^{dt^e_d}_{et^d_e} \to \int^b F^{db}_{eb} : \tw(\C) \to \rset$
such that $\nu_{\rid_d} = \iota_{t^d_d}$ for all $d$.
Then I should be able to do
\[
\erule
{\int_a G^a_a \to  F\sw {at\sw a} }
{\int_a G^a_a \to \int^b F\sw {ab} }
\]
Let $M_d : G^d_d \to F\sw{d t\sw d}$ be given with
\[  F^{\cdot t^f}_{ft_f}  \o  M_d \o G^f = F^{ft_f}_{\cdot t^f} \o  M_e \o G_f \chave\]
We're trying to make $L_d : G\sw d \to \int^b F^{db}_{db}$ so we set
$L_d(x) = \pair{t\sw d} { M_dx}$. We need to check
\[  \int F_f  \o  L_d \o G^f = \int F^{f}\o  L_e \o G_f \]
i.e.
\[ (g : G^e_d) \to  \pair{t\sw d} {F_f M_d G^f x} = \pair{t\sw e} {F^f M_e G_f x}
: \int^b F^{db}_{eb} \cwant\]
which follows from the diagram
\[
\begin{tikzcd}
  \int^b F\sw {db} \ar[from=d, "\iota_{t\sw d}"]
& \int^b F^{db}_{eb} \ar[from=r]\ar[from=l]\ar[from=d, "\nu_{f}"']
 & \int^b F\sw {eb}\ar[from=d, "\iota_{t\sw e}"']\\
   F\sw {dt\sw d} \ar[from=d, "M_d"]&  F^{dt^e_d}_{et^d_e} \ar[from=r]\ar[from=l] & F\sw {et\sw e}\ar[from=d, "M_e"']\\
G\sw d & G^e_d \ar[l, "G^f"]\ar[r, "G_f"']& G\sw e
\end{tikzcd}
\]

\end{document}
%%  if we think of

%% \[
%% t \quad = \quad
%% \begin{tikzcd}
%%   x \ar[r]\ar[d] & y \ar[from=d] \\
%% d \ar[r] & e
%% \end{tikzcd}
%% \]
