\documentclass{article}


\usepackage{amsmath}
\usepackage{amssymb}
\input{theorem}

\input{prooftree}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}

\usepackage{tikz}
\usepackage{tikz-cd}
\def\Z{\mathcal Z}
\def\adjust{\big|}
\def\O{\mathcal{O}}
\def\rid{\mathsf{id}}
\def\int{\square}
\def\bd{\partial}
\def\prov{\vdash}
\def\prequiv{\dashv\vdash}
\def\imp{\Rightarrow}
\def\cqed{\hskip2mm{\vrule width .5em height .5em depth 0em}} % at the end of a |P.
\def\o{\circ}
\def\C{\mathbb{C}}
\def\N{\mathbb{N}}
\def\R{\mathbb{R}}
\def\x{\times}
\def\st{\mathrel|}
\def\rset{\mathbf{Set}}
\def\op{\mathsf{op}}
\def\P{\mathbf{P}}
\def\dash{\hbox{---}}
\def\deg{\mathop{\mathsf{deg}}}
\def\celse{\mathrel{|}}
\def\cn{{:}}
\def\rok{\mathrel\mathsf{ok}}
\def\sub{\subseteq}




\title{Categorifying the the Bernoulli Numbers}
\begin{document}
\maketitle
\tikzset{
   commutative diagrams/.cd,
   arrow style=tikz,
   diagrams={>=stealth}}


We have
\[\sum_{k=0}^m {m+1\choose k}B_k = m+1\]
And also
\[ B_n = {|A_n|\over (n+1)!}\]
for $A_{n}$ being a matrix with $(i,j)$ entry ${i+1\choose j-1}$ when $j \le i+1$, and 0 otherwise.
Let's call this $a_{ij}$. It's independent of $n$.
Then note
\[  (n+1)!B_n = {|A_n|}\]
So let's define $E_n = (n+1)!B_n$. By definition of determinant,
\[E_n = \sum_{\pi \in S_n} \mathsf{sgn}(\pi) \prod_{i =1}^n a_{i\pi_i}\]
or we could phrase this as
\[E^\sigma_n = \sum_{\pi \in S^\sigma_n}  \prod_{i =1}^n a_{i\pi_i}\qquad E_n = E^+_n - E^-_n\]
So our recurrence becomes
\[\sum_{k=0}^m {m+1\choose k} E_k / (k+1)! = m+1\]
and multiplying through by $(m+1)!$ makes things always integers:
\[\sum_{k=0}^m{m+1\choose k}{(m+1)!\over (k+1)!} E_k  = (m+1)(m+1)!\]
and we can get rid of negatives by defining
\[F^\sigma_m = \sum_{k=0}^m{m+1\choose k}{(m+1)!\over (k+1)!} E^\sigma_k\]
For a fully expanded definition, we can say
\[F^\sigma_m = \sum_{k=0}^m{m+1\choose k}{(m+1)!\over (k+1)!} \sum_{\pi \in S^\sigma_k}  \prod_{i =1}^k {i+1 \choose \pi_i-1}[\pi_i \le i+1]\]
In any case the bijection to be shown is that
\[ F^+_m = F^-_m + (m+1)(m+1)!\]
Or I could think of this as being about general vs. alternating permutations
rather than positive vs. negative:
\[ 2F^+_m = F_m + (m+1)(m+1)!\]
\[{m+1\choose k}{(m+1)!\over (k+1)!} = \begin{tabular}{llllll}
1\\
2&2\\
6&9&3\\
24&48&24&4\\
120&300&200&50&5\\
720&2160&1800&600&90&6\\
\end{tabular}\]
\[\begin{tabular}{ll}
$E_0^+ = 1$&$E_0^- = 0$\\
$E_1^+ = 1$&$E_1^- = 0$\\
$E_2^+ = 3$&$E_2^- = 2$\\
$E_3^+ = 24$&$E_3^- = 24$\\
$E_4^+ = 380$&$E_4^- = 384$\\
$E_5^+ = 9120$&$E_5^- = 9120$\\
$E_6^+ = 304920$&$E_6^- = 304800$
\end{tabular}
%
\begin{tabular}{ll}
$F_0^+ = 1$&$F_0^- = 0$\\
$F_1^+ = 4$&$F_1^- = 0$\\
$F_2^+ = 24$&$F_2^- = 6$\\
$F_3^+ = 240$&$F_3^- = 144$\\
$F_4^+ = 4120$&$F_4^- = 3520$\\
$F_5^+ = 111600$&$F_5^- = 107280$\\
$F_6^+ = $&$F_6^- =$
\end{tabular}\]
\section{Back to BCHD}
Trying to understand the Baker-Campbell-Hausdorff-Dynkin formula
which guarantees $e^Ae^B = e^{H(A,B)}$ when we define
\def\ve{\varepsilon}
\def\pairs{\mathsf{pairs}}
\def\comp{\mathsf{comp}}
\[ H(A,B) = \sum_{i=1}^\infty \sum_{m_1 + n_1 > 0}\cdots \sum_{m_k + n_k > 0} {(-1)^{k-1}\over k\sum_{i=1}^k (m_i+n_i)}{1\over m_1!n_1!\cdots m_k! n_k!}\]
\[
[\overbrace{X,[\cdots,[X}^{m_1},
[\overbrace{Y,[\cdots,[Y}^{n_1},
[\cdots
[\overbrace{X,[\cdots,[X}^{m_k},
[\overbrace{Y,[\cdots,[Y, [\cdots]}^{n_k},
\cdots ]
\]
Here's some alternate notation. Write $p$ for a list of pairs, $\bar X$ for a list of operators,
$\ve$ for the empty list. Define some typing judgments for number and pair lists:
\[\erule{}{\ve:\comp^0_0} \qquad \erule{a > 0\qquad p:\comp^n_k}{a,p:\comp^{n+a}_{k+1}}\]
\[\erule{}{\ve:\pairs^0_0} \qquad \erule{a + b > 0\qquad p:\pairs^n_k}{(a,b)p:\pairs^{n+a+b}_{k+1}}\]
And define  $p!$ and $[\bar X]$ (for $X$ a list of operators) and $[A,B]^p$ by
\[  \ve! = 1 \qquad ((a,b)p)! = a!b!p!\]
\[ [X] = X \qquad [X,\bar X] = [X,[\bar X]] \]
\[[A, B]^{(a_1,b_1)\ldots (a_k,b_k)} = [
\overbrace{A,\cdots, A}^{a_1},
\overbrace{B,\cdots, B}^{b_1},
\cdots
\overbrace{A,\cdots, A}^{a_k},
\overbrace{B,\cdots, B}^{b_k}
]\]
Now I can say
\[ p : \pairs^n_k \prov \mu_p = {(-1)^{k-1} \over kn p!  }\]
\[  H_{p} = \mu_p[A,B]^{p}\]
\[ G_n = \sum_{k} \sum_{p:\pairs^n_k} H_{p} \]
and claim
\[ (A \oplus B)^n = \sum_{k} \sum_{\lambda : \comp^n_k} {n!\over k!} G_\lambda \]
So let's say the car of $p$ is $p_0$ and the cdr is $p_1$.
Say $p_+ = [A,B]^{p_1}$.
The defining isomorphism of $H_p$ is
\[ knp! H_p + p_+p_0 = p_0p_+ \qquad\hbox{($k$ odd)}\]
\[ knp! H_p + p_0p_+ = p_+p_0 \qquad\hbox{($k$ even)}\]
But we can observe that $\mu_{p_1} p_+ = H_{p_1}$, so
$p_+ = (-1)^{k-2} (k-1)(n-p_0) (p!/ p_0) H_{p_1}$.

This is prone to mistakes. I'm going to do some examples.
\[H_{(1,0)} = A  \]
\[H_{(0,1)} = B \quad 2H_{(1,1)} = [AB] \quad 6H_{(2,1)} = [AAB]\]
\[4H_{(0,1)(1,0)} = -[BA]\]
\[4H_{(1,0)(0,1)} = -[AB] \quad 2H_{(1,0)(1,1)} = -[AAB] \quad 6H_{(1,0)(2,1)} = -[AAAB]\]
\[6H_{(0,1)(1,1)} = -[BAB] \quad 16H_{(0,1)(2,1)} = -[BAAB]\]
\[40H_{(0,2)(2,1)} = -[BBAAB]\]

\[(5 \cdot 2! )H_{(0,2)(2,1)} = [B, (4 \cdot 1! )H_{(0,1)(2,1)}]\]
Suppose $p: \pairs^n_k$. The defining isomorphisms come from:
\[H_{(1,0)} = A  \qquad H_{(0,1)} = B\]
\[(a+b+n+1) (a+1)! H_{(a+1,b)p} = [A, (a+b+n)a! H_{(a,b)p}]\]
\[(b+n+1) (b+1)! H_{(0,b+1)p} = [B, (b+n)b! H_{(0,b)p}]\]
\[(n+1)(k+1) H_{(0,1)p} = [ nk H_{p}, B]\]
\[(n+1)(k+1) H_{(1,0)p} = [ nk H_{p}, A]\]

\[a = 0, b = 1, n = 0, k = 0\]
\[2H_{(1,1)} = [A, B]\]
\[4H_{(0,1)(1,0)} = [A, B]\]
\[4H_{(1,0)(0,1)} = [B, A]\]
\end{document}
