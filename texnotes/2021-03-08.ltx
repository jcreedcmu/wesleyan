\documentclass{article}
\usepackage{amssymb}
\input{theorem}

\input{prooftree}
\def\erule#1#2{\begin{prooftree}#1\justifies #2\end{prooftree}}
\def\pair#1#2{\langle #1 , #2 \rangle}

\usepackage{bm}
\usepackage{float}
\usepackage{tikz}
\usepackage{tikz-cd}
\newcommand{\sqdiamond}[1][fill=black]{\tikz [x=1.2ex,y=1.85ex,line width=.1ex,line join=round, yshift=-0.285ex] \draw  [#1]  (-0.25,.5) -- (0.5,1) -- (1.25,.5) -- (.5,0) --  cycle;}%
\newcommand{\dia}[1][fill=black]{\mathop{\raisebox{-0.275ex}{$\sqdiamond[#1]$}}}
\def\bx{\square}

%\usepackage{wasysym}
%\usepackage{stmaryrd}
\usetikzlibrary{calc}
\definecolor{morange}{rgb}{1,0.56,0}
\definecolor{lorange}{rgb}{1,0.95,0.8}
\definecolor{mgreen}{rgb}{0,0.56,0}
\definecolor{lgreen}{rgb}{0.95,1,0.8}
\definecolor{lgray}{rgb}{0.95,0.95,1.0}
\definecolor{mblue2}{rgb}{0,0.2,1.0}
\definecolor{lblue}{rgb}{0.8,0.95,1}
\definecolor{mred}{rgb}{0.9,0.1,0.1}
\definecolor{mgreen}{rgb}{0.1,0.5,0.1}
\definecolor{mblue}{rgb}{0.3,0.3,0.9}
\def\bitf#1{#1 [smooth, tension=0.8] coordinates {(-1.6,2) (-1,1) (0,0)}}
\def\bitg#1{#1 [smooth, tension=0.8] coordinates {(1,2) (0.55,1) (0,0)}}
\def\bitgrev#1{#1 [smooth, tension=0.8] coordinates {(0,0) (0.55,1) (1,2)}}
\def\bitfg#1{#1 [smooth, tension=0.8] coordinates {(0,0) (0,-2) }}
\def\ep{\varepsilon}
\def\Top{\mathbf{Top}}
\def\TopR{\mathbf{TopR}}
\def\bcase{\mathop\mathbf{case}}
\def\bof{\mathop\mathbf{of}}
\def\binj{\mathbf{inj}}
\def\blet{\mathrel\mathbf{let}}
\def\bin{\mathrel\mathbf{in}}
\def\bmatch{\mathrel\mathbf{match}}
\def\bwith{\mathrel\mathbf{with}}
\def\pbck{\ar[dr, phantom, pos=0, "\lrcorner"]}
\def\ups{{\uparrow}}
\def\dns{{\downarrow}}
\def\grad{\nabla}
\def\uups{{\Uparrow}}
\def\ddns{{\Downarrow}}
\def\adjust{\big|}
\def\O{\mathcal{O}}
\def\rid{\mathsf{id}}
\def\ridp{\mathsf{idp}}
\def\rcoe{\mathsf{coe}}
\def\rtype{\mathsf{type}}
%\def\int{\square}
\def\bd{\partial}
\def\prov{\vdash}
\def\prequiv{\dashv\vdash}
\def\imp{\Rightarrow}
\def\cqed{\hskip2mm{\vrule width .5em height .5em depth 0em}} % at the end of a |P.
\def\o{\circ}
\def\lx{\bigcirc}
\def\B{\mathbb{B}}
\def\C{\mathbf{C}}
\def\K{\mathbf{K}}
\def\M{\mathbf{M}}
\def\T{\mathbf{T}}
\def\Set{\mathbf{Set}}
\def\D{\mathbf{D}}
\def\J{\mathbf{J}}
\def\R{\mathbb{R}}
\def\op{\mathsf{op}}
\def\P{\mathbb{P}}
\def\I{\mathbb{I}}
\def\U{\mathbb{U}}
\def\N{\mathbb{N}}
\def\Z{\mathbb{Z}}
\def\tw{\mathbf{2}}
\def\dash{\hbox{---}}
\def\span{\mathop{\mathrm{span}}}
\def\dom{\mathop{\mathrm{dom}}}
\def\cod{\mathop{\mathrm{cod}}}
\def\celse{\mathrel{|}}
\def\cn{{:}}
\def\rok{\mathrel\mathsf{ok}}
\def\llam#1{\langle {#1} \rangle}
\def\hf{{\odot}}
\def\lerp#1#2#3{#1[\![#2,#3]\!]}
\def\nope{\emptyset}
\def\ep{\varepsilon}
\def\rng{\mathop\mathrm{rng}}
\def\npart{\not\!\partial}
\def\null{\emptyset}
\def\xx{{\bf x}}
\def\yy{{\bf y}}
\def\ps{\wp}

\begin{document}
\tikzset{>=stealth}
\tikzset{
   commutative diagrams/.cd,
   arrow style=tikz,
   diagrams={>=stealth}}

\section{Thinking about a 2-d Modal Logic}

This is something that arose by trying to think about higher-dimensional analogs of adjoints.
A proposition is something like: a well-behaved compact subset of $\R^2$, (up to homotopies of $\R^2$)
and an entailment is something like a way of `adding ink' to that subset, making it bigger.
This is by analogy with with ordinary adjunctions characterize well-behaved compact subsets of $\R^1$
as lists of finite intervals interpreted as alternations of the adjoint functors $UFUFUF$, and $\eta$
lets us `create a new interval blob of ink' and $\epsilon$ lets us `join two blobs of ink'.
If $F : \C \to \D$ and $U : \D \to \C$ then we think of $\C$ as `whitespace' on the page, and $\D$ as `ink',
for $\eta : 1_\C \to UF$ and $\epsilon : FU \to 1_\D$.

The two-dimensional case looks syntactically like this, I think:
\def\ox{\otimes}
\def\pr{{\,\hskip0.1em\bindnasrepma\,}}
\[
\begin{tabular}{r@{$\quad$}c@{$\quad::=\quad$ }l}
   Polarities&$i$&$0 \celse 1$\\
   Contexts&$\Delta^i$&$\cdot \celse \Delta^i, A^i \celse \Delta^i, (\Delta^{\bar i})^i$\\
   Propositions&$A^i$&$1^i \celse A^i \ox^i A^i\celse \bigcirc^i A^{\bar i} $\\
\end{tabular}
\]
The complement of $i$ (swapping $0$ and $1$) is $\bar i$.
We write $\Gamma$ for either $\Delta^0$ or $\Delta^1$, and $\Gamma[\Gamma']$ for $\Gamma$ with $\Gamma'$ occurring somewhere
(perhaps deeply nested inside $($parentheses$)$) inside it.

%We write $(\Omega)^i$ and $(\Delta)^s$
%for the parentheses when it's important to disambiguate the overloading.

The propositions here are all positive; on the left we asynchronously decompose into judgmental context-material,
and on the right we demand it exists. Probably we could add some negative propositions but I haven't thought
through them yet. We leave off all the polarity superscripts here because the most general set
of them can be uniquely inferred.
\[
\erule
{\using 1 R}
{\cdot \prov 1}
\qquad
\erule
{\Gamma[\cdot] \prov \using 1 L}
{\Gamma[1] \prov}
\qquad
\erule
{\Gamma \prov A \using \bigcirc R}
{(\Gamma) \prov \bigcirc A}
\qquad
\erule
{\Gamma[ (A_0)] \prov \using \bigcirc L}
{\Gamma[\bigcirc A_0] \prov  }
\]
\[
\erule
{\Gamma_1 \prov A_1 \qquad \Gamma_2 \prov A_2\using \ox R}
{\Gamma_1, \Gamma_2 \prov A_1 \ox A_2}
\qquad
\erule
{\Gamma[A_1,A_2]\prov  \using {\ox} L}
{\Gamma[A_1 \ox A_2] \prov }
\]
The interesting content of the logic is its structural rules. We have
exchange (but not weakening or contraction) for the comma in both
kinds of contexts, and

\[
\erule
{\Gamma[(\Delta_1, \Delta_2)^1 ] \prov }
{\Gamma[(\Delta_1)^1, (\Delta_2)^1 ] \prov }
\qquad
\erule
{\Gamma[()^1 ] \prov }
{\Gamma[\cdot ] \prov }
\qquad
\erule
{\Gamma[(\Delta_1)^0, (\Delta_2)^0 ] \prov }
{\Gamma[(\Delta_1, \Delta_2)^0 ] \prov }
\qquad
\erule
{\Gamma[\cdot ] \prov }
{\Gamma[()^0 ] \prov }
\]
\[
\erule
{\Gamma[\Delta_1, ( \Delta_2)^0] \prov }
{\Gamma[((\Delta_1)^1, \Delta_2)^0] \prov }
\qquad
\erule
{\Gamma[((\Delta_1)^0, \Delta_2)^1] \prov }
{\Gamma[\Delta_1, ( \Delta_2)^1] \prov }
\]
\subsection{First-order Interpretation}
\def\tri{\triangleright}

Here's a translation that might be equivalent to the proof theory above. We imagine
that there are two classes of first-order worlds, and interpret into first-order linear logic
with unrestricted propositions for relation facts $v \tri w$.

We define
\def\wat{\mathrel{@}}
\[ (\bigcirc^1 A) \wat w = \forall v . (v\tri w) \imp A \wat v \]
\[ (\bigcirc^0 A) \wat v = \exists w.  (v \tri w)  \land A  \wat w \]
\[ (A \ox B) \wat w = (A \wat w) \ox (B \wat w) \]
\[ 1 \wat w = 1 \]
\[ a \wat w = a(w) \]

Essentially, this means $\bigcirc^0 A = \dia A$ and $\bigcirc^1 A = \bx A$.
\subsection{Proof Terms}

A proof term of the entailment
\[b : \bx 1 \ox \bx 1 \ox \bx 1 \prov M : \bx 1 \ox \bx 1  \ox \bx 1 \ox \bx 1 \]
should be something like a function $3 \to 4$. This seems about right. I could sketch
\[ \blet (x, y, z) = b \bin (\]
\[\Lambda k . \blet () = k[x] \bin\ \blet () = k[y] \bin () ,\]
\[\Lambda k . \blet () = k[z] \bin () ,\]
\[\Lambda k .  () ,\]
\[\Lambda k .  () \]
\[) \]
And this is the map that takes $(x,y,z) \to (0,1,2,3)$ and assigns $x,y$ to $0$ and $z$ to $1$.

Likewise a proof term  of
\[b : \dia 1 \ox \dia 1 \ox \dia 1  \ox \dia 1 \prov M : \dia 1 \ox \dia 1  \ox \dia 1 \]
should be a map $3 \to 4$. We write
\[ \blet b = ((k_0, ()), (k_1, ()), (k_2, ()), (k_3, ())) \bin ( \]
\[ \langle k_0,() \rangle, \langle k_0, () \rangle, \langle k_1, () \rangle \]
\[ )\]
for the same function.
\subsection{Soundness/Completeness}
I never know which direction to call these things. Let me describe directly a partial order
on propositions
\[
\begin{tabular}{r@{$\quad$}c@{$\quad::=\quad$ }l}
   Polarities&$i$&$0 \celse 1$\\
   Propositions&$P^i$&$1^i \celse P^i \ox^i P^i\celse \bigcirc^i P^{\bar i} \celse a^i $\\
\end{tabular}
\]
where I write as abbreviations $\dia = \bigcirc^0$ and $\bx = \bigcirc^1$.
Let me use consistently $A$ for $P^0$ and $B$ for $P^1$. Write $\equiv$ when $\le$ and $\ge$ both hold.
Take as axioms
\[
\bx A_1 \ox \bx A_2 \le \bx (A_1 \ox A_2)
\qquad
1 \le \bx 1
\]
\[
\dia (B_2 \ox B_2) \le \dia B_1 \ox \dia B_2
\qquad
\dia 1 \le 1
\]
\[ \bx A \ox B \le \bx (A \ox \dia B)
\qquad  \dia (B \ox \bx A) \le \dia B \ox A  \]
and associativity/commutativity/unit laws
\[ P^i \ox 1 \equiv P^i \]
\[ P^i_1 \ox P^i_2 \equiv P^i_2 \ox P^i_1 \]
\[ (P^i_1 \ox P^i_2) \ox P^i_3 \equiv P^i_1 \ox (P^i_2 \ox P^i_3) \]
and reflexivity and transitivity
\[
\erule{}{
a^i \le a^i}
\qquad
\erule
{P^i_1 \le P^i_2 \qquad P^i_2 \le P^i_3}
{P^i_1 \le P^i_3}
\]
and congruences
\[
\erule
{P^i_1 \le Q^i_1 \qquad P^i_2 \le Q^i_2}
{P^i_1 \ox P^i_2 \le Q^i_1 \ox Q^i_2}
\qquad
\erule
{}
{1 \le 1}
\qquad
\erule
{P^{\bar i} \le Q^{\bar i}}
{\bigcirc^i P^{\bar i} \le \bigcirc^i Q^{\bar i}}
\]
Then I conjecture $P^i \le Q^i$ iff $P^i[ w] \prov Q^i [ w]$.

I think the direction ${\le} \imp {\prov} $ is easy. I just inspect
every axiom, and find that the sequent-calculus version under translation holds.

The other direction is trickier. For every sequent
\[\Delta \prov P^i[w] \iff  P_1^{i_1}[w_1], \ldots, P_n^{i_n}[w_n] \prov P^i[w]\]
I need to come up with some interpretation of the context and the conclusion as props, and assert
\[ \Delta^* \le (P^i[w])^* \]
and proceed by induction on the sequent calculus rules somehow.

Let's have the following data structure:
\def\CC{{\mathsf C}}
\def\xto{\rightsquigarrow}
\[
\begin{tabular}{r@{$\quad$}c@{$\quad::=\quad$ }l}
   Trees&$C^i$&$ w^{ i} ( C^{\bar i}) \celse C^i \ox C^i \celse P^i$
\end{tabular}
\]
Tree expressions have actual world variables in them. I translate to contexts like
\[ w(C) \wat v = w :\mathsf{world}, w\tri v, (C \wat v)\]
\[ (C_1 \ox C_2) \wat w = (C_1 \wat w) \ox (C_2 \wat w) \]
\[ P \wat w = P[w] \]
I can translate to propositions like
\[ \pi(w(C))  = \bigcirc (\pi C) \]
\[ \pi(C_1 \ox C_2) = \pi C_1 \ox \pi C_2 \]
\[ \pi P  = P \]
and I can pick out a conclusion world via
?

Suppose I understood what it means for $C \xto_w \Delta$. One is meant to unpack
all the modalities eagerly as if they were asynchronous, even when they are not.

Then I claim: if $C \xto_w \Delta$, and $C' \xto_w P$, and $\Delta \prov P[w]$,
then $C \le C'$.

\subsection{Another Try}

Let's say $\Gamma$ is the unrestricted context in which world variables and relations between them exist.
Define a judgment that says how a context can reduce to a single proposition.
\[
\erule
{}
{\Gamma \prov P[u] \xto P[u]}
\]
\[
\erule{ \Gamma \prov v \tri w \qquad  \Gamma \prov \Delta, \bx B[w] \xto P[u]}
{\Gamma \prov \Delta, B[v] \xto P[u]}
\qquad
\erule{ \Gamma \prov v \tri w \qquad \Gamma \prov \Delta, \dia A[v] \xto P[u]}
{\Gamma \prov \Delta, A[w] \xto P[u]}
\]
\[
\erule
{\Gamma \prov \Delta, (P_1 \ox P_2)[w] \xto P[u]}
{\Gamma \prov \Delta, P_1[w], P_2[w] \xto P[u]}
\]
Then I think the other half of the adequacy theorem is the claim:
If $\Gamma; \Delta \prov P[w]$ and $\Gamma \prov \Delta \xto Q[u]$ and $\Gamma \prov P[w] \xto P'[u]$,
then $Q \le P'$.

The proof should go by induction on $\Gamma; \Delta \prov P[w]$. Let's look at an easy case first; the asynchronous
case of a modal operator. We suppose we have a derivation like
\[
\erule
{\Gamma, t, v\tri t; \Delta,  A[t] \prov P[w] \using {\dia} L}
{\Gamma; \Delta, \dia A[v] \prov P[w]}
\]
By assumption we have derivations
\[ \Gamma \prov \Delta, \dia A[v] \xto Q[u] \]
\[ \Gamma \prov P[w] \xto P'[u] \]
but we can construct
\[ \Gamma, t, v \tri t\prov \Delta, \dia A[t] \xto Q[u] \]
so the i.h. gives us $Q \le P'$ as required.

Let's tackle the asynchronous case for $\bx$, too, I'm suspicious of the asymmetry. We start with a derivation like
\[
\erule
{\Gamma, t, t\tri w; \Delta\prov B[t] \using {\bx} R}
{\Gamma; \Delta \prov \bx B[w]}
\]
and also we have
\[ \Gamma \prov \Delta \xto Q[u] \]
\[ \Gamma \prov \bx B[w] \xto P'[u] \]
but we can construct
\[
{\Gamma, t, t \tri w \prov \Delta, B[t] \xto P'[u]}
\]
so again we get $Q \le P'$ out of the induction hypothesis, phew.

Let's lookat the {\em synchronous} side of the modalities. I expect to encounter the `escaping' move here.
We could look at $\dia R$. We have a relation
\[
\erule
{\Gamma \prov v \tri t \qquad \Gamma; \Delta\prov A[t] \using {\dia} R}
{\Gamma; \Delta \prov \dia A[v]}
\]
and we have collateral derivations
\[ \Gamma \prov \Delta \xto Q[u] \]
\[ \Gamma \prov \dia A[v] \xto P'[u] \]
Now we want to derive something from that $\xto$ derivation involving $\dia A$. It seems we can get
\[
{\Gamma \prov  A[t] \xto P'[u]}
\]
which seems like it's too easy? What did we get away with here.

Let's try $\bx L$ just to be sure.
We have a derivation
\[
\erule
{\Gamma \prov  t\tri v \qquad \Delta,  B[t] \prov P[w] \using {\bx} L}
{\Gamma; \Delta, \bx B[v] \prov P[w]}
\]
and collateral derivations
\[ \Gamma \prov \Delta, \bx B[v] \xto Q[u] \]
\[ \Gamma \prov P[w] \xto P'[u] \]
and it seems we can derive
\[
\erule{ \Gamma \prov t \tri v \qquad  \Gamma \prov \Delta, \bx B[v] \xto Q[u]}
{\Gamma \prov \Delta, B[t] \xto Q[u]}
\]
so it looks like again we just straightforwardly get $Q \le P'$.
\subsection{Analyzing the Confusion}
When I have $a, b, c$ arising in
\[
\begin{prooftree}
\[
\[
\[
\justifies
b \tri a, b \tri c; A [c] \prov  B[b]
\]
\justifies
b \tri a ; \dia A [b] \prov  B[b]
\]
\justifies
b \tri a ; \bx( \dia A )[a] \prov  B[b]
\]
\justifies
\bx( \dia A )[a] \prov \bx B[a]
\end{prooftree}
\]

with $b \tri a$ and $b \tri c$ I don't actually know which is was the {\em root} of the tree of assumptions;
I just know I have an acyclic connected bipartite graph, I think. This same arrangement could have come from
\[
\begin{prooftree}
\[
\[
\[
\[
\justifies
b\tri a, b \tri c; A[c] \prov  B[b]
\]
\justifies
b\tri a;\dia A[b] \prov  B[b]
\]
\justifies
b\tri a;\dia A[b],  1[a] \prov  B[b]
\]
\justifies
\dia A[b], \dia 1[b] \prov  B[b]
\]
\justifies
\dia A\ox \dia 1[b] \prov  B[b]
\end{prooftree}
\]
Now both of these sequents are provable, if I substitute $A = \bx B$. Do these make sense graphically?
I think so:
\begin{figure}[H]
\centering
\includegraphics[scale=0.35]{images/modal-proofs.png}
\end{figure}

I conjecture that there is some canonical way of rolling back a sequent to an entailment involving only
a pair of propositions at the same world, given a choice of root of the bipartite tree, and maybe like
an ordering of leaves to roll back. To prove this I'd have to show how to roll back any leaf.

So there are really four cases. I spit on whether I'm going forward or backward on the leaf,
and whether that world appears in the conclusion or not. Case one is eliminating $a \tri \dash$
where $a$ is the conclusion.
\[
{\Gamma, a \tri b; \Delta, A_1[a], \ldots, A_n[a] \prov A[a]}
\]
goes to
\[
{\Gamma; \Delta, \bx(A_1\ox \cdots\ox A_n)[b] \prov \bx A[b]}
\]
Case two is eliminating $\dash \tri b$ where $b$ is the conclusion:
\[
{\Gamma, a \tri b; \Delta, A_1[b], \ldots, A_n[b] \prov A[b]}
\]
goes to
\[
{\Gamma; \Delta, \dia(A_1\ox \cdots\ox A_n)[a] \prov \dia A[a]}
\]
Case three is eliminating $\dash \tri b$ where $b$ is not the conclusion:
\[
{\Gamma, a \tri b; \Delta, A_1[b], \ldots, A_n[b] \prov A[c]}
\]
goes to
\[
{\Gamma; \Delta, \dia(A_1\ox \cdots\ox A_n)[a] \prov  A[c]}
\]
Case four is is eliminating $a \tri \dash$
where $a$ is not the conclusion --- but I don't know how to handle this case.
Can I rule it out? Does it arise organically?

Let me define a relation $\xto$ by these three cases:

\[
\Gamma, a, a \tri b; \Delta, A_1[a], \ldots, A_n[a] \prov A[a]
\xto
\Gamma; \Delta, \bx(A_1\ox \cdots\ox A_n)[b] \prov \bx A[b]
\]
%
\[
\Gamma, b, a \tri b; \Delta, A_1[b], \ldots, A_n[b] \prov A[b]
\xto
\Gamma; \Delta, \dia(A_1\ox \cdots\ox A_n)[a] \prov \dia A[a]
\]
%
\[\Gamma, b, a \tri b; \Delta, A_1[b], \ldots, A_n[b] \prov A[c]
\xto
\Gamma; \Delta, \dia(A_1\ox \cdots\ox A_n)[a] \prov  A[c]
\]
and conjecture that if $\Gamma;\Delta \prov A[w]$ and
$\Gamma;\Delta \prov A[w] \xto^* v;A[v] \prov B[v]$ then $A \le B$.

\subsection{Simpler Syntax}
\[
\begin{tabular}{r@{$\quad$}c@{$\quad::=\quad$ }l}
   Props&$A$&$ \dia B \celse A \ox A \celse 1 \celse a$\\
   Coprops&$B$&$ \bx A \celse B \oplus B \celse 0 \celse a^\perp$\\
\end{tabular}
\]
Define $A^\perp$ and $B^\perp$ by
\[ 1^\perp = 0 \qquad  0^\perp = 1\qquad (\dia B)^\perp = \bx (B^\perp) \qquad (\bx A)^\perp = \dia (A^\perp) \]
\[ (A_1 \ox A_2)^\perp = A_1^\perp \oplus A_2^\perp \qquad
(B_1 \oplus B_2)^\perp = B_1^\perp \ox B_2^\perp \qquad a^{\perp\perp} = a\]
Take as axioms
\[
\bx A_1 \ox \bx A_2 \le \bx (A_1 \ox A_2)
\qquad
1 \le \bx 1
\qquad
 \bx A \ox B \le \bx (A \ox \dia B)\]
and associativity/commutativity/unit laws
\[ (A_1 \ox A_2) \ox A_3 \equiv A_1 \ox (A_2 \ox A_3)  \qquad A_1 \ox A_2 \equiv A_2 \ox A_1
\qquad  A \ox 1 \equiv A\]
and reflexivity and transitivity
\[
\erule{}{
a \le a}
\qquad
\erule
{A_1 \le A_2 \qquad A_2 \le A_3}
{A_1 \le A_3}
\]
and congruences
\[
\erule
{A_1 \le A'_1 \qquad A_2 \le A'_2}
{A_1 \ox A_2 \le A'_1 \ox A'_2}
\qquad
\erule
{}
{1 \le 1}
\qquad
\erule
{B_2^\perp \le B_1^\perp  }
{\dia B_1 \le \dia B_2}
\]
\def\mod{\vDash}
\subsection{Even Simpler Syntax}
\[
\begin{tabular}{r@{$\quad$}c@{$\quad::=\quad$ }l}
   Propositions&$A, B, C$&$ \bx A \celse A \ox A \celse 1 \celse a$\\
\end{tabular}
\]
Define $A \mod B$ (with $\equiv$ meaning $\mod$ in both directions) by the axioms
\[
\bx A \ox \bx B \mod \bx (A \ox B)
\qquad
1 \mod \bx 1
\qquad
 \bx A \ox B \mod \bx (A \ox \bx B)\]
% and associativity/commutativity/unit laws
\[ (A \ox B) \ox C \equiv A \ox (B \ox C)  \qquad A \ox B \equiv B \ox A
\qquad  A \ox 1 \equiv A\]
% and reflexivity, transitivity, and congruences
\[
\erule{}{
a \mod a}
\qquad
\erule
{A \mod B \qquad B \mod C}
{A \mod C}
\qquad
\erule
{A \mod A' \qquad B \mod B'}
{A \ox B \mod A' \ox B'}
\qquad
\erule
{}
{1 \mod 1}
\qquad
\erule
{B \mod A }
{\bx A \mod \bx B}
\]

We can interpret this langauge into linear logic with
first-order quantifiers over a sort of `kripke worlds', and unrestricted assumptions of a binary relation $\tri$ on worlds.
We define two interpretation functions, $A^x$ and $A_y$, each of which takes a proposition and a world, and
returns a (linear, first-order) proposition.
\[ (\bx A)^x = \forall y . !(y \tri x) \multimap A_y \qquad (\bx A)_y = \exists x . !(y \tri x) \ox A_x  \]
\[ ( A\ox B)^x = A^x \ox B^x \qquad (A \ox B)_y = A_y \ox B_y \]
\[ 1^x = 1 \qquad 1_x = 1\]
\[ a^x = a(x) \qquad a_x = a(x)\]
\begin{conjecture}
$A^x \prov B^x$ if and only if $A \mod B$.
\end{conjecture}

\subsection{The Limit of Generality of World Trees}

\def\AA{\bm{\mathsf A}}
\def\BB{\bm{\mathsf B}}
I think I can characterize the variety of world structures one actually encounters while
carrying out proof search. Suppose we have world-sorts $b \tri a$, with
\[(\bx A) \wat b = \forall a .  (a\tri b) \imp (A \wat a)\]
\[(\dia B) \wat a = \exists b . (a \tri b) \land (B \wat b)\]
We define two classes of linear contexts (which tacitly depend on which worlds
are available) $\AA$ and $\BB$ by
\[
\erule
{}
{ \cdot \in \BB(b)}
\qquad
\erule
{}
{ \cdot \in \AA(a)}
\qquad
\erule
{\Delta \in \BB(b)}
{ \Delta, B[b] \in \BB(b)}
\]

\[
\erule
{\Delta \in \AA(a)}
{\Delta, A[a] \in \AA(a)}
\qquad
\erule
{\Delta \in \AA(a) \qquad \Delta' \in \BB(b) \qquad a \tri b}
{\Delta, \Delta' \in \AA(a)}
\]

\[
\erule
{\Delta \in \AA(a)}
{\Delta \in \AA^+(a)}
\qquad
\erule
{\Delta \in \AA(a) \qquad \Delta' \in \BB^+(b) \qquad a \tri b}
{\Delta, \Delta' \in \AA^+(a)}
\]

\[
\erule
{\Delta \in \BB(b)}
{\Delta \in \BB^+(b)}
\qquad
\erule
{\Delta \in \BB(b) \qquad \Delta' \in \AA^+(a) \qquad a \tri b}
{\Delta, \Delta' \in \BB^+(b)}
\]



\end{document}
